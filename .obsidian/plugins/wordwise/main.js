var ta=Object.create;var qt=Object.defineProperty;var ra=Object.getOwnPropertyDescriptor;var na=Object.getOwnPropertyNames;var sa=Object.getPrototypeOf,oa=Object.prototype.hasOwnProperty;var ia=(n,e)=>()=>(n&&(e=n(n=0)),e);var F=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Ln=(n,e)=>{for(var t in e)qt(n,t,{get:e[t],enumerable:!0})},$n=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of na(e))!oa.call(n,s)&&s!==t&&qt(n,s,{get:()=>e[s],enumerable:!(r=ra(e,s))||r.enumerable});return n};var pt=(n,e,t)=>(t=n!=null?ta(sa(n)):{},$n(e||!n||!n.__esModule?qt(t,"default",{value:n,enumerable:!0}):t,n)),Er=n=>$n(qt({},"__esModule",{value:!0}),n);var Un=F((Sr,Ir)=>{(function(n,e,t){typeof Sr=="object"?(Ir.exports=t(),Ir.exports.default=t()):typeof define=="function"&&define.amd?define(t):e[n]=t()})("slugify",Sr,function(){var n=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xA2":"cent","\xA3":"pound","\xA4":"currency","\xA5":"yen","\xA9":"(c)","\xAA":"a","\xAE":"(r)","\xBA":"o","\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xC6":"AE","\xC7":"C","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xD0":"D","\xD1":"N","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xDD":"Y","\xDE":"TH","\xDF":"ss","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xE6":"ae","\xE7":"c","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xF0":"d","\xF1":"n","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xFD":"y","\xFE":"th","\xFF":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010C":"C","\u010D":"c","\u010E":"D","\u010F":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011A":"E","\u011B":"e","\u011E":"G","\u011F":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012A":"i","\u012B":"i","\u012E":"I","\u012F":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013B":"L","\u013C":"l","\u013D":"L","\u013E":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014C":"O","\u014D":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015A":"S","\u015B":"s","\u015E":"S","\u015F":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016A":"u","\u016B":"u","\u016E":"U","\u016F":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017A":"z","\u017B":"Z","\u017C":"z","\u017D":"Z","\u017E":"z","\u018F":"E","\u0192":"f","\u01A0":"O","\u01A1":"o","\u01AF":"U","\u01B0":"u","\u01C8":"LJ","\u01C9":"lj","\u01CB":"NJ","\u01CC":"nj","\u0218":"S","\u0219":"s","\u021A":"T","\u021B":"t","\u0259":"e","\u02DA":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038A":"I","\u038C":"O","\u038E":"Y","\u038F":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039A":"K","\u039B":"L","\u039C":"M","\u039D":"N","\u039E":"3","\u039F":"O","\u03A0":"P","\u03A1":"R","\u03A3":"S","\u03A4":"T","\u03A5":"Y","\u03A6":"F","\u03A7":"X","\u03A8":"PS","\u03A9":"W","\u03AA":"I","\u03AB":"Y","\u03AC":"a","\u03AD":"e","\u03AE":"h","\u03AF":"i","\u03B0":"y","\u03B1":"a","\u03B2":"b","\u03B3":"g","\u03B4":"d","\u03B5":"e","\u03B6":"z","\u03B7":"h","\u03B8":"8","\u03B9":"i","\u03BA":"k","\u03BB":"l","\u03BC":"m","\u03BD":"n","\u03BE":"3","\u03BF":"o","\u03C0":"p","\u03C1":"r","\u03C2":"s","\u03C3":"s","\u03C4":"t","\u03C5":"y","\u03C6":"f","\u03C7":"x","\u03C8":"ps","\u03C9":"w","\u03CA":"i","\u03CB":"y","\u03CC":"o","\u03CD":"y","\u03CE":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040A":"NJ","\u040B":"C","\u040F":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041A":"K","\u041B":"L","\u041C":"M","\u041D":"N","\u041E":"O","\u041F":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042A":"U","\u042B":"Y","\u042C":"","\u042D":"E","\u042E":"Yu","\u042F":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043A":"k","\u043B":"l","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044A":"u","\u044B":"y","\u044C":"","\u044D":"e","\u044E":"yu","\u044F":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045A":"nj","\u045B":"c","\u045D":"u","\u045F":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049A":"KH","\u049B":"kh","\u04A2":"NG","\u04A3":"ng","\u04AE":"UE","\u04AF":"ue","\u04B0":"U","\u04B1":"u","\u04BA":"H","\u04BB":"h","\u04D8":"AE","\u04D9":"ae","\u04E8":"OE","\u04E9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E'","\u0538":"Y'","\u0539":"T'","\u053A":"JH","\u053B":"I","\u053C":"L","\u053D":"X","\u053E":"C'","\u053F":"K","\u0540":"H","\u0541":"D'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054A":"P","\u054B":"J","\u054C":"R'","\u054D":"S","\u054E":"V","\u054F":"T","\u0550":"R","\u0551":"C","\u0553":"P'","\u0554":"Q'","\u0555":"O''","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062A":"t","\u062B":"th","\u062C":"j","\u062D":"h","\u062E":"kh","\u062F":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063A":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064A":"y","\u064B":"an","\u064C":"on","\u064D":"en","\u064E":"a","\u064F":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067E":"p","\u0686":"ch","\u0698":"zh","\u06A9":"k","\u06AF":"g","\u06CC":"y","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9","\u0E3F":"baht","\u10D0":"a","\u10D1":"b","\u10D2":"g","\u10D3":"d","\u10D4":"e","\u10D5":"v","\u10D6":"z","\u10D7":"t","\u10D8":"i","\u10D9":"k","\u10DA":"l","\u10DB":"m","\u10DC":"n","\u10DD":"o","\u10DE":"p","\u10DF":"zh","\u10E0":"r","\u10E1":"s","\u10E2":"t","\u10E3":"u","\u10E4":"f","\u10E5":"k","\u10E6":"gh","\u10E7":"q","\u10E8":"sh","\u10E9":"ch","\u10EA":"ts","\u10EB":"dz","\u10EC":"ts","\u10ED":"ch","\u10EE":"kh","\u10EF":"j","\u10F0":"h","\u1E62":"S","\u1E63":"s","\u1E80":"W","\u1E81":"w","\u1E82":"W","\u1E83":"w","\u1E84":"W","\u1E85":"w","\u1E9E":"SS","\u1EA0":"A","\u1EA1":"a","\u1EA2":"A","\u1EA3":"a","\u1EA4":"A","\u1EA5":"a","\u1EA6":"A","\u1EA7":"a","\u1EA8":"A","\u1EA9":"a","\u1EAA":"A","\u1EAB":"a","\u1EAC":"A","\u1EAD":"a","\u1EAE":"A","\u1EAF":"a","\u1EB0":"A","\u1EB1":"a","\u1EB2":"A","\u1EB3":"a","\u1EB4":"A","\u1EB5":"a","\u1EB6":"A","\u1EB7":"a","\u1EB8":"E","\u1EB9":"e","\u1EBA":"E","\u1EBB":"e","\u1EBC":"E","\u1EBD":"e","\u1EBE":"E","\u1EBF":"e","\u1EC0":"E","\u1EC1":"e","\u1EC2":"E","\u1EC3":"e","\u1EC4":"E","\u1EC5":"e","\u1EC6":"E","\u1EC7":"e","\u1EC8":"I","\u1EC9":"i","\u1ECA":"I","\u1ECB":"i","\u1ECC":"O","\u1ECD":"o","\u1ECE":"O","\u1ECF":"o","\u1ED0":"O","\u1ED1":"o","\u1ED2":"O","\u1ED3":"o","\u1ED4":"O","\u1ED5":"o","\u1ED6":"O","\u1ED7":"o","\u1ED8":"O","\u1ED9":"o","\u1EDA":"O","\u1EDB":"o","\u1EDC":"O","\u1EDD":"o","\u1EDE":"O","\u1EDF":"o","\u1EE0":"O","\u1EE1":"o","\u1EE2":"O","\u1EE3":"o","\u1EE4":"U","\u1EE5":"u","\u1EE6":"U","\u1EE7":"u","\u1EE8":"U","\u1EE9":"u","\u1EEA":"U","\u1EEB":"u","\u1EEC":"U","\u1EED":"u","\u1EEE":"U","\u1EEF":"u","\u1EF0":"U","\u1EF1":"u","\u1EF2":"Y","\u1EF3":"y","\u1EF4":"Y","\u1EF5":"y","\u1EF6":"Y","\u1EF7":"y","\u1EF8":"Y","\u1EF9":"y","\u2013":"-","\u2018":"'","\u2019":"'","\u201C":"\\"","\u201D":"\\"","\u201E":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20A0":"ecu","\u20A2":"cruzeiro","\u20A3":"french franc","\u20A4":"lira","\u20A5":"mill","\u20A6":"naira","\u20A7":"peseta","\u20A8":"rupee","\u20A9":"won","\u20AA":"new shequel","\u20AB":"dong","\u20AC":"euro","\u20AD":"kip","\u20AE":"tugrik","\u20AF":"drachma","\u20B0":"penny","\u20B1":"peso","\u20B2":"guarani","\u20B3":"austral","\u20B4":"hryvnia","\u20B5":"cedi","\u20B8":"kazakhstani tenge","\u20B9":"indian rupee","\u20BA":"turkish lira","\u20BD":"russian ruble","\u20BF":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221E":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\uFDFC":"rial","\uFEF5":"laa","\uFEF7":"laa","\uFEF9":"lai","\uFEFB":"la"}`),e=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042A":"A","\u042C":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044A":"a","\u044C":"y"},"de":{"\xC4":"AE","\xE4":"ae","\xD6":"OE","\xF6":"oe","\xDC":"UE","\xFC":"ue","\xDF":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221E":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xA2":"centavos","\xA3":"libras","\xA4":"moneda","\u20A3":"francos","\u2211":"suma","\u221E":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xA2":"centime","\xA3":"livre","\xA4":"devise","\u20A3":"franc","\u2211":"somme","\u221E":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xA2":"centavo","\u2211":"soma","\xA3":"libra","\u221E":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xD8":"OE","\xF8":"oe","\xC5":"AA","\xE5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xF8rre end"},"nb":{"&":"og","\xC5":"AA","\xC6":"AE","\xD8":"OE","\xE5":"aa","\xE6":"ae","\xF8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xC5":"AA","\xC4":"AE","\xD6":"OE","\xE5":"aa","\xE4":"ae","\xF6":"oe"}}');function t(r,s){if(typeof r!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var o=e[s.locale]||{},i=s.replacement===void 0?"-":s.replacement,c=s.trim===void 0?!0:s.trim,l=r.normalize().split("").reduce(function(m,g){var w=o[g];return w===void 0&&(w=n[g]),w===void 0&&(w=g),w===i&&(w=" "),m+w.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(l=l.replace(/[^A-Za-z0-9\s]/g,"")),c&&(l=l.trim()),l=l.replace(/\s+/g,i),s.lower&&(l=l.toLowerCase()),l}return t.extend=function(r){Object.assign(n,r)},t})});var Kn=F((Yn,Rr)=>{(function(n){if(typeof Yn=="object"&&typeof Rr<"u")Rr.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=n()}})(function(){var n,e,t;return function r(s,o,i){function c(g,w){if(!o[g]){if(!s[g]){var y=typeof require=="function"&&require;if(!w&&y)return y(g,!0);if(l)return l(g,!0);var A=new Error("Cannot find module '"+g+"'");throw A.code="MODULE_NOT_FOUND",A}var R=o[g]={exports:{}};s[g][0].call(R.exports,function(O){var U=s[g][1][O];return c(U||O)},R,R.exports,r,s,o,i)}return o[g].exports}for(var l=typeof require=="function"&&require,m=0;m<i.length;m++)c(i[m]);return c}({1:[function(r,s,o){(function(i){"use strict";var c=i.MutationObserver||i.WebKitMutationObserver,l;if(c){var m=0,g=new c(O),w=i.document.createTextNode("");g.observe(w,{characterData:!0}),l=function(){w.data=m=++m%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var y=new i.MessageChannel;y.port1.onmessage=O,l=function(){y.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?l=function(){var M=i.document.createElement("script");M.onreadystatechange=function(){O(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},i.document.documentElement.appendChild(M)}:l=function(){setTimeout(O,0)};var A,R=[];function O(){A=!0;for(var M,W,G=R.length;G;){for(W=R,R=[],M=-1;++M<G;)W[M]();G=R.length}A=!1}s.exports=U;function U(M){R.push(M)===1&&!A&&l()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,s,o){"use strict";var i=r(1);function c(){}var l={},m=["REJECTED"],g=["FULFILLED"],w=["PENDING"];s.exports=y;function y(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,E!==c&&U(this,E)}y.prototype.catch=function(E){return this.then(null,E)},y.prototype.then=function(E,q){if(typeof E!="function"&&this.state===g||typeof q!="function"&&this.state===m)return this;var T=new this.constructor(c);if(this.state!==w){var L=this.state===g?E:q;R(T,L,this.outcome)}else this.queue.push(new A(T,E,q));return T};function A(E,q,T){this.promise=E,typeof q=="function"&&(this.onFulfilled=q,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}A.prototype.callFulfilled=function(E){l.resolve(this.promise,E)},A.prototype.otherCallFulfilled=function(E){R(this.promise,this.onFulfilled,E)},A.prototype.callRejected=function(E){l.reject(this.promise,E)},A.prototype.otherCallRejected=function(E){R(this.promise,this.onRejected,E)};function R(E,q,T){i(function(){var L;try{L=q(T)}catch(ee){return l.reject(E,ee)}L===E?l.reject(E,new TypeError("Cannot resolve promise with itself")):l.resolve(E,L)})}l.resolve=function(E,q){var T=M(O,q);if(T.status==="error")return l.reject(E,T.value);var L=T.value;if(L)U(E,L);else{E.state=g,E.outcome=q;for(var ee=-1,ce=E.queue.length;++ee<ce;)E.queue[ee].callFulfilled(q)}return E},l.reject=function(E,q){E.state=m,E.outcome=q;for(var T=-1,L=E.queue.length;++T<L;)E.queue[T].callRejected(q);return E};function O(E){var q=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof q=="function")return function(){q.apply(E,arguments)}}function U(E,q){var T=!1;function L(I){T||(T=!0,l.reject(E,I))}function ee(I){T||(T=!0,l.resolve(E,I))}function ce(){q(ee,L)}var D=M(ce);D.status==="error"&&L(D.value)}function M(E,q){var T={};try{T.value=E(q),T.status="success"}catch(L){T.status="error",T.value=L}return T}y.resolve=W;function W(E){return E instanceof this?E:l.resolve(new this(c),E)}y.reject=G;function G(E){var q=new this(c);return l.reject(q,E)}y.all=ue;function ue(E){var q=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,L=!1;if(!T)return this.resolve([]);for(var ee=new Array(T),ce=0,D=-1,I=new this(c);++D<T;)S(E[D],D);return I;function S(k,C){q.resolve(k).then(j,function($){L||(L=!0,l.reject(I,$))});function j($){ee[C]=$,++ce===T&&!L&&(L=!0,l.resolve(I,ee))}}}y.race=J;function J(E){var q=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,L=!1;if(!T)return this.resolve([]);for(var ee=-1,ce=new this(c);++ee<T;)D(E[ee]);return ce;function D(I){q.resolve(I).then(function(S){L||(L=!0,l.resolve(ce,S))},function(S){L||(L=!0,l.reject(ce,S))})}}},{1:1}],3:[function(r,s,o){(function(i){"use strict";typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,s,o){"use strict";var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function c(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var m=l();function g(){try{if(!m||!m.open)return!1;var a=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),f=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!a||f)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function w(a,f){a=a||[],f=f||{};try{return new Blob(a,f)}catch(d){if(d.name!=="TypeError")throw d;for(var u=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,p=new u,h=0;h<a.length;h+=1)p.append(a[h]);return p.getBlob(f.type)}}typeof Promise>"u"&&r(3);var y=Promise;function A(a,f){f&&a.then(function(u){f(null,u)},function(u){f(u)})}function R(a,f,u){typeof f=="function"&&a.then(f),typeof u=="function"&&a.catch(u)}function O(a){return typeof a!="string"&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function U(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var M="local-forage-detect-blob-support",W=void 0,G={},ue=Object.prototype.toString,J="readonly",E="readwrite";function q(a){for(var f=a.length,u=new ArrayBuffer(f),p=new Uint8Array(u),h=0;h<f;h++)p[h]=a.charCodeAt(h);return u}function T(a){return new y(function(f){var u=a.transaction(M,E),p=w([""]);u.objectStore(M).put(p,"key"),u.onabort=function(h){h.preventDefault(),h.stopPropagation(),f(!1)},u.oncomplete=function(){var h=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);f(d||!h||parseInt(h[1],10)>=43)}}).catch(function(){return!1})}function L(a){return typeof W=="boolean"?y.resolve(W):T(a).then(function(f){return W=f,W})}function ee(a){var f=G[a.name],u={};u.promise=new y(function(p,h){u.resolve=p,u.reject=h}),f.deferredOperations.push(u),f.dbReady?f.dbReady=f.dbReady.then(function(){return u.promise}):f.dbReady=u.promise}function ce(a){var f=G[a.name],u=f.deferredOperations.pop();if(u)return u.resolve(),u.promise}function D(a,f){var u=G[a.name],p=u.deferredOperations.pop();if(p)return p.reject(f),p.promise}function I(a,f){return new y(function(u,p){if(G[a.name]=G[a.name]||de(),a.db)if(f)ee(a),a.db.close();else return u(a.db);var h=[a.name];f&&h.push(a.version);var d=m.open.apply(m,h);f&&(d.onupgradeneeded=function(v){var b=d.result;try{b.createObjectStore(a.storeName),v.oldVersion<=1&&b.createObjectStore(M)}catch(_){if(_.name==="ConstraintError")console.warn('The database "'+a.name+'" has been upgraded from version '+v.oldVersion+" to version "+v.newVersion+', but the storage "'+a.storeName+'" already exists.');else throw _}}),d.onerror=function(v){v.preventDefault(),p(d.error)},d.onsuccess=function(){var v=d.result;v.onversionchange=function(b){b.target.close()},u(v),ce(a)}})}function S(a){return I(a,!1)}function k(a){return I(a,!0)}function C(a,f){if(!a.db)return!0;var u=!a.db.objectStoreNames.contains(a.storeName),p=a.version<a.db.version,h=a.version>a.db.version;if(p&&(a.version!==f&&console.warn('The database "'+a.name+`" can't be downgraded from version `+a.db.version+" to version "+a.version+"."),a.version=a.db.version),h||u){if(u){var d=a.db.version+1;d>a.version&&(a.version=d)}return!0}return!1}function j(a){return new y(function(f,u){var p=new FileReader;p.onerror=u,p.onloadend=function(h){var d=btoa(h.target.result||"");f({__local_forage_encoded_blob:!0,data:d,type:a.type})},p.readAsBinaryString(a)})}function $(a){var f=q(atob(a.data));return w([f],{type:a.type})}function K(a){return a&&a.__local_forage_encoded_blob}function Z(a){var f=this,u=f._initReady().then(function(){var p=G[f._dbInfo.name];if(p&&p.dbReady)return p.dbReady});return R(u,a,a),u}function oe(a){ee(a);for(var f=G[a.name],u=f.forages,p=0;p<u.length;p++){var h=u[p];h._dbInfo.db&&(h._dbInfo.db.close(),h._dbInfo.db=null)}return a.db=null,S(a).then(function(d){return a.db=d,C(a)?k(a):d}).then(function(d){a.db=f.db=d;for(var v=0;v<u.length;v++)u[v]._dbInfo.db=d}).catch(function(d){throw D(a,d),d})}function X(a,f,u,p){p===void 0&&(p=1);try{var h=a.db.transaction(a.storeName,f);u(null,h)}catch(d){if(p>0&&(!a.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return y.resolve().then(function(){if(!a.db||d.name==="NotFoundError"&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),k(a)}).then(function(){return oe(a).then(function(){X(a,f,u,p-1)})}).catch(u);u(d)}}function de(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Te(a){var f=this,u={db:null};if(a)for(var p in a)u[p]=a[p];var h=G[u.name];h||(h=de(),G[u.name]=h),h.forages.push(f),f._initReady||(f._initReady=f.ready,f.ready=Z);var d=[];function v(){return y.resolve()}for(var b=0;b<h.forages.length;b++){var _=h.forages[b];_!==f&&d.push(_._initReady().catch(v))}var x=h.forages.slice(0);return y.all(d).then(function(){return u.db=h.db,S(u)}).then(function(P){return u.db=P,C(u,f._defaultConfig.version)?k(u):P}).then(function(P){u.db=h.db=P,f._dbInfo=u;for(var N=0;N<x.length;N++){var z=x[N];z!==f&&(z._dbInfo.db=u.db,z._dbInfo.version=u.version)}})}function Ee(a,f){var u=this;a=O(a);var p=new y(function(h,d){u.ready().then(function(){X(u._dbInfo,J,function(v,b){if(v)return d(v);try{var _=b.objectStore(u._dbInfo.storeName),x=_.get(a);x.onsuccess=function(){var P=x.result;P===void 0&&(P=null),K(P)&&(P=$(P)),h(P)},x.onerror=function(){d(x.error)}}catch(P){d(P)}})}).catch(d)});return A(p,f),p}function Ue(a,f){var u=this,p=new y(function(h,d){u.ready().then(function(){X(u._dbInfo,J,function(v,b){if(v)return d(v);try{var _=b.objectStore(u._dbInfo.storeName),x=_.openCursor(),P=1;x.onsuccess=function(){var N=x.result;if(N){var z=N.value;K(z)&&(z=$(z));var H=a(z,N.key,P++);H!==void 0?h(H):N.continue()}else h()},x.onerror=function(){d(x.error)}}catch(N){d(N)}})}).catch(d)});return A(p,f),p}function Ae(a,f,u){var p=this;a=O(a);var h=new y(function(d,v){var b;p.ready().then(function(){return b=p._dbInfo,ue.call(f)==="[object Blob]"?L(b.db).then(function(_){return _?f:j(f)}):f}).then(function(_){X(p._dbInfo,E,function(x,P){if(x)return v(x);try{var N=P.objectStore(p._dbInfo.storeName);_===null&&(_=void 0);var z=N.put(_,a);P.oncomplete=function(){_===void 0&&(_=null),d(_)},P.onabort=P.onerror=function(){var H=z.error?z.error:z.transaction.error;v(H)}}catch(H){v(H)}})}).catch(v)});return A(h,u),h}function le(a,f){var u=this;a=O(a);var p=new y(function(h,d){u.ready().then(function(){X(u._dbInfo,E,function(v,b){if(v)return d(v);try{var _=b.objectStore(u._dbInfo.storeName),x=_.delete(a);b.oncomplete=function(){h()},b.onerror=function(){d(x.error)},b.onabort=function(){var P=x.error?x.error:x.transaction.error;d(P)}}catch(P){d(P)}})}).catch(d)});return A(p,f),p}function ge(a){var f=this,u=new y(function(p,h){f.ready().then(function(){X(f._dbInfo,E,function(d,v){if(d)return h(d);try{var b=v.objectStore(f._dbInfo.storeName),_=b.clear();v.oncomplete=function(){p()},v.onabort=v.onerror=function(){var x=_.error?_.error:_.transaction.error;h(x)}}catch(x){h(x)}})}).catch(h)});return A(u,a),u}function je(a){var f=this,u=new y(function(p,h){f.ready().then(function(){X(f._dbInfo,J,function(d,v){if(d)return h(d);try{var b=v.objectStore(f._dbInfo.storeName),_=b.count();_.onsuccess=function(){p(_.result)},_.onerror=function(){h(_.error)}}catch(x){h(x)}})}).catch(h)});return A(u,a),u}function Ke(a,f){var u=this,p=new y(function(h,d){if(a<0){h(null);return}u.ready().then(function(){X(u._dbInfo,J,function(v,b){if(v)return d(v);try{var _=b.objectStore(u._dbInfo.storeName),x=!1,P=_.openKeyCursor();P.onsuccess=function(){var N=P.result;if(!N){h(null);return}a===0||x?h(N.key):(x=!0,N.advance(a))},P.onerror=function(){d(P.error)}}catch(N){d(N)}})}).catch(d)});return A(p,f),p}function di(a){var f=this,u=new y(function(p,h){f.ready().then(function(){X(f._dbInfo,J,function(d,v){if(d)return h(d);try{var b=v.objectStore(f._dbInfo.storeName),_=b.openKeyCursor(),x=[];_.onsuccess=function(){var P=_.result;if(!P){p(x);return}x.push(P.key),P.continue()},_.onerror=function(){h(_.error)}}catch(P){h(P)}})}).catch(h)});return A(u,a),u}function pi(a,f){f=U.apply(this,arguments);var u=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||u.name,a.storeName=a.storeName||u.storeName);var p=this,h;if(!a.name)h=y.reject("Invalid arguments");else{var d=a.name===u.name&&p._dbInfo.db,v=d?y.resolve(p._dbInfo.db):S(a).then(function(b){var _=G[a.name],x=_.forages;_.db=b;for(var P=0;P<x.length;P++)x[P]._dbInfo.db=b;return b});a.storeName?h=v.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var _=b.version+1;ee(a);var x=G[a.name],P=x.forages;b.close();for(var N=0;N<P.length;N++){var z=P[N];z._dbInfo.db=null,z._dbInfo.version=_}var H=new y(function(V,ie){var ne=m.open(a.name,_);ne.onerror=function(he){var dt=ne.result;dt.close(),ie(he)},ne.onupgradeneeded=function(){var he=ne.result;he.deleteObjectStore(a.storeName)},ne.onsuccess=function(){var he=ne.result;he.close(),V(he)}});return H.then(function(V){x.db=V;for(var ie=0;ie<P.length;ie++){var ne=P[ie];ne._dbInfo.db=V,ce(ne._dbInfo)}}).catch(function(V){throw(D(a,V)||y.resolve()).catch(function(){}),V})}}):h=v.then(function(b){ee(a);var _=G[a.name],x=_.forages;b.close();for(var P=0;P<x.length;P++){var N=x[P];N._dbInfo.db=null}var z=new y(function(H,V){var ie=m.deleteDatabase(a.name);ie.onerror=function(){var ne=ie.result;ne&&ne.close(),V(ie.error)},ie.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},ie.onsuccess=function(){var ne=ie.result;ne&&ne.close(),H(ne)}});return z.then(function(H){_.db=H;for(var V=0;V<x.length;V++){var ie=x[V];ce(ie._dbInfo)}}).catch(function(H){throw(D(a,H)||y.resolve()).catch(function(){}),H})})}return A(h,f),h}var hi={_driver:"asyncStorage",_initStorage:Te,_support:g(),iterate:Ue,getItem:Ee,setItem:Ae,removeItem:le,clear:ge,length:je,key:Ke,keys:di,dropInstance:pi};function mi(){return typeof openDatabase=="function"}var Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yi="~~local_forage_type~",gn=/^~~local_forage_type~([^~]+)~/,Ut="__lfsc__:",hr=Ut.length,mr="arbf",yr="blob",vn="si08",wn="ui08",bn="uic8",_n="si16",xn="si32",En="ur16",An="ui32",Pn="fl32",Sn="fl64",In=hr+mr.length,Cn=Object.prototype.toString;function Tn(a){var f=a.length*.75,u=a.length,p,h=0,d,v,b,_;a[a.length-1]==="="&&(f--,a[a.length-2]==="="&&f--);var x=new ArrayBuffer(f),P=new Uint8Array(x);for(p=0;p<u;p+=4)d=Oe.indexOf(a[p]),v=Oe.indexOf(a[p+1]),b=Oe.indexOf(a[p+2]),_=Oe.indexOf(a[p+3]),P[h++]=d<<2|v>>4,P[h++]=(v&15)<<4|b>>2,P[h++]=(b&3)<<6|_&63;return x}function gr(a){var f=new Uint8Array(a),u="",p;for(p=0;p<f.length;p+=3)u+=Oe[f[p]>>2],u+=Oe[(f[p]&3)<<4|f[p+1]>>4],u+=Oe[(f[p+1]&15)<<2|f[p+2]>>6],u+=Oe[f[p+2]&63];return f.length%3===2?u=u.substring(0,u.length-1)+"=":f.length%3===1&&(u=u.substring(0,u.length-2)+"=="),u}function gi(a,f){var u="";if(a&&(u=Cn.call(a)),a&&(u==="[object ArrayBuffer]"||a.buffer&&Cn.call(a.buffer)==="[object ArrayBuffer]")){var p,h=Ut;a instanceof ArrayBuffer?(p=a,h+=mr):(p=a.buffer,u==="[object Int8Array]"?h+=vn:u==="[object Uint8Array]"?h+=wn:u==="[object Uint8ClampedArray]"?h+=bn:u==="[object Int16Array]"?h+=_n:u==="[object Uint16Array]"?h+=En:u==="[object Int32Array]"?h+=xn:u==="[object Uint32Array]"?h+=An:u==="[object Float32Array]"?h+=Pn:u==="[object Float64Array]"?h+=Sn:f(new Error("Failed to get type for BinaryArray"))),f(h+gr(p))}else if(u==="[object Blob]"){var d=new FileReader;d.onload=function(){var v=yi+a.type+"~"+gr(this.result);f(Ut+yr+v)},d.readAsArrayBuffer(a)}else try{f(JSON.stringify(a))}catch(v){console.error("Couldn't convert value into a JSON string: ",a),f(null,v)}}function vi(a){if(a.substring(0,hr)!==Ut)return JSON.parse(a);var f=a.substring(In),u=a.substring(hr,In),p;if(u===yr&&gn.test(f)){var h=f.match(gn);p=h[1],f=f.substring(h[0].length)}var d=Tn(f);switch(u){case mr:return d;case yr:return w([d],{type:p});case vn:return new Int8Array(d);case wn:return new Uint8Array(d);case bn:return new Uint8ClampedArray(d);case _n:return new Int16Array(d);case En:return new Uint16Array(d);case xn:return new Int32Array(d);case An:return new Uint32Array(d);case Pn:return new Float32Array(d);case Sn:return new Float64Array(d);default:throw new Error("Unkown type: "+u)}}var vr={serialize:gi,deserialize:vi,stringToBuffer:Tn,bufferToString:gr};function On(a,f,u,p){a.executeSql("CREATE TABLE IF NOT EXISTS "+f.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],u,p)}function wi(a){var f=this,u={db:null};if(a)for(var p in a)u[p]=typeof a[p]!="string"?a[p].toString():a[p];var h=new y(function(d,v){try{u.db=openDatabase(u.name,String(u.version),u.description,u.size)}catch(b){return v(b)}u.db.transaction(function(b){On(b,u,function(){f._dbInfo=u,d()},function(_,x){v(x)})},v)});return u.serializer=vr,h}function Re(a,f,u,p,h,d){a.executeSql(u,p,h,function(v,b){b.code===b.SYNTAX_ERR?v.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[f.storeName],function(_,x){x.rows.length?d(_,b):On(_,f,function(){_.executeSql(u,p,h,d)},d)},d):d(v,b)},d)}function bi(a,f){var u=this;a=O(a);var p=new y(function(h,d){u.ready().then(function(){var v=u._dbInfo;v.db.transaction(function(b){Re(b,v,"SELECT * FROM "+v.storeName+" WHERE key = ? LIMIT 1",[a],function(_,x){var P=x.rows.length?x.rows.item(0).value:null;P&&(P=v.serializer.deserialize(P)),h(P)},function(_,x){d(x)})})}).catch(d)});return A(p,f),p}function _i(a,f){var u=this,p=new y(function(h,d){u.ready().then(function(){var v=u._dbInfo;v.db.transaction(function(b){Re(b,v,"SELECT * FROM "+v.storeName,[],function(_,x){for(var P=x.rows,N=P.length,z=0;z<N;z++){var H=P.item(z),V=H.value;if(V&&(V=v.serializer.deserialize(V)),V=a(V,H.key,z+1),V!==void 0){h(V);return}}h()},function(_,x){d(x)})})}).catch(d)});return A(p,f),p}function Rn(a,f,u,p){var h=this;a=O(a);var d=new y(function(v,b){h.ready().then(function(){f===void 0&&(f=null);var _=f,x=h._dbInfo;x.serializer.serialize(f,function(P,N){N?b(N):x.db.transaction(function(z){Re(z,x,"INSERT OR REPLACE INTO "+x.storeName+" (key, value) VALUES (?, ?)",[a,P],function(){v(_)},function(H,V){b(V)})},function(z){if(z.code===z.QUOTA_ERR){if(p>0){v(Rn.apply(h,[a,_,u,p-1]));return}b(z)}})})}).catch(b)});return A(d,u),d}function xi(a,f,u){return Rn.apply(this,[a,f,u,1])}function Ei(a,f){var u=this;a=O(a);var p=new y(function(h,d){u.ready().then(function(){var v=u._dbInfo;v.db.transaction(function(b){Re(b,v,"DELETE FROM "+v.storeName+" WHERE key = ?",[a],function(){h()},function(_,x){d(x)})})}).catch(d)});return A(p,f),p}function Ai(a){var f=this,u=new y(function(p,h){f.ready().then(function(){var d=f._dbInfo;d.db.transaction(function(v){Re(v,d,"DELETE FROM "+d.storeName,[],function(){p()},function(b,_){h(_)})})}).catch(h)});return A(u,a),u}function Pi(a){var f=this,u=new y(function(p,h){f.ready().then(function(){var d=f._dbInfo;d.db.transaction(function(v){Re(v,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,_){var x=_.rows.item(0).c;p(x)},function(b,_){h(_)})})}).catch(h)});return A(u,a),u}function Si(a,f){var u=this,p=new y(function(h,d){u.ready().then(function(){var v=u._dbInfo;v.db.transaction(function(b){Re(b,v,"SELECT key FROM "+v.storeName+" WHERE id = ? LIMIT 1",[a+1],function(_,x){var P=x.rows.length?x.rows.item(0).key:null;h(P)},function(_,x){d(x)})})}).catch(d)});return A(p,f),p}function Ii(a){var f=this,u=new y(function(p,h){f.ready().then(function(){var d=f._dbInfo;d.db.transaction(function(v){Re(v,d,"SELECT key FROM "+d.storeName,[],function(b,_){for(var x=[],P=0;P<_.rows.length;P++)x.push(_.rows.item(P).key);p(x)},function(b,_){h(_)})})}).catch(h)});return A(u,a),u}function Ci(a){return new y(function(f,u){a.transaction(function(p){p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(h,d){for(var v=[],b=0;b<d.rows.length;b++)v.push(d.rows.item(b).name);f({db:a,storeNames:v})},function(h,d){u(d)})},function(p){u(p)})})}function Ti(a,f){f=U.apply(this,arguments);var u=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||u.name,a.storeName=a.storeName||u.storeName);var p=this,h;return a.name?h=new y(function(d){var v;a.name===u.name?v=p._dbInfo.db:v=openDatabase(a.name,"","",0),a.storeName?d({db:v,storeNames:[a.storeName]}):d(Ci(v))}).then(function(d){return new y(function(v,b){d.db.transaction(function(_){function x(H){return new y(function(V,ie){_.executeSql("DROP TABLE IF EXISTS "+H,[],function(){V()},function(ne,he){ie(he)})})}for(var P=[],N=0,z=d.storeNames.length;N<z;N++)P.push(x(d.storeNames[N]));y.all(P).then(function(){v()}).catch(function(H){b(H)})},function(_){b(_)})})}):h=y.reject("Invalid arguments"),A(h,f),h}var Oi={_driver:"webSQLStorage",_initStorage:wi,_support:mi(),iterate:_i,getItem:bi,setItem:xi,removeItem:Ei,clear:Ai,length:Pi,key:Si,keys:Ii,dropInstance:Ti};function Ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Nn(a,f){var u=a.name+"/";return a.storeName!==f.storeName&&(u+=a.storeName+"/"),u}function Ni(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch{return!0}}function ki(){return!Ni()||localStorage.length>0}function Di(a){var f=this,u={};if(a)for(var p in a)u[p]=a[p];return u.keyPrefix=Nn(a,f._defaultConfig),ki()?(f._dbInfo=u,u.serializer=vr,y.resolve()):y.reject()}function Mi(a){var f=this,u=f.ready().then(function(){for(var p=f._dbInfo.keyPrefix,h=localStorage.length-1;h>=0;h--){var d=localStorage.key(h);d.indexOf(p)===0&&localStorage.removeItem(d)}});return A(u,a),u}function Li(a,f){var u=this;a=O(a);var p=u.ready().then(function(){var h=u._dbInfo,d=localStorage.getItem(h.keyPrefix+a);return d&&(d=h.serializer.deserialize(d)),d});return A(p,f),p}function $i(a,f){var u=this,p=u.ready().then(function(){for(var h=u._dbInfo,d=h.keyPrefix,v=d.length,b=localStorage.length,_=1,x=0;x<b;x++){var P=localStorage.key(x);if(P.indexOf(d)===0){var N=localStorage.getItem(P);if(N&&(N=h.serializer.deserialize(N)),N=a(N,P.substring(v),_++),N!==void 0)return N}}});return A(p,f),p}function Bi(a,f){var u=this,p=u.ready().then(function(){var h=u._dbInfo,d;try{d=localStorage.key(a)}catch{d=null}return d&&(d=d.substring(h.keyPrefix.length)),d});return A(p,f),p}function Ui(a){var f=this,u=f.ready().then(function(){for(var p=f._dbInfo,h=localStorage.length,d=[],v=0;v<h;v++){var b=localStorage.key(v);b.indexOf(p.keyPrefix)===0&&d.push(b.substring(p.keyPrefix.length))}return d});return A(u,a),u}function ji(a){var f=this,u=f.keys().then(function(p){return p.length});return A(u,a),u}function qi(a,f){var u=this;a=O(a);var p=u.ready().then(function(){var h=u._dbInfo;localStorage.removeItem(h.keyPrefix+a)});return A(p,f),p}function zi(a,f,u){var p=this;a=O(a);var h=p.ready().then(function(){f===void 0&&(f=null);var d=f;return new y(function(v,b){var _=p._dbInfo;_.serializer.serialize(f,function(x,P){if(P)b(P);else try{localStorage.setItem(_.keyPrefix+a,x),v(d)}catch(N){(N.name==="QuotaExceededError"||N.name==="NS_ERROR_DOM_QUOTA_REACHED")&&b(N),b(N)}})})});return A(h,u),h}function Fi(a,f){if(f=U.apply(this,arguments),a=typeof a!="function"&&a||{},!a.name){var u=this.config();a.name=a.name||u.name,a.storeName=a.storeName||u.storeName}var p=this,h;return a.name?h=new y(function(d){a.storeName?d(Nn(a,p._defaultConfig)):d(a.name+"/")}).then(function(d){for(var v=localStorage.length-1;v>=0;v--){var b=localStorage.key(v);b.indexOf(d)===0&&localStorage.removeItem(b)}}):h=y.reject("Invalid arguments"),A(h,f),h}var Gi={_driver:"localStorageWrapper",_initStorage:Di,_support:Ri(),iterate:$i,getItem:Li,setItem:zi,removeItem:qi,clear:Mi,length:ji,key:Bi,keys:Ui,dropInstance:Fi},Wi=function(f,u){return f===u||typeof f=="number"&&typeof u=="number"&&isNaN(f)&&isNaN(u)},Hi=function(f,u){for(var p=f.length,h=0;h<p;){if(Wi(f[h],u))return!0;h++}return!1},kn=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},ft={},Dn={},Ve={INDEXEDDB:hi,WEBSQL:Oi,LOCALSTORAGE:Gi},Yi=[Ve.INDEXEDDB._driver,Ve.WEBSQL._driver,Ve.LOCALSTORAGE._driver],jt=["dropInstance"],wr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(jt),Ki={description:"",driver:Yi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vi(a,f){a[f]=function(){var u=arguments;return a.ready().then(function(){return a[f].apply(a,u)})}}function br(){for(var a=1;a<arguments.length;a++){var f=arguments[a];if(f)for(var u in f)f.hasOwnProperty(u)&&(kn(f[u])?arguments[0][u]=f[u].slice():arguments[0][u]=f[u])}return arguments[0]}var Ji=function(){function a(f){c(this,a);for(var u in Ve)if(Ve.hasOwnProperty(u)){var p=Ve[u],h=p._driver;this[u]=h,ft[h]||this.defineDriver(p)}this._defaultConfig=br({},Ki),this._config=br({},this._defaultConfig,f),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(u){if((typeof u>"u"?"undefined":i(u))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var p in u){if(p==="storeName"&&(u[p]=u[p].replace(/\W/g,"_")),p==="version"&&typeof u[p]!="number")return new Error("Database version must be a number.");this._config[p]=u[p]}return"driver"in u&&u.driver?this.setDriver(this._config.driver):!0}else return typeof u=="string"?this._config[u]:this._config},a.prototype.defineDriver=function(u,p,h){var d=new y(function(v,b){try{var _=u._driver,x=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver){b(x);return}for(var P=wr.concat("_initStorage"),N=0,z=P.length;N<z;N++){var H=P[N],V=!Hi(jt,H);if((V||u[H])&&typeof u[H]!="function"){b(x);return}}var ie=function(){for(var dt=function(Zi){return function(){var ea=new Error("Method "+Zi+" is not implemented by the current driver"),Mn=y.reject(ea);return A(Mn,arguments[arguments.length-1]),Mn}},_r=0,Qi=jt.length;_r<Qi;_r++){var xr=jt[_r];u[xr]||(u[xr]=dt(xr))}};ie();var ne=function(dt){ft[_]&&console.info("Redefining LocalForage driver: "+_),ft[_]=u,Dn[_]=dt,v()};"_support"in u?u._support&&typeof u._support=="function"?u._support().then(ne,b):ne(!!u._support):ne(!0)}catch(he){b(he)}});return R(d,p,h),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(u,p,h){var d=ft[u]?y.resolve(ft[u]):y.reject(new Error("Driver not found."));return R(d,p,h),d},a.prototype.getSerializer=function(u){var p=y.resolve(vr);return R(p,u),p},a.prototype.ready=function(u){var p=this,h=p._driverSet.then(function(){return p._ready===null&&(p._ready=p._initDriver()),p._ready});return R(h,u,u),h},a.prototype.setDriver=function(u,p,h){var d=this;kn(u)||(u=[u]);var v=this._getSupportedDrivers(u);function b(){d._config.driver=d.driver()}function _(N){return d._extend(N),b(),d._ready=d._initStorage(d._config),d._ready}function x(N){return function(){var z=0;function H(){for(;z<N.length;){var V=N[z];return z++,d._dbInfo=null,d._ready=null,d.getDriver(V).then(_).catch(H)}b();var ie=new Error("No available storage method found.");return d._driverSet=y.reject(ie),d._driverSet}return H()}}var P=this._driverSet!==null?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=P.then(function(){var N=v[0];return d._dbInfo=null,d._ready=null,d.getDriver(N).then(function(z){d._driver=z._driver,b(),d._wrapLibraryMethodsWithReady(),d._initDriver=x(v)})}).catch(function(){b();var N=new Error("No available storage method found.");return d._driverSet=y.reject(N),d._driverSet}),R(this._driverSet,p,h),this._driverSet},a.prototype.supports=function(u){return!!Dn[u]},a.prototype._extend=function(u){br(this,u)},a.prototype._getSupportedDrivers=function(u){for(var p=[],h=0,d=u.length;h<d;h++){var v=u[h];this.supports(v)&&p.push(v)}return p},a.prototype._wrapLibraryMethodsWithReady=function(){for(var u=0,p=wr.length;u<p;u++)Vi(this,wr[u])},a.prototype.createInstance=function(u){return new a(u)},a}(),Xi=new Ji;s.exports=Xi},{3:3}]},{},[4])(4)})});var Jn=F((Nr,kr)=>{(function(n,e){typeof Nr=="object"&&typeof kr<"u"?kr.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(Nr,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",s="second",o="minute",i="hour",c="day",l="week",m="month",g="quarter",w="year",y="date",A="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,U={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var I=["th","st","nd","rd"],S=D%100;return"["+D+(I[(S-20)%10]||I[S]||I[0])+"]"}},M=function(D,I,S){var k=String(D);return!k||k.length>=I?D:""+Array(I+1-k.length).join(S)+D},W={s:M,z:function(D){var I=-D.utcOffset(),S=Math.abs(I),k=Math.floor(S/60),C=S%60;return(I<=0?"+":"-")+M(k,2,"0")+":"+M(C,2,"0")},m:function D(I,S){if(I.date()<S.date())return-D(S,I);var k=12*(S.year()-I.year())+(S.month()-I.month()),C=I.clone().add(k,m),j=S-C<0,$=I.clone().add(k+(j?-1:1),m);return+(-(k+(S-C)/(j?C-$:$-C))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:m,y:w,w:l,d:c,D:y,h:i,m:o,s,ms:r,Q:g}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},G="en",ue={};ue[G]=U;var J="$isDayjsObject",E=function(D){return D instanceof ee||!(!D||!D[J])},q=function D(I,S,k){var C;if(!I)return G;if(typeof I=="string"){var j=I.toLowerCase();ue[j]&&(C=j),S&&(ue[j]=S,C=j);var $=I.split("-");if(!C&&$.length>1)return D($[0])}else{var K=I.name;ue[K]=I,C=K}return!k&&C&&(G=C),C||!k&&G},T=function(D,I){if(E(D))return D.clone();var S=typeof I=="object"?I:{};return S.date=D,S.args=arguments,new ee(S)},L=W;L.l=q,L.i=E,L.w=function(D,I){return T(D,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var ee=function(){function D(S){this.$L=q(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[J]=!0}var I=D.prototype;return I.parse=function(S){this.$d=function(k){var C=k.date,j=k.utc;if(C===null)return new Date(NaN);if(L.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var $=C.match(R);if($){var K=$[2]-1||0,Z=($[7]||"0").substring(0,3);return j?new Date(Date.UTC($[1],K,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Z)):new Date($[1],K,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Z)}}return new Date(C)}(S),this.init()},I.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},I.$utils=function(){return L},I.isValid=function(){return this.$d.toString()!==A},I.isSame=function(S,k){var C=T(S);return this.startOf(k)<=C&&C<=this.endOf(k)},I.isAfter=function(S,k){return T(S)<this.startOf(k)},I.isBefore=function(S,k){return this.endOf(k)<T(S)},I.$g=function(S,k,C){return L.u(S)?this[k]:this.set(C,S)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(S,k){var C=this,j=!!L.u(k)||k,$=L.p(S),K=function(Ae,le){var ge=L.w(C.$u?Date.UTC(C.$y,le,Ae):new Date(C.$y,le,Ae),C);return j?ge:ge.endOf(c)},Z=function(Ae,le){return L.w(C.toDate()[Ae].apply(C.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(le)),C)},oe=this.$W,X=this.$M,de=this.$D,Te="set"+(this.$u?"UTC":"");switch($){case w:return j?K(1,0):K(31,11);case m:return j?K(1,X):K(0,X+1);case l:var Ee=this.$locale().weekStart||0,Ue=(oe<Ee?oe+7:oe)-Ee;return K(j?de-Ue:de+(6-Ue),X);case c:case y:return Z(Te+"Hours",0);case i:return Z(Te+"Minutes",1);case o:return Z(Te+"Seconds",2);case s:return Z(Te+"Milliseconds",3);default:return this.clone()}},I.endOf=function(S){return this.startOf(S,!1)},I.$set=function(S,k){var C,j=L.p(S),$="set"+(this.$u?"UTC":""),K=(C={},C[c]=$+"Date",C[y]=$+"Date",C[m]=$+"Month",C[w]=$+"FullYear",C[i]=$+"Hours",C[o]=$+"Minutes",C[s]=$+"Seconds",C[r]=$+"Milliseconds",C)[j],Z=j===c?this.$D+(k-this.$W):k;if(j===m||j===w){var oe=this.clone().set(y,1);oe.$d[K](Z),oe.init(),this.$d=oe.set(y,Math.min(this.$D,oe.daysInMonth())).$d}else K&&this.$d[K](Z);return this.init(),this},I.set=function(S,k){return this.clone().$set(S,k)},I.get=function(S){return this[L.p(S)]()},I.add=function(S,k){var C,j=this;S=Number(S);var $=L.p(k),K=function(X){var de=T(j);return L.w(de.date(de.date()+Math.round(X*S)),j)};if($===m)return this.set(m,this.$M+S);if($===w)return this.set(w,this.$y+S);if($===c)return K(1);if($===l)return K(7);var Z=(C={},C[o]=e,C[i]=t,C[s]=n,C)[$]||1,oe=this.$d.getTime()+S*Z;return L.w(oe,this)},I.subtract=function(S,k){return this.add(-1*S,k)},I.format=function(S){var k=this,C=this.$locale();if(!this.isValid())return C.invalidDate||A;var j=S||"YYYY-MM-DDTHH:mm:ssZ",$=L.z(this),K=this.$H,Z=this.$m,oe=this.$M,X=C.weekdays,de=C.months,Te=C.meridiem,Ee=function(le,ge,je,Ke){return le&&(le[ge]||le(k,j))||je[ge].slice(0,Ke)},Ue=function(le){return L.s(K%12||12,le,"0")},Ae=Te||function(le,ge,je){var Ke=le<12?"AM":"PM";return je?Ke.toLowerCase():Ke};return j.replace(O,function(le,ge){return ge||function(je){switch(je){case"YY":return String(k.$y).slice(-2);case"YYYY":return L.s(k.$y,4,"0");case"M":return oe+1;case"MM":return L.s(oe+1,2,"0");case"MMM":return Ee(C.monthsShort,oe,de,3);case"MMMM":return Ee(de,oe);case"D":return k.$D;case"DD":return L.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return Ee(C.weekdaysMin,k.$W,X,2);case"ddd":return Ee(C.weekdaysShort,k.$W,X,3);case"dddd":return X[k.$W];case"H":return String(K);case"HH":return L.s(K,2,"0");case"h":return Ue(1);case"hh":return Ue(2);case"a":return Ae(K,Z,!0);case"A":return Ae(K,Z,!1);case"m":return String(Z);case"mm":return L.s(Z,2,"0");case"s":return String(k.$s);case"ss":return L.s(k.$s,2,"0");case"SSS":return L.s(k.$ms,3,"0");case"Z":return $}return null}(le)||$.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(S,k,C){var j,$=this,K=L.p(k),Z=T(S),oe=(Z.utcOffset()-this.utcOffset())*e,X=this-Z,de=function(){return L.m($,Z)};switch(K){case w:j=de()/12;break;case m:j=de();break;case g:j=de()/3;break;case l:j=(X-oe)/6048e5;break;case c:j=(X-oe)/864e5;break;case i:j=X/t;break;case o:j=X/e;break;case s:j=X/n;break;default:j=X}return C?j:L.a(j)},I.daysInMonth=function(){return this.endOf(m).$D},I.$locale=function(){return ue[this.$L]},I.locale=function(S,k){if(!S)return this.$L;var C=this.clone(),j=q(S,k,!0);return j&&(C.$L=j),C},I.clone=function(){return L.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},D}(),ce=ee.prototype;return T.prototype=ce,[["$ms",r],["$s",s],["$m",o],["$H",i],["$W",c],["$M",m],["$y",w],["$D",y]].forEach(function(D){ce[D[1]]=function(I){return this.$g(I,D[0],D[1])}}),T.extend=function(D,I){return D.$i||(D(I,ee,T),D.$i=!0),T},T.locale=q,T.isDayjs=E,T.unix=function(D){return T(1e3*D)},T.en=ue[G],T.Ls=ue,T.p={},T})});var ms=F((bl,Br)=>{"use strict";var ps=n=>typeof n=="object"&&n!==null,hs=Symbol("skip"),ds=n=>ps(n)&&!(n instanceof RegExp)&&!(n instanceof Error)&&!(n instanceof Date),$r=(n,e,t,r=new WeakMap)=>{if(t={deep:!1,target:{},...t},r.has(n))return r.get(n);r.set(n,t.target);let{target:s}=t;delete t.target;let o=i=>i.map(c=>ds(c)?$r(c,e,t,r):c);if(Array.isArray(n))return o(n);for(let[i,c]of Object.entries(n)){let l=e(i,c,n);if(l===hs)continue;let[m,g,{shouldRecurse:w=!0}={}]=l;m!=="__proto__"&&(t.deep&&w&&ds(g)&&(g=Array.isArray(g)?o(g):$r(g,e,t,r)),s[m]=g)}return s};Br.exports=(n,e,t)=>{if(!ps(n))throw new TypeError(`Expected an object, got \`${n}\` (${typeof n})`);return $r(n,e,t)};Br.exports.mapObjectSkip=hs});var qr={};Ln(qr,{__addDisposableResource:()=>Ls,__assign:()=>Wt,__asyncDelegator:()=>Cs,__asyncGenerator:()=>Is,__asyncValues:()=>Ts,__await:()=>rt,__awaiter:()=>_s,__classPrivateFieldGet:()=>ks,__classPrivateFieldIn:()=>Ms,__classPrivateFieldSet:()=>Ds,__createBinding:()=>Yt,__decorate:()=>vs,__disposeResources:()=>$s,__esDecorate:()=>Xa,__exportStar:()=>Es,__extends:()=>ys,__generator:()=>xs,__importDefault:()=>Ns,__importStar:()=>Rs,__makeTemplateObject:()=>Os,__metadata:()=>bs,__param:()=>ws,__propKey:()=>Za,__read:()=>jr,__rest:()=>gs,__runInitializers:()=>Qa,__setFunctionName:()=>eu,__spread:()=>As,__spreadArray:()=>Ss,__spreadArrays:()=>Ps,__values:()=>Ht,default:()=>nu});function ys(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ur(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function gs(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function vs(n,e,t,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(i=n[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o}function ws(n,e){return function(t,r){e(t,r,n)}}function Xa(n,e,t,r,s,o){function i(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var c=r.kind,l=c==="getter"?"get":c==="setter"?"set":"value",m=!e&&n?r.static?n:n.prototype:null,g=e||(m?Object.getOwnPropertyDescriptor(m,r.name):{}),w,y=!1,A=t.length-1;A>=0;A--){var R={};for(var O in r)R[O]=O==="access"?{}:r[O];for(var O in r.access)R.access[O]=r.access[O];R.addInitializer=function(M){if(y)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(M||null))};var U=(0,t[A])(c==="accessor"?{get:g.get,set:g.set}:g[l],R);if(c==="accessor"){if(U===void 0)continue;if(U===null||typeof U!="object")throw new TypeError("Object expected");(w=i(U.get))&&(g.get=w),(w=i(U.set))&&(g.set=w),(w=i(U.init))&&s.unshift(w)}else(w=i(U))&&(c==="field"?s.unshift(w):g[l]=w)}m&&Object.defineProperty(m,r.name,g),y=!0}function Qa(n,e,t){for(var r=arguments.length>2,s=0;s<e.length;s++)t=r?e[s].call(n,t):e[s].call(n);return r?t:void 0}function Za(n){return typeof n=="symbol"?n:"".concat(n)}function eu(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function bs(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function _s(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function c(g){try{m(r.next(g))}catch(w){i(w)}}function l(g){try{m(r.throw(g))}catch(w){i(w)}}function m(g){g.done?o(g.value):s(g.value).then(c,l)}m((r=r.apply(n,e||[])).next())})}function xs(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(m){return function(g){return l([m,g])}}function l(m){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,m[0]&&(t=0)),t;)try{if(r=1,s&&(o=m[0]&2?s.return:m[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,m[1])).done)return o;switch(s=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,s=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){t.label=m[1];break}if(m[0]===6&&t.label<o[1]){t.label=o[1],o=m;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(m);break}o[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(n,t)}catch(g){m=[6,g],s=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Es(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Yt(e,n,t)}function Ht(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jr(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(c){i={error:c}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o}function As(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(jr(arguments[e]));return n}function Ps(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var o=arguments[e],i=0,c=o.length;i<c;i++,s++)r[s]=o[i];return r}function Ss(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function rt(n){return this instanceof rt?(this.v=n,this):new rt(n)}function Is(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(y){r[y]&&(s[y]=function(A){return new Promise(function(R,O){o.push([y,A,R,O])>1||c(y,A)})})}function c(y,A){try{l(r[y](A))}catch(R){w(o[0][3],R)}}function l(y){y.value instanceof rt?Promise.resolve(y.value.v).then(m,g):w(o[0][2],y)}function m(y){c("next",y)}function g(y){c("throw",y)}function w(y,A){y(A),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Cs(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=n[s]?function(i){return(t=!t)?{value:rt(n[s](i)),done:!1}:o?o(i):i}:o}}function Ts(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ht=="function"?Ht(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(i){return new Promise(function(c,l){i=n[o](i),s(c,l,i.done,i.value)})}}function s(o,i,c,l){Promise.resolve(l).then(function(m){o({value:m,done:c})},i)}}function Os(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Rs(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Yt(e,n,t);return tu(e,n),e}function Ns(n){return n&&n.__esModule?n:{default:n}}function ks(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Ds(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}function Ms(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function Ls(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}function $s(n){function e(r){n.error=n.hasError?new ru(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}function t(){for(;n.stack.length;){var r=n.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(t,function(o){return e(o),t()})}catch(o){e(o)}}if(n.hasError)throw n.error}return t()}var Ur,Wt,Yt,tu,ru,nu,zr=ia(()=>{Ur=function(n,e){return Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},Ur(n,e)};Wt=function(){return Wt=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wt.apply(this,arguments)};Yt=Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};tu=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e};ru=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};nu={__extends:ys,__assign:Wt,__rest:gs,__decorate:vs,__param:ws,__metadata:bs,__awaiter:_s,__generator:xs,__createBinding:Yt,__exportStar:Es,__values:Ht,__read:jr,__spread:As,__spreadArrays:Ps,__spreadArray:Ss,__await:rt,__asyncGenerator:Is,__asyncDelegator:Cs,__asyncValues:Ts,__makeTemplateObject:Os,__importStar:Rs,__importDefault:Ns,__classPrivateFieldGet:ks,__classPrivateFieldSet:Ds,__classPrivateFieldIn:Ms,__addDisposableResource:Ls,__disposeResources:$s}});var Bs=F(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.lowerCase=nt.localeLowerCase=void 0;var su={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{\u0130:"i",I:"\u0131",I\u0307:"i"}},az:{regexp:/\u0130/g,map:{\u0130:"i",I:"\u0131",I\u0307:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i\u0307",J:"j\u0307",\u012E:"\u012F\u0307",\u00CC:"i\u0307\u0300",\u00CD:"i\u0307\u0301",\u0128:"i\u0307\u0303"}}};function ou(n,e){var t=su[e.toLowerCase()];return Fr(t?n.replace(t.regexp,function(r){return t.map[r]}):n)}nt.localeLowerCase=ou;function Fr(n){return n.toLowerCase()}nt.lowerCase=Fr});var js=F(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.noCase=void 0;var iu=Bs(),au=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],uu=/[^A-Z0-9]+/gi;function cu(n,e){e===void 0&&(e={});for(var t=e.splitRegexp,r=t===void 0?au:t,s=e.stripRegexp,o=s===void 0?uu:s,i=e.transform,c=i===void 0?iu.lowerCase:i,l=e.delimiter,m=l===void 0?" ":l,g=Us(Us(n,r,"$1\0$2"),o,"\0"),w=0,y=g.length;g.charAt(w)==="\0";)w++;for(;g.charAt(y-1)==="\0";)y--;return g.slice(w,y).split("\0").map(c).join(m)}Kt.noCase=cu;function Us(n,e,t){return e instanceof RegExp?n.replace(e,t):e.reduce(function(r,s){return r.replace(s,t)},n)}});var qs=F(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.dotCase=void 0;var lu=(zr(),Er(qr)),fu=js();function du(n,e){return e===void 0&&(e={}),fu.noCase(n,lu.__assign({delimiter:"."},e))}Vt.dotCase=du});var zs=F(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.snakeCase=void 0;var pu=(zr(),Er(qr)),hu=qs();function mu(n,e){return e===void 0&&(e={}),hu.dotCase(n,pu.__assign({delimiter:"_"},e))}Jt.snakeCase=mu});var Gs=F((Pl,Fs)=>{"use strict";var yu=ms(),{snakeCase:gu}=zs();Fs.exports=function(n,e){return e=Object.assign({deep:!0,exclude:[],parsingOptions:{}},e),yu(n,function(t,r){return[vu(e.exclude,t)?t:gu(t,e.parsingOptions),r,wu(t,r,e)]},e)};function vu(n,e){return n.some(function(t){return typeof t=="string"?t===e:t.test(e)})}function wu(n,e,t){return t.shouldRecurse?{shouldRecurse:t.shouldRecurse(n,e)}:void 0}});var ro=F((gf,to)=>{to.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Me=F(Ge=>{var Hr,bu=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ge.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ge.getSymbolTotalCodewords=function(e){return bu[e]};Ge.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Ge.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Hr=e};Ge.isKanjiModeEnabled=function(){return typeof Hr<"u"};Ge.toSJIS=function(e){return Hr(e)}});var Zt=F(ye=>{ye.L={bit:1};ye.M={bit:0};ye.Q={bit:3};ye.H={bit:2};function _u(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return ye.L;case"m":case"medium":return ye.M;case"q":case"quartile":return ye.Q;case"h":case"high":return ye.H;default:throw new Error("Unknown EC Level: "+n)}}ye.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};ye.from=function(e,t){if(ye.isValid(e))return e;try{return _u(e)}catch{return t}}});var oo=F((bf,so)=>{function no(){this.buffer=[],this.length=0}no.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};so.exports=no});var ao=F((_f,io)=>{function Rt(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Rt.prototype.set=function(n,e,t,r){let s=n*this.size+e;this.data[s]=t,r&&(this.reservedBit[s]=!0)};Rt.prototype.get=function(n,e){return this.data[n*this.size+e]};Rt.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Rt.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};io.exports=Rt});var uo=F(er=>{var xu=Me().getSymbolSize;er.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=xu(e),s=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let i=1;i<t-1;i++)o[i]=o[i-1]-s;return o.push(6),o.reverse()};er.getPositions=function(e){let t=[],r=er.getRowColCoords(e),s=r.length;for(let o=0;o<s;o++)for(let i=0;i<s;i++)o===0&&i===0||o===0&&i===s-1||o===s-1&&i===0||t.push([r[o],r[i]]);return t}});var fo=F(lo=>{var Eu=Me().getSymbolSize,co=7;lo.getPositions=function(e){let t=Eu(e);return[[0,0],[t-co,0],[0,t-co]]}});var po=F(Q=>{Q.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var We={N1:3,N2:3,N3:40,N4:10};Q.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};Q.from=function(e){return Q.isValid(e)?parseInt(e,10):void 0};Q.getPenaltyN1=function(e){let t=e.size,r=0,s=0,o=0,i=null,c=null;for(let l=0;l<t;l++){s=o=0,i=c=null;for(let m=0;m<t;m++){let g=e.get(l,m);g===i?s++:(s>=5&&(r+=We.N1+(s-5)),i=g,s=1),g=e.get(m,l),g===c?o++:(o>=5&&(r+=We.N1+(o-5)),c=g,o=1)}s>=5&&(r+=We.N1+(s-5)),o>=5&&(r+=We.N1+(o-5))}return r};Q.getPenaltyN2=function(e){let t=e.size,r=0;for(let s=0;s<t-1;s++)for(let o=0;o<t-1;o++){let i=e.get(s,o)+e.get(s,o+1)+e.get(s+1,o)+e.get(s+1,o+1);(i===4||i===0)&&r++}return r*We.N2};Q.getPenaltyN3=function(e){let t=e.size,r=0,s=0,o=0;for(let i=0;i<t;i++){s=o=0;for(let c=0;c<t;c++)s=s<<1&2047|e.get(i,c),c>=10&&(s===1488||s===93)&&r++,o=o<<1&2047|e.get(c,i),c>=10&&(o===1488||o===93)&&r++}return r*We.N3};Q.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*We.N4};function Au(n,e,t){switch(n){case Q.Patterns.PATTERN000:return(e+t)%2===0;case Q.Patterns.PATTERN001:return e%2===0;case Q.Patterns.PATTERN010:return t%3===0;case Q.Patterns.PATTERN011:return(e+t)%3===0;case Q.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case Q.Patterns.PATTERN101:return e*t%2+e*t%3===0;case Q.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case Q.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}Q.applyMask=function(e,t){let r=t.size;for(let s=0;s<r;s++)for(let o=0;o<r;o++)t.isReserved(o,s)||t.xor(o,s,Au(e,o,s))};Q.getBestMask=function(e,t){let r=Object.keys(Q.Patterns).length,s=0,o=1/0;for(let i=0;i<r;i++){t(i),Q.applyMask(i,e);let c=Q.getPenaltyN1(e)+Q.getPenaltyN2(e)+Q.getPenaltyN3(e)+Q.getPenaltyN4(e);Q.applyMask(i,e),c<o&&(o=c,s=i)}return s}});var Kr=F(Yr=>{var Le=Zt(),tr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Yr.getBlocksCount=function(e,t){switch(t){case Le.L:return tr[(e-1)*4+0];case Le.M:return tr[(e-1)*4+1];case Le.Q:return tr[(e-1)*4+2];case Le.H:return tr[(e-1)*4+3];default:return}};Yr.getTotalCodewordsCount=function(e,t){switch(t){case Le.L:return rr[(e-1)*4+0];case Le.M:return rr[(e-1)*4+1];case Le.Q:return rr[(e-1)*4+2];case Le.H:return rr[(e-1)*4+3];default:return}}});var ho=F(sr=>{var Nt=new Uint8Array(512),nr=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Nt[t]=e,nr[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Nt[t]=Nt[t-255]})();sr.log=function(e){if(e<1)throw new Error("log("+e+")");return nr[e]};sr.exp=function(e){return Nt[e]};sr.mul=function(e,t){return e===0||t===0?0:Nt[nr[e]+nr[t]]}});var mo=F(kt=>{var Vr=ho();kt.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let o=0;o<t.length;o++)r[s+o]^=Vr.mul(e[s],t[o]);return r};kt.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let s=r[0];for(let i=0;i<t.length;i++)r[i]^=Vr.mul(t[i],s);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};kt.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=kt.mul(t,new Uint8Array([1,Vr.exp(r)]));return t}});var vo=F((Cf,go)=>{var yo=mo();function Jr(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Jr.prototype.initialize=function(e){this.degree=e,this.genPoly=yo.generateECPolynomial(this.degree)};Jr.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=yo.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){let o=new Uint8Array(this.degree);return o.set(r,s),o}return r};go.exports=Jr});var Xr=F(wo=>{wo.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var Qr=F(Ie=>{var bo="[0-9]+",Pu="[A-Z $%*+\\-./:]+",Dt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Dt=Dt.replace(/u/g,"\\u");var Su="(?:(?![A-Z0-9 $%*+\\-./:]|"+Dt+`)(?:.|[\r
]))+`;Ie.KANJI=new RegExp(Dt,"g");Ie.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ie.BYTE=new RegExp(Su,"g");Ie.NUMERIC=new RegExp(bo,"g");Ie.ALPHANUMERIC=new RegExp(Pu,"g");var Iu=new RegExp("^"+Dt+"$"),Cu=new RegExp("^"+bo+"$"),Tu=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ie.testKanji=function(e){return Iu.test(e)};Ie.testNumeric=function(e){return Cu.test(e)};Ie.testAlphanumeric=function(e){return Tu.test(e)}});var $e=F(ae=>{var Ou=Xr(),Zr=Qr();ae.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};ae.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};ae.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};ae.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};ae.MIXED={bit:-1};ae.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!Ou.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};ae.getBestModeForData=function(e){return Zr.testNumeric(e)?ae.NUMERIC:Zr.testAlphanumeric(e)?ae.ALPHANUMERIC:Zr.testKanji(e)?ae.KANJI:ae.BYTE};ae.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};ae.isValid=function(e){return e&&e.bit&&e.ccBits};function Ru(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return ae.NUMERIC;case"alphanumeric":return ae.ALPHANUMERIC;case"kanji":return ae.KANJI;case"byte":return ae.BYTE;default:throw new Error("Unknown mode: "+n)}}ae.from=function(e,t){if(ae.isValid(e))return e;try{return Ru(e)}catch{return t}}});var Po=F(He=>{var or=Me(),Nu=Kr(),_o=Zt(),Be=$e(),en=Xr(),Eo=7973,xo=or.getBCHDigit(Eo);function ku(n,e,t){for(let r=1;r<=40;r++)if(e<=He.getCapacity(r,t,n))return r}function Ao(n,e){return Be.getCharCountIndicator(n,e)+4}function Du(n,e){let t=0;return n.forEach(function(r){let s=Ao(r.mode,e);t+=s+r.getBitsLength()}),t}function Mu(n,e){for(let t=1;t<=40;t++)if(Du(n,t)<=He.getCapacity(t,e,Be.MIXED))return t}He.from=function(e,t){return en.isValid(e)?parseInt(e,10):t};He.getCapacity=function(e,t,r){if(!en.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Be.BYTE);let s=or.getSymbolTotalCodewords(e),o=Nu.getTotalCodewordsCount(e,t),i=(s-o)*8;if(r===Be.MIXED)return i;let c=i-Ao(r,e);switch(r){case Be.NUMERIC:return Math.floor(c/10*3);case Be.ALPHANUMERIC:return Math.floor(c/11*2);case Be.KANJI:return Math.floor(c/13);case Be.BYTE:default:return Math.floor(c/8)}};He.getBestVersionForData=function(e,t){let r,s=_o.from(t,_o.M);if(Array.isArray(e)){if(e.length>1)return Mu(e,s);if(e.length===0)return 1;r=e[0]}else r=e;return ku(r.mode,r.getLength(),s)};He.getEncodedBits=function(e){if(!en.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;or.getBCHDigit(t)-xo>=0;)t^=Eo<<or.getBCHDigit(t)-xo;return e<<12|t}});var To=F(Co=>{var tn=Me(),Io=1335,Lu=21522,So=tn.getBCHDigit(Io);Co.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;tn.getBCHDigit(s)-So>=0;)s^=Io<<tn.getBCHDigit(s)-So;return(r<<10|s)^Lu}});var Ro=F((Df,Oo)=>{var $u=$e();function it(n){this.mode=$u.NUMERIC,this.data=n.toString()}it.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};it.prototype.getLength=function(){return this.data.length};it.prototype.getBitsLength=function(){return it.getBitsLength(this.data.length)};it.prototype.write=function(e){let t,r,s;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),s=parseInt(r,10),e.put(s,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),s=parseInt(r,10),e.put(s,o*3+1))};Oo.exports=it});var ko=F((Mf,No)=>{var Bu=$e(),rn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function at(n){this.mode=Bu.ALPHANUMERIC,this.data=n}at.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};at.prototype.getLength=function(){return this.data.length};at.prototype.getBitsLength=function(){return at.getBitsLength(this.data.length)};at.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=rn.indexOf(this.data[t])*45;r+=rn.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(rn.indexOf(this.data[t]),6)};No.exports=at});var Mo=F((Lf,Do)=>{"use strict";Do.exports=function(e){for(var t=[],r=e.length,s=0;s<r;s++){var o=e.charCodeAt(s);if(o>=55296&&o<=56319&&r>s+1){var i=e.charCodeAt(s+1);i>=56320&&i<=57343&&(o=(o-55296)*1024+i-56320+65536,s+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var $o=F(($f,Lo)=>{var Uu=Mo(),ju=$e();function ut(n){this.mode=ju.BYTE,typeof n=="string"&&(n=Uu(n)),this.data=new Uint8Array(n)}ut.getBitsLength=function(e){return e*8};ut.prototype.getLength=function(){return this.data.length};ut.prototype.getBitsLength=function(){return ut.getBitsLength(this.data.length)};ut.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};Lo.exports=ut});var Uo=F((Bf,Bo)=>{var qu=$e(),zu=Me();function ct(n){this.mode=qu.KANJI,this.data=n}ct.getBitsLength=function(e){return e*13};ct.prototype.getLength=function(){return this.data.length};ct.prototype.getBitsLength=function(){return ct.getBitsLength(this.data.length)};ct.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=zu.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};Bo.exports=ct});var jo=F((Uf,nn)=>{"use strict";var Mt={single_source_shortest_paths:function(n,e,t){var r={},s={};s[e]=0;var o=Mt.PriorityQueue.make();o.push(e,0);for(var i,c,l,m,g,w,y,A,R;!o.empty();){i=o.pop(),c=i.value,m=i.cost,g=n[c]||{};for(l in g)g.hasOwnProperty(l)&&(w=g[l],y=m+w,A=s[l],R=typeof s[l]>"u",(R||A>y)&&(s[l]=y,o.push(l,y),r[l]=c))}if(typeof t<"u"&&typeof s[t]>"u"){var O=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(O)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,s;r;)t.push(r),s=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=Mt.single_source_shortest_paths(n,e,t);return Mt.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=Mt.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof nn<"u"&&(nn.exports=Mt)});var Ko=F(lt=>{var Y=$e(),Fo=Ro(),Go=ko(),Wo=$o(),Ho=Uo(),Lt=Qr(),ir=Me(),Fu=jo();function qo(n){return unescape(encodeURIComponent(n)).length}function $t(n,e,t){let r=[],s;for(;(s=n.exec(t))!==null;)r.push({data:s[0],index:s.index,mode:e,length:s[0].length});return r}function Yo(n){let e=$t(Lt.NUMERIC,Y.NUMERIC,n),t=$t(Lt.ALPHANUMERIC,Y.ALPHANUMERIC,n),r,s;return ir.isKanjiModeEnabled()?(r=$t(Lt.BYTE,Y.BYTE,n),s=$t(Lt.KANJI,Y.KANJI,n)):(r=$t(Lt.BYTE_KANJI,Y.BYTE,n),s=[]),e.concat(t,r,s).sort(function(i,c){return i.index-c.index}).map(function(i){return{data:i.data,mode:i.mode,length:i.length}})}function sn(n,e){switch(e){case Y.NUMERIC:return Fo.getBitsLength(n);case Y.ALPHANUMERIC:return Go.getBitsLength(n);case Y.KANJI:return Ho.getBitsLength(n);case Y.BYTE:return Wo.getBitsLength(n)}}function Gu(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Wu(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case Y.NUMERIC:e.push([r,{data:r.data,mode:Y.ALPHANUMERIC,length:r.length},{data:r.data,mode:Y.BYTE,length:r.length}]);break;case Y.ALPHANUMERIC:e.push([r,{data:r.data,mode:Y.BYTE,length:r.length}]);break;case Y.KANJI:e.push([r,{data:r.data,mode:Y.BYTE,length:qo(r.data)}]);break;case Y.BYTE:e.push([{data:r.data,mode:Y.BYTE,length:qo(r.data)}])}}return e}function Hu(n,e){let t={},r={start:{}},s=["start"];for(let o=0;o<n.length;o++){let i=n[o],c=[];for(let l=0;l<i.length;l++){let m=i[l],g=""+o+l;c.push(g),t[g]={node:m,lastCount:0},r[g]={};for(let w=0;w<s.length;w++){let y=s[w];t[y]&&t[y].node.mode===m.mode?(r[y][g]=sn(t[y].lastCount+m.length,m.mode)-sn(t[y].lastCount,m.mode),t[y].lastCount+=m.length):(t[y]&&(t[y].lastCount=m.length),r[y][g]=sn(m.length,m.mode)+4+Y.getCharCountIndicator(m.mode,e))}}s=c}for(let o=0;o<s.length;o++)r[s[o]].end=0;return{map:r,table:t}}function zo(n,e){let t,r=Y.getBestModeForData(n);if(t=Y.from(e,r),t!==Y.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+Y.toString(t)+`.
 Suggested mode is: `+Y.toString(r));switch(t===Y.KANJI&&!ir.isKanjiModeEnabled()&&(t=Y.BYTE),t){case Y.NUMERIC:return new Fo(n);case Y.ALPHANUMERIC:return new Go(n);case Y.KANJI:return new Ho(n);case Y.BYTE:return new Wo(n)}}lt.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(zo(r,null)):r.data&&t.push(zo(r.data,r.mode)),t},[])};lt.fromString=function(e,t){let r=Yo(e,ir.isKanjiModeEnabled()),s=Wu(r),o=Hu(s,t),i=Fu.find_path(o.map,"start","end"),c=[];for(let l=1;l<i.length-1;l++)c.push(o.table[i[l]].node);return lt.fromArray(Gu(c))};lt.rawSplit=function(e){return lt.fromArray(Yo(e,ir.isKanjiModeEnabled()))}});var Jo=F(Vo=>{var ur=Me(),on=Zt(),Yu=oo(),Ku=ao(),Vu=uo(),Ju=fo(),cn=po(),ln=Kr(),Xu=vo(),ar=Po(),Qu=To(),Zu=$e(),an=Ko();function ec(n,e){let t=n.size,r=Ju.getPositions(e);for(let s=0;s<r.length;s++){let o=r[s][0],i=r[s][1];for(let c=-1;c<=7;c++)if(!(o+c<=-1||t<=o+c))for(let l=-1;l<=7;l++)i+l<=-1||t<=i+l||(c>=0&&c<=6&&(l===0||l===6)||l>=0&&l<=6&&(c===0||c===6)||c>=2&&c<=4&&l>=2&&l<=4?n.set(o+c,i+l,!0,!0):n.set(o+c,i+l,!1,!0))}}function tc(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function rc(n,e){let t=Vu.getPositions(e);for(let r=0;r<t.length;r++){let s=t[r][0],o=t[r][1];for(let i=-2;i<=2;i++)for(let c=-2;c<=2;c++)i===-2||i===2||c===-2||c===2||i===0&&c===0?n.set(s+i,o+c,!0,!0):n.set(s+i,o+c,!1,!0)}}function nc(n,e){let t=n.size,r=ar.getEncodedBits(e),s,o,i;for(let c=0;c<18;c++)s=Math.floor(c/3),o=c%3+t-8-3,i=(r>>c&1)===1,n.set(s,o,i,!0),n.set(o,s,i,!0)}function un(n,e,t){let r=n.size,s=Qu.getEncodedBits(e,t),o,i;for(o=0;o<15;o++)i=(s>>o&1)===1,o<6?n.set(o,8,i,!0):o<8?n.set(o+1,8,i,!0):n.set(r-15+o,8,i,!0),o<8?n.set(8,r-o-1,i,!0):o<9?n.set(8,15-o-1+1,i,!0):n.set(8,15-o-1,i,!0);n.set(r-8,8,1,!0)}function sc(n,e){let t=n.size,r=-1,s=t-1,o=7,i=0;for(let c=t-1;c>0;c-=2)for(c===6&&c--;;){for(let l=0;l<2;l++)if(!n.isReserved(s,c-l)){let m=!1;i<e.length&&(m=(e[i]>>>o&1)===1),n.set(s,c-l,m),o--,o===-1&&(i++,o=7)}if(s+=r,s<0||t<=s){s-=r,r=-r;break}}}function oc(n,e,t){let r=new Yu;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),Zu.getCharCountIndicator(l.mode,n)),l.write(r)});let s=ur.getSymbolTotalCodewords(n),o=ln.getTotalCodewordsCount(n,e),i=(s-o)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let c=(i-r.getLengthInBits())/8;for(let l=0;l<c;l++)r.put(l%2?17:236,8);return ic(r,n,e)}function ic(n,e,t){let r=ur.getSymbolTotalCodewords(e),s=ln.getTotalCodewordsCount(e,t),o=r-s,i=ln.getBlocksCount(e,t),c=r%i,l=i-c,m=Math.floor(r/i),g=Math.floor(o/i),w=g+1,y=m-g,A=new Xu(y),R=0,O=new Array(i),U=new Array(i),M=0,W=new Uint8Array(n.buffer);for(let q=0;q<i;q++){let T=q<l?g:w;O[q]=W.slice(R,R+T),U[q]=A.encode(O[q]),R+=T,M=Math.max(M,T)}let G=new Uint8Array(r),ue=0,J,E;for(J=0;J<M;J++)for(E=0;E<i;E++)J<O[E].length&&(G[ue++]=O[E][J]);for(J=0;J<y;J++)for(E=0;E<i;E++)G[ue++]=U[E][J];return G}function ac(n,e,t,r){let s;if(Array.isArray(n))s=an.fromArray(n);else if(typeof n=="string"){let m=e;if(!m){let g=an.rawSplit(n);m=ar.getBestVersionForData(g,t)}s=an.fromString(n,m||40)}else throw new Error("Invalid data");let o=ar.getBestVersionForData(s,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let i=oc(e,t,s),c=ur.getSymbolSize(e),l=new Ku(c);return ec(l,e),tc(l),rc(l,e),un(l,t,0),e>=7&&nc(l,e),sc(l,i),isNaN(r)&&(r=cn.getBestMask(l,un.bind(null,l,t))),cn.applyMask(r,l),un(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:s}}Vo.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=on.M,s,o;return typeof t<"u"&&(r=on.from(t.errorCorrectionLevel,on.M),s=ar.from(t.version),o=cn.from(t.maskPattern),t.toSJISFunc&&ur.setToSJISFunction(t.toSJISFunc)),ac(e,s,r,o)}});var fn=F(Ye=>{function Xo(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}Ye.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:r,scale:r?4:s,margin:t,color:{dark:Xo(e.color.dark||"#000000ff"),light:Xo(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Ye.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};Ye.getImageWidth=function(e,t){let r=Ye.getScale(e,t);return Math.floor((e+t.margin*2)*r)};Ye.qrToImageData=function(e,t,r){let s=t.modules.size,o=t.modules.data,i=Ye.getScale(s,r),c=Math.floor((s+r.margin*2)*i),l=r.margin*i,m=[r.color.light,r.color.dark];for(let g=0;g<c;g++)for(let w=0;w<c;w++){let y=(g*c+w)*4,A=r.color.light;if(g>=l&&w>=l&&g<c-l&&w<c-l){let R=Math.floor((g-l)/i),O=Math.floor((w-l)/i);A=m[o[R*s+O]?1:0]}e[y++]=A.r,e[y++]=A.g,e[y++]=A.b,e[y]=A.a}}});var Qo=F(cr=>{var dn=fn();function uc(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function cc(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}cr.render=function(e,t,r){let s=r,o=t;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),t||(o=cc()),s=dn.getOptions(s);let i=dn.getImageWidth(e.modules.size,s),c=o.getContext("2d"),l=c.createImageData(i,i);return dn.qrToImageData(l.data,e,s),uc(c,o,i),c.putImageData(l,0,0),o};cr.renderToDataURL=function(e,t,r){let s=r;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),s||(s={});let o=cr.render(e,t,s),i=s.type||"image/png",c=s.rendererOpts||{};return o.toDataURL(i,c.quality)}});var ti=F(ei=>{var lc=fn();function Zo(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function pn(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function fc(n,e,t){let r="",s=0,o=!1,i=0;for(let c=0;c<n.length;c++){let l=Math.floor(c%e),m=Math.floor(c/e);!l&&!o&&(o=!0),n[c]?(i++,c>0&&l>0&&n[c-1]||(r+=o?pn("M",l+t,.5+m+t):pn("m",s,0),s=0,o=!1),l+1<e&&n[c+1]||(r+=pn("h",i),i=0)):s++}return r}ei.render=function(e,t,r){let s=lc.getOptions(t),o=e.modules.size,i=e.modules.data,c=o+s.margin*2,l=s.color.light.a?"<path "+Zo(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",m="<path "+Zo(s.color.dark,"stroke")+' d="'+fc(i,o,s.margin)+'"/>',g='viewBox="0 0 '+c+" "+c+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+l+m+`</svg>
`;return typeof r=="function"&&r(null,y),y}});var ni=F(Bt=>{var dc=ro(),hn=Jo(),ri=Qo(),pc=ti();function mn(n,e,t,r,s){let o=[].slice.call(arguments,1),i=o.length,c=typeof o[i-1]=="function";if(!c&&!dc())throw new Error("Callback required as last argument");if(c){if(i<2)throw new Error("Too few arguments provided");i===2?(s=t,t=e,e=r=void 0):i===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=t,t=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(t=e,e=r=void 0):i===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,m){try{let g=hn.create(t,r);l(n(g,e,r))}catch(g){m(g)}})}try{let l=hn.create(t,r);s(null,n(l,e,r))}catch(l){s(l)}}Bt.create=hn.create;Bt.toCanvas=mn.bind(null,ri.render);Bt.toDataURL=mn.bind(null,ri.renderToDataURL);Bt.toString=mn.bind(null,function(n,e,t){return pc.render(n,t)})});var yc={};Ln(yc,{default:()=>pr});module.exports=Er(yc);var Ce=require("obsidian");var{isArray:Bn}=Array;function Ar(n){let e=Bn(n)?Array(n.length):{};if(n&&n.getTime)return new Date(n.getTime());for(let t in n){let r=n[t];e[t]=typeof r=="object"&&r!==null?r.getTime?new Date(r.getTime()):Ar(r):r}return e}function Pr(n){if(n===null)return"Null";if(n===void 0)return"Undefined";if(Number.isNaN(n))return"NaN";let e=Object.prototype.toString.call(n).slice(8,-1);return e==="AsyncFunction"?"Promise":e}function ht(n,e){if(arguments.length===1)return r=>ht(n,r);let t=Ar(n);return Object.keys(e).forEach(r=>{Pr(e[r])==="Object"&&Pr(n[r])==="Object"?t[r]=ht(n[r],e[r]):t[r]=e[r]}),t}var yn=pt(Un());var Cr=class extends Error{issues;constructor(n){super(n[0].message),this.name="ValiError",this.issues=n}},Sc=Symbol("brand");function qe(n,e){return Array.isArray(n)?[void 0,n]:[n,e]}var zt;function Tr(n){return{lang:n?.lang??zt?.lang,message:n?.message,abortEarly:n?.abortEarly??zt?.abortEarly,abortPipeEarly:n?.abortPipeEarly??zt?.abortPipeEarly,skipPipe:n?.skipPipe??zt?.skipPipe}}var aa;function ua(n){return aa?.get(n)}var ca;function la(n){return ca?.get(n)}var fa;function da(n,e){return fa?.get(n)?.get(e)}function qn(n,e,t,r,s){let o=e.message??da(t,s.lang)??(n?la(s.lang):null)??r?.message??ua(s.lang)??s.message;return typeof o=="function"?o(s):o}function mt(n,e,t){return{typed:n,output:e,issues:t}}function Or(n){let e=typeof n;return e==="object"&&(e=n?Object.getPrototypeOf(n).constructor.name:"null"),e==="string"?`"${n}"`:e==="number"||e==="bigint"||e==="boolean"?`${n}`:e}function pa(n,e,t){let r=t.received??Or(t.input),s={reason:n.type,context:t.context.type,expected:t.context.expects,received:r,message:`Invalid ${t.label}: ${t.context.expects?`Expected ${t.context.expects} but r`:"R"}eceived ${r}`,input:t.input,requirement:t.context.requirement,path:t.path,lang:e?.lang,abortEarly:e?.abortEarly,abortPipeEarly:e?.abortPipeEarly,skipPipe:e?.skipPipe};return s.message=qn(!1,t.context,t.reference,e,s),s}function ze(n,e,t,r){if(n.pipe&&!t?.skipPipe)for(let s of n.pipe){let o=s._parse(e);if(o.issues){for(let i of o.issues){let c=pa(n,t,i);r?r.push(c):r=[c]}if(t?.abortEarly||t?.abortPipeEarly)break}else e=o.output}return mt(!0,e,r)}function ha(n,e,t){if(!n||typeof n=="object"&&!Array.isArray(n)){let[o,i]=qe(e,t);return[n,o,i]}let[r,s]=qe(n,e);return[void 0,r,s]}function Ne(n,e,t,r,s){let o=Or(t),i=s?.expected??n.expects,c={reason:s?.reason??"type",context:n.type,expected:i,received:o,message:`Invalid type: Expected ${i} but received ${o}`,input:t,path:s?.path,issues:s?.issues,lang:r?.lang,abortEarly:r?.abortEarly,abortPipeEarly:r?.abortPipeEarly,skipPipe:r?.skipPipe};return c.message=qn(!0,n,e,r,c),{typed:!1,output:t,issues:[c]}}function ma(n){return typeof n.default=="function"?n.default():n.default}function ve(n,e,t){let[r,s]=qe(e,t);return{type:"array",expects:"Array",async:!1,item:n,message:r,pipe:s,_parse(o,i){if(Array.isArray(o)){let c=!0,l,m=[];for(let g=0;g<o.length;g++){let w=o[g],y=this.item._parse(w,i);if(y.issues){let A={type:"array",origin:"value",input:o,key:g,value:w};for(let R of y.issues)R.path?R.path.unshift(A):R.path=[A],l?.push(R);if(l||(l=y.issues),i?.abortEarly){c=!1;break}}y.typed||(c=!1),m.push(y.output)}return c?ze(this,m,i,l):mt(!1,m,l)}return Ne(this,ve,o,i)}}}function yt(n,e){let[t,r]=qe(n,e);return{type:"boolean",expects:"boolean",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="boolean"?ze(this,s,o):Ne(this,yt,s,o)}}}function Je(n,e){let t=Object.values(n);return{type:"enum",expects:t.map(Or).join(" | "),async:!1,enum:n,message:e,_parse(r,s){return t.includes(r)?mt(!0,r):Ne(this,Je,r,s)}}}function Xe(n,e){let[t,r]=qe(n,e);return{type:"number",expects:"number",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="number"&&!isNaN(s)?ze(this,s,o):Ne(this,Xe,s,o)}}}function te(n,e,t,r){let[s,o,i]=ha(e,t,r),c;return{type:"object",expects:"Object",async:!1,entries:n,rest:s,message:o,pipe:i,_parse(l,m){if(l&&typeof l=="object"){c=c??Object.entries(this.entries);let g=!0,w,y={};for(let[A,R]of c){let O=l[A],U=R._parse(O,m);if(U.issues){let M={type:"object",origin:"value",input:l,key:A,value:O};for(let W of U.issues)W.path?W.path.unshift(M):W.path=[M],w?.push(W);if(w||(w=U.issues),m?.abortEarly){g=!1;break}}U.typed||(g=!1),(U.output!==void 0||A in l)&&(y[A]=U.output)}if(this.rest&&!(m?.abortEarly&&w)){for(let A in l)if(!(A in this.entries)){let R=l[A],O=this.rest._parse(R,m);if(O.issues){let U={type:"object",origin:"value",input:l,key:A,value:R};for(let M of O.issues)M.path?M.path.unshift(U):M.path=[U],w?.push(M);if(w||(w=O.issues),m?.abortEarly){g=!1;break}}O.typed||(g=!1),y[A]=O.output}}return g?ze(this,y,m,w):mt(!1,y,w)}return Ne(this,te,l,m)}}}function gt(n,e){return{type:"optional",expects:`${n.expects} | undefined`,async:!1,wrapped:n,default:e,_parse(t,r){if(t===void 0){let s=ma(this);if(s===void 0)return mt(!0,t);t=s}return this.wrapped._parse(t,r)}}}function B(n,e){let[t,r]=qe(n,e);return{type:"string",expects:"string",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="string"?ze(this,s,o):Ne(this,B,s,o)}}}function jn(n){let e;if(n)for(let t of n)if(e)for(let r of t.issues)e.push(r);else e=t.issues;return e}function Ft(n,e,t){let[r,s]=qe(e,t);return{type:"union",expects:[...new Set(n.map(o=>o.expects))].join(" | "),async:!1,options:n,message:r,pipe:s,_parse(o,i){let c,l,m;for(let g of this.options){let w=g._parse(o,i);if(w.typed)if(w.issues)m?m.push(w):m=[w];else{c=w;break}else l?l.push(w):l=[w]}if(c)return ze(this,c.output,i);if(m?.length){let g=m[0];return ze(this,g.output,i,m.length===1?g.issues:Ne(this,Ft,o,i,{reason:"union",issues:jn(m)}).issues)}return l?.length===1?l[0]:Ne(this,Ft,o,i,{issues:jn(l)})}}}async function zn(n,e,t){let r=await n._parse(e,Tr(t));if(r.issues)throw new Cr(r.issues);return r.output}function Fn(n,e,t){let r=n._parse(e,Tr(t));return{typed:r.typed,success:!r.issues,data:r.output,output:r.output,error:r.issues&&new Cr(r.issues),issues:r.issues}}async function we(n,e,t){let r=await n._parse(e,Tr(t));return{typed:r.typed,success:!r.issues,data:r.output,output:r.output,error:r.issues&&new Cr(r.issues),issues:r.issues}}var ya=["gpt-4","gpt-4-32k","gpt-4-vision","gpt-35-turbo","gpt-35-turbo-16k"],ga=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-3.5-turbo-16k","gpt-4","gpt-4-0613","gpt-4-32k","gpt-4-32k-0613","gpt-4-turbo-preview","gpt-4-vision-preview","gpt-4-1106-preview","gpt-4-0125-preview"],va=["claude-2.0","claude-2.1","claude-instant-1.1","claude-instant-1.2"],wa=["command","command-nightly","command-light","command-light-nightly"],ba=["sonar-small-chat","sonar-medium-chat","sonar-small-online","sonar-medium-online","llama-2-70b-chat","codellama-34b-instruct","codellama-70b-instruct","mistral-7b-instruct","mixtral-8x7b-instruct","pplx-7b-chat","pplx-7b-online","pplx-70b-chat","pplx-70b-online"],Qe=[{id:"openai/gpt-3.5-turbo",name:"OpenAI: GPT-3.5 Turbo"},{id:"openai/gpt-4",name:"OpenAI: GPT-4"},{id:"google/gemini-pro",name:"Google: Gemini Pro (preview)"},{id:"anthropic/claude-2",name:"Anthropic: Claude v2"},{id:"anthropic/claude-instant-1",name:"Anthropic: Claude Instant v1"}],_a=["gemini-pro","gemini-pro-vision"],Pe=(l=>(l.OpenAI="OpenAI",l.AzureOpenAI="Azure OpenAI",l.GoogleGemini="Google Gemini",l.Anthropic="Anthropic",l.Cohere="Cohere",l.OpenRouter="OpenRouter",l.PerplexityAI="Perplexity",l.Custom="Custom (OpenAI Compatible)",l))(Pe||{}),vt=(l=>(l.ImproveWriting="Improve Writing",l.FixGrammar="Fix Grammar",l.SimplifyText="Simplify Text",l.MakeShorter="Make Shorter",l.MakeLonger="Make Longer",l.Paraphrase="Paraphrase",l.HighlightMainPoint="Highlight Main Point",l.CustomInstructions="Custom Instructions",l))(vt||{}),wt=(t=>(t[t.DirectReplacement=0]="DirectReplacement",t[t.CustomInstructions=1]="CustomInstructions",t))(wt||{}),se={OpenAI:"https://api.openai.com","Azure OpenAI":"","Google Gemini":"https://generativelanguage.googleapis.com",Anthropic:"https://api.anthropic.com",Cohere:"https://api.cohere.ai",OpenRouter:"https://openrouter.ai",Perplexity:"https://api.perplexity.ai","Custom (OpenAI Compatible)":""},bt={dataSchemeDate:new Date("2024-02-22").toISOString(),aiProvider:"OpenAI",aiProviderConfig:{OpenAI:{apiKey:"",baseUrl:se.OpenAI,model:"gpt-3.5-turbo"},"Azure OpenAI":{apiKey:"",baseUrl:"",model:"gpt-35-turbo",apiVersion:"2023-05-15"},"Google Gemini":{apiKey:"",baseUrl:se["Google Gemini"],model:"gemini-pro"},Anthropic:{apiKey:"",baseUrl:se.Anthropic,model:"claude-2.1"},Cohere:{apiKey:"",baseUrl:se.Cohere,model:"command"},OpenRouter:{apiKey:"",baseUrl:se.OpenRouter,model:"openai/gpt-3.5-turbo"},Perplexity:{apiKey:"",baseUrl:se.Perplexity,model:""},"Custom (OpenAI Compatible)":{apiKey:"",baseUrl:"",model:""}},advancedSettings:!1,customAiModel:"",maxTokens:2e3,temperature:.5,presencePenalty:0,frequencyPenalty:0,enableGenerationLogging:!1,debugMode:!1,customPrompts:[]},Gn={OpenAI:{defaultHost:se.OpenAI,docs:"https://platform.openai.com/docs/introduction",defaultModel:"gpt-3.5-turbo",models:ga},"Azure OpenAI":{defaultHost:"",docs:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference",defaultModel:"gpt-35-turbo",models:ya},Anthropic:{defaultHost:se.Anthropic,docs:"https://docs.anthropic.com/claude/reference/getting-started-with-the-api",defaultModel:"claude-2.1",models:va},"Google Gemini":{defaultHost:se["Google Gemini"],docs:"https://ai.google.dev/models/gemini",defaultModel:"gemini-pro",models:_a},Cohere:{defaultHost:se.Cohere,docs:"https://docs.cohere.com/reference/versioning",defaultModel:"command",models:wa},OpenRouter:{defaultHost:se.OpenRouter,docs:"https://openrouter.ai/docs",defaultModel:Qe[0],models:Qe},Perplexity:{defaultHost:se.Perplexity,docs:"https://docs.perplexity.ai",defaultModel:"",models:ba},"Custom (OpenAI Compatible)":{defaultHost:"",docs:"",defaultModel:"",models:[]}};var Gt=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" />
</svg>
`;var De=require("obsidian");var Wn=te({name:Ft([B(),Je(vt)]),icon:gt(B()),action:Je(wt),data:B()}),Ea=te({name:B(),icon:gt(B()),data:B()}),_t=te({data:ve(te({id:B(),name:gt(B())}))}),kc=te({dataSchemeDate:B(),aiProvider:Je(Pe),aiProviderConfig:te({OpenAI:te({apiKey:B(),baseUrl:B(),model:B()}),"Azure OpenAI":te({apiKey:B(),baseUrl:B(),model:B(),apiVersion:B()}),"Google Gemini":te({apiKey:B(),baseUrl:B(),model:B()}),Anthropic:te({apiKey:B(),baseUrl:B(),model:B()}),Cohere:te({apiKey:B(),baseUrl:B(),model:B()}),OpenRouter:te({apiKey:B(),baseUrl:B(),model:B()}),Perplexity:te({apiKey:B(),baseUrl:B(),model:B()}),"Custom (OpenAI Compatible)":te({apiKey:B(),baseUrl:B(),model:B()})}),advancedSettings:yt(),customAiModel:B(),maxTokens:Xe(),temperature:Xe(),presencePenalty:Xe(),frequencyPenalty:Xe(),enableGenerationLogging:yt(),debugMode:yt(),customPrompts:ve(Ea)}),Hn=te({_NOTICE:B(),z:B()}),Ze=te({id:B(),by:B(),model:B(),provider:Je(Pe),generatedAt:B(),customInstruction:gt(B()),orginalText:B(),generatedText:B()});var Vn=pt(Kn());var ke=Vn.default.createInstance({name:"WordWise"}),be=class{async getTextGenerationLogs(){let e=await ke.getItem("text-generations"),{success:t,output:r}=await we(te({data:ve(Ze)}),e);return t?r.data:[]}async deleteSingleTextGenerationLog(e){let t=await ke.getItem("text-generations"),{success:r,output:s}=await we(te({data:ve(Ze)}),t);if(!r)return;let o=await we(ve(Ze),s.data.filter(i=>i.id!==e));o.success&&await ke.setItem("text-generations",{data:o.output})}async addTextGenerationLog(e){let t=await ke.getItem("text-generations"),{success:r,output:s}=await we(te({data:ve(Ze)}),t);if(!r){await ke.setItem("text-generations",{data:[e]});return}let o=await we(ve(Ze),[...s.data,e]);o.success&&await ke.setItem("text-generations",{data:o.output})}async getModels(e){let t=await ke.getItem(`${e}-models`),{success:r,output:s}=await we(_t,t);return r?s.data:Qe}async setModels(e,t){let r={data:t},{success:s,output:o}=await we(_t,r);s&&await ke.setItem(`${e}-models`,o)}};var Dr=pt(Jn()),xt=class extends De.Modal{enabled;logs;plugin;forageStore;constructor(e){super(e.app),this.plugin=e,this.forageStore=new be}async initStates(){let e=this.plugin.settings.enableGenerationLogging;if(this.enabled=e,!e){this.logs=[],new De.Notice("Text generation logging is disabled");return}let t=await this.forageStore.getTextGenerationLogs();this.logs=t.sort((r,s)=>new Date(s.generatedAt).getTime()-new Date(r.generatedAt).getTime()),this.logs=t}showLog(e){let{titleEl:t,contentEl:r}=this,s=this.logs.find(i=>i.id===e);if(!s){new De.Notice("Log not found");return}r.empty(),t.setText(`Log: ${(0,Dr.default)(s.generatedAt).format("YYYY-MM-DD HH:mm:ss")}`);let o=r.createEl("button",{text:"Delete Log"});o.onclick=async()=>{await this.forageStore.deleteSingleTextGenerationLog(e),this.logs=this.logs.filter(i=>i.id!==e),new De.Notice("Log deleted"),this.showList()},r.createEl("p",{text:`Model: ${s.model}`}),r.createEl("p",{text:`Provider: ${s.provider}`}),r.createEl("p",{text:`Command Name: ${s.by}`}),s.by==="Custom Instructions"&&s.customInstruction&&r.createEl("textarea",{text:s.customInstruction,cls:"modal-text-area",attr:{readonly:!0}}),r.createEl("h4",{text:"Original Text"}),r.createEl("textarea",{text:s.orginalText,cls:"modal-text-area",attr:{readonly:!0}}),r.createEl("h4",{text:"Generated Text"}),r.createEl("textarea",{text:s.generatedText,cls:"modal-text-area",attr:{readonly:!0}})}showList(){let{titleEl:e,contentEl:t}=this;this.contentEl.empty(),e.setText("Text Generation Logs");let r=this.logs,s=t.createDiv("scroll-container");for(let o of r)s.createEl("p",{text:(0,Dr.default)(o.generatedAt).format("YYYY-MM-DD HH:mm:ss"),cls:"log-item"}).onclick=()=>this.showLog(o.id)}onOpen(){let{contentEl:e}=this;if(!this.enabled){new De.Notice("Text generation logging is disabled"),e.empty();return}if(this.logs.length===0){e.empty(),new De.Notice("No logs found");return}this.showList()}onClose(){this.contentEl.empty()}};var Xn=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M21 10v5a1 1 0 0 1-1 1H7l-4 4V2a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v13z"></path>
</svg>
`;var Qn=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
</svg>`;var Zn=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.15l-5-4.88 6.91-1.01L12 2z" />
</svg>`;var es=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m20 7 .94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06-2.06.94 2.06.94.94 2.06.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38-2.83-2.83c-.2-.19-.45-.29-.71-.29-.26 0-.51.1-.71.29L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42zm-3.54-.7 1.41 1.41L14.41 11 13 9.59l1.17-1.17zM5.83 19.59l-1.41-1.41L11.59 11 13 12.41l-7.17 7.18z" />
</svg>`;var ts=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z" />
</svg>`;var rs=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path d="M4 9h16v2H4V9zm0 4h10v2H4v-2z" />
</svg>`;var ns=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />
</svg>`;var ss=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" />
</svg>`;function Et(n){let e=n.customPrompts;return[...ka,...Da,...e].map(t=>{let r=0;return"action"in t&&Fn(Wn,t)&&(r=t.action),{...t,action:r,data:`${t.data}${Na}`}})}var Na=`
## Base Instructions

- Remain headings if given.
- Change text in the ##Input area, text WRAPPED by ===.
- Keep the meaning the same. If possible, retain the structure of the paragraphs. Ensure the re-written text's word count is near to the original text.
- Response with the rewritten text only, do not include additional context, explanation, or extra wording, just the re-written text itself.
- Respond in the same language variety or dialect of the text.
- Keep the suitable markdown compounds if present, such as images, URLs, checkbox, and Obsidian backlinks [[xxx]] and specified triple backtick boxes (also maintain its language identifier, unless its content is code).

## Special Reminder

- Do not change location names that does have related languages, such as strange name that you don't know, then don't change them.
- Preserve code block content if necessary.
- Do not change URLs or make it encoded because this is markdown.

## Input

===CONTENT-START===
{{input}}
===CONTENT-END===
`,ka=[{name:"Custom Instructions",icon:Xn,action:1,data:`
## Tasks

- Follow the instructions below to make changes to the text.
- You must obey the custom instructions, and you should ignore conflicting instructions from the base instructions.
- You should not make any changes to the text that are not specified in the instructions.

## Custom Instructions

\`\`\`{{instructions}}\`\`\`
`}],Da=[{name:"Improve Writing",icon:es,action:0,data:`
## Tasks

- Improve writing of the text.
- Remain the tone.
- Fix the factual inaccuracy.
- Reduce duplicated ideas and wordings, keep writing simple and concise.
- Make the text clearer, easier to understand, and well put together by correcting grammar, spelling, choosing the most suitable punctuation marks, and selecting the best tone and style based on the topic and purpose of the text.
- Choose simple words and phrases to improve the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
- Do not use advanced or strange words that are not suitable for simple writings. You may use terminology or specialized words if it is necessary.
- Keep everything fluent and highly readable. If a word, phrase, or part of the text is already clear and effective, leave it as it is, unchanged.
`},{name:"Fix Grammar",icon:Qn,action:0,data:`
## Tasks

- Proofread and correct the spelling and grammar mistakes of the following text delimited by triple backticks.
- Make as few changes as possible. Only correct any spelling or grammar mistakes if the original text has spelling or grammar mistakes. Do not make any writing improvements.
- If the original text has no spelling or grammar mistakes, simply repeat the original text.
`},{name:"Make Shorter",icon:rs,action:0,data:`
## Tasks

- Write a shorter version from input text.
- Make the text shorter, and keeping the text clear, easy to understand, and well put together.
- Choose simple words and phrases to write the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
`},{name:"Make Longer",icon:ts,action:0,data:`
## Tasks

- Write a longer version.
- Making the text longer, and keeping the text clear, easy to understand, and well put together.
- Choose simple words and phrases to write the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
- Keep the meaning the same if possible. Ensure the rewritten text's word count is more than twice the original text but no more than 4 times the original text.
- Output the answer without additional context, explanation, or extra wording, just the lengthened text itself. Don't use any punctuation, especially no quotes or backticks, around the text.
- Respond in the same language variety or dialect of the text.
`},{name:"Highlight Main Point",icon:Zn,action:0,data:`
## Tasks

- Bold the most **important ideas, words, stats, numbers, or sentences**.
- Keep the bolding clear and simple. Do not make it messy or confusing.
- **Avoid bolding too much text**. If everything is worth bolded, then nothing stands out.
- NEVER bolding headings or whole paragraphs, never change or bold the backstick wrapped content.
`},{name:"Paraphrase",icon:ns,action:0,data:`
## Tasks

- Reformulate the sentences, changing the structure and using synonyms where appropriate, without distorting the meaning of the text.
- Avoid using the same phrases or terminology as the original text unless necessary. The paraphrased text should be distinct yet convey the same information.
- Ensure that the paraphrased version is clear, concise, and maintains the tone appropriate to the context of the original text.
- Do not add new information or your own opinion, but focus on reflecting the ideas presented in the source material.
- If the text is technical or contains specialized language, strive to simplify the content without losing the intended message.
- If a word, phrase, or part of the text is already clear and effective, you may leave it as it is, unchanged.
`},{name:"Simplify Text",icon:ss,action:0,data:`
## Tasks

- Simplify the following.
- Make the text clearer and easier to understand by using simple words and phrases. Avoid ones that are too hard or confusing.
- Keep sentences short and divide long statements into smaller ones. Aim for sentences that are 15 to 20 words long.
- Write in an active voice and use strong verbs to make your writing more direct and engaging.
- Remove unnecessary words, phrases, or clauses that do not contribute to the meaning of the text.
- Ensure that the simplified text retains the original meaning and context.
- Do not add new information or your own opinion, but focus on reflecting the ideas presented in the source material.
- If a word, phrase, or part of the text is already clear and effective, leave it as it is, unchanged.
`}];var st=require("obsidian");var Ma=Object.prototype.toString,tt=Array.isArray||function(e){return Ma.call(e)==="[object Array]"};function Lr(n){return typeof n=="function"}function La(n){return tt(n)?"array":typeof n}function Mr(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function os(n,e){return n!=null&&typeof n=="object"&&e in n}function $a(n,e){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(e)}var Ba=RegExp.prototype.test;function Ua(n,e){return Ba.call(n,e)}var ja=/\S/;function qa(n){return!Ua(ja,n)}var za={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Fa(n){return String(n).replace(/[&<>"'`=\/]/g,function(t){return za[t]})}var Ga=/\s*/,Wa=/\s+/,is=/\s*=/,Ha=/\s*\}/,Ya=/#|\^|\/|>|\{|&|=|!/;function Ka(n,e){if(!n)return[];var t=!1,r=[],s=[],o=[],i=!1,c=!1,l="",m=0;function g(){if(i&&!c)for(;o.length;)delete s[o.pop()];else o=[];i=!1,c=!1}var w,y,A;function R(T){if(typeof T=="string"&&(T=T.split(Wa,2)),!tt(T)||T.length!==2)throw new Error("Invalid tags: "+T);w=new RegExp(Mr(T[0])+"\\s*"),y=new RegExp("\\s*"+Mr(T[1])),A=new RegExp("\\s*"+Mr("}"+T[1]))}R(e||me.tags);for(var O=new Pt(n),U,M,W,G,ue,J;!O.eos();){if(U=O.pos,W=O.scanUntil(w),W)for(var E=0,q=W.length;E<q;++E)G=W.charAt(E),qa(G)?(o.push(s.length),l+=G):(c=!0,t=!0,l+=" "),s.push(["text",G,U,U+1]),U+=1,G===`
`&&(g(),l="",m=0,t=!1);if(!O.scan(w))break;if(i=!0,M=O.scan(Ya)||"name",O.scan(Ga),M==="="?(W=O.scanUntil(is),O.scan(is),O.scanUntil(y)):M==="{"?(W=O.scanUntil(A),O.scan(Ha),O.scanUntil(y),M="&"):W=O.scanUntil(y),!O.scan(y))throw new Error("Unclosed tag at "+O.pos);if(M==">"?ue=[M,W,U,O.pos,l,m,t]:ue=[M,W,U,O.pos],m++,s.push(ue),M==="#"||M==="^")r.push(ue);else if(M==="/"){if(J=r.pop(),!J)throw new Error('Unopened section "'+W+'" at '+U);if(J[1]!==W)throw new Error('Unclosed section "'+J[1]+'" at '+U)}else M==="name"||M==="{"||M==="&"?c=!0:M==="="&&R(W)}if(g(),J=r.pop(),J)throw new Error('Unclosed section "'+J[1]+'" at '+O.pos);return Ja(Va(s))}function Va(n){for(var e=[],t,r,s=0,o=n.length;s<o;++s)t=n[s],t&&(t[0]==="text"&&r&&r[0]==="text"?(r[1]+=t[1],r[3]=t[3]):(e.push(t),r=t));return e}function Ja(n){for(var e=[],t=e,r=[],s,o,i=0,c=n.length;i<c;++i)switch(s=n[i],s[0]){case"#":case"^":t.push(s),r.push(s),t=s[4]=[];break;case"/":o=r.pop(),o[5]=s[2],t=r.length>0?r[r.length-1][4]:e;break;default:t.push(s)}return e}function Pt(n){this.string=n,this.tail=n,this.pos=0}Pt.prototype.eos=function(){return this.tail===""};Pt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};Pt.prototype.scanUntil=function(e){var t=this.tail.search(e),r;switch(t){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=r.length,r};function et(n,e){this.view=n,this.cache={".":this.view},this.parent=e}et.prototype.push=function(e){return new et(e,this)};et.prototype.lookup=function(e){var t=this.cache,r;if(t.hasOwnProperty(e))r=t[e];else{for(var s=this,o,i,c,l=!1;s;){if(e.indexOf(".")>0)for(o=s.view,i=e.split("."),c=0;o!=null&&c<i.length;)c===i.length-1&&(l=os(o,i[c])||$a(o,i[c])),o=o[i[c++]];else o=s.view[e],l=os(s.view,e);if(l){r=o;break}s=s.parent}t[e]=r}return Lr(r)&&(r=r.call(this.view)),r};function pe(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}pe.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};pe.prototype.parse=function(e,t){var r=this.templateCache,s=e+":"+(t||me.tags).join(":"),o=typeof r<"u",i=o?r.get(s):void 0;return i==null&&(i=Ka(e,t),o&&r.set(s,i)),i};pe.prototype.render=function(e,t,r,s){var o=this.getConfigTags(s),i=this.parse(e,o),c=t instanceof et?t:new et(t,void 0);return this.renderTokens(i,c,r,e,s)};pe.prototype.renderTokens=function(e,t,r,s,o){for(var i="",c,l,m,g=0,w=e.length;g<w;++g)m=void 0,c=e[g],l=c[0],l==="#"?m=this.renderSection(c,t,r,s,o):l==="^"?m=this.renderInverted(c,t,r,s,o):l===">"?m=this.renderPartial(c,t,r,o):l==="&"?m=this.unescapedValue(c,t):l==="name"?m=this.escapedValue(c,t,o):l==="text"&&(m=this.rawValue(c)),m!==void 0&&(i+=m);return i};pe.prototype.renderSection=function(e,t,r,s,o){var i=this,c="",l=t.lookup(e[1]);function m(y){return i.render(y,t,r,o)}if(l){if(tt(l))for(var g=0,w=l.length;g<w;++g)c+=this.renderTokens(e[4],t.push(l[g]),r,s,o);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")c+=this.renderTokens(e[4],t.push(l),r,s,o);else if(Lr(l)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(t.view,s.slice(e[3],e[5]),m),l!=null&&(c+=l)}else c+=this.renderTokens(e[4],t,r,s,o);return c}};pe.prototype.renderInverted=function(e,t,r,s,o){var i=t.lookup(e[1]);if(!i||tt(i)&&i.length===0)return this.renderTokens(e[4],t,r,s,o)};pe.prototype.indentPartial=function(e,t,r){for(var s=t.replace(/[^ \t]/g,""),o=e.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!r)&&(o[i]=s+o[i]);return o.join(`
`)};pe.prototype.renderPartial=function(e,t,r,s){if(r){var o=this.getConfigTags(s),i=Lr(r)?r(e[1]):r[e[1]];if(i!=null){var c=e[6],l=e[5],m=e[4],g=i;l==0&&m&&(g=this.indentPartial(i,m,c));var w=this.parse(g,o);return this.renderTokens(w,t,r,g,s)}}};pe.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(r!=null)return r};pe.prototype.escapedValue=function(e,t,r){var s=this.getConfigEscape(r)||me.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&s===me.escape?String(o):s(o)};pe.prototype.rawValue=function(e){return e[1]};pe.prototype.getConfigTags=function(e){return tt(e)?e:e&&typeof e=="object"?e.tags:void 0};pe.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!tt(e))return e.escape};var me={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(n){At.templateCache=n},get templateCache(){return At.templateCache}},At=new pe;me.clearCache=function(){return At.clearCache()};me.parse=function(e,t){return At.parse(e,t)};me.render=function(e,t,r,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+La(e)+'" was given as the first argument for mustache#render(template, view, partials)');return At.render(e,t,r,s)};me.escape=Fa;me.Scanner=Pt;me.Context=et;me.Writer=pe;var as=me;var us="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var cs=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=us[t[n]&63];return e};var St=require("obsidian"),It=class extends St.Modal{instruction;resolve;reject;promise;constructor(e){super(e.app),this.instruction="",this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}async submitForm(){if(this.instruction===""){this.reject("Instruction field is empty");return}this.resolve(this.instruction),this.close()}onOpen(){let{contentEl:e,instruction:t}=this;e.createEl("h4",{text:"Enter custom instruction here:"}),new St.Setting(e).setName("Instruction:").addTextArea(r=>{r.inputEl.className="modal-text-area",r.setPlaceholder("Help me to transform bullets into numbered lists."),r.onChange(s=>{this.instruction=s}),r.setValue(t)}),new St.Setting(e).addButton(r=>r.setButtonText("Confirm").setCta().onClick(async()=>{await this.submitForm()}))}onClose(){this.contentEl.empty(),this.resolve("")}};function Se(n,e){return n.length>0?n:e}var ls=require("obsidian");async function fs({plugin:n,userMessage:e,customAiModel:t=""}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o=t.length>0?t:s.model,c={messages:[{role:"user",content:`
Please kindly remember no human conversation here, do not give extra comments outside, response only with modified text WITHOUT === WRAPPER, highly thanks.


${e}`}],model:o,stream:!1,max_tokens:r.advancedSettings&&r.maxTokens!==0?r.maxTokens:2048,temperature:r.advancedSettings?r.temperature:.5},l=`${Se(s.baseUrl,se[r.aiProvider])}/v1/messages`,m=await(0,ls.request)({url:l,method:"POST",headers:{"Content-Type":"application/json","anthropic-version":"2023-06-01","x-api-key":s.apiKey},body:JSON.stringify(c)});return JSON.parse(m).content[0].text}var Ws=require("obsidian"),Hs=pt(Gs());async function Ys({plugin:n,userMessage:e,customAiModel:t=""}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o=t.length>0?t:s.model,i={prompt:e,model:o,numGenerations:1,temperature:r.advancedSettings?r.temperature:.5,maxTokens:r.advancedSettings?r.maxTokens:2e3},c=`${Se(s.baseUrl,se[r.aiProvider])}/v1/generate`,l=await(0,Ws.request)({url:c,method:"POST",headers:{accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${s.apiKey}`},body:JSON.stringify((0,Hs.default)(i))}),{generations:m}=JSON.parse(l);return m[0].text}var Ks=require("obsidian");async function Vs({plugin:n,userMessage:e,customAiModel:t=""}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o=t.length>0?t:s.model,i={contents:[{role:"user",parts:[{text:e}]}],generationConfig:{temperature:r.advancedSettings?r.temperature:.5,maxOutputTokens:r.advancedSettings?r.maxTokens:2e3}},c=`${Se(s.baseUrl,se[r.aiProvider])}/v1beta/models/${o}:generateContent?key=${s.apiKey}`,l=await(0,Ks.request)({url:c,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),{candidates:m}=JSON.parse(l);if(!m||m.length===0)throw new Error("No response from Google AI");return m[0].content.parts[0].text}var Ct=require("obsidian");var Js={"HTTP-Referer":"https://github.com/ckt1031/obsidian-wordwise-plugin","X-Title":"Obsidian Wordwise Plugin"};async function Gr({plugin:n}){let{settings:e}=n,t=e.aiProviderConfig[e.aiProvider],r="/v1/models";switch(e.aiProvider){case"OpenRouter":r=`/api${r}`;break;default:break}let o=`${Se(t.baseUrl,se[e.aiProvider])}${r}`,i={"Content-Type":"application/json"};switch(e.aiProvider){case"OpenRouter":r=`/api${r}`,i={...i,...Js,Authorization:`Bearer ${t.apiKey}`};break;default:i={...i,Authorization:`Bearer ${t.apiKey}`};break}let c=await(0,Ct.request)({url:o,method:"GET",headers:i}),l=JSON.parse(c);return(await zn(_t,l)).data}async function Xs({plugin:n,userMessage:e,customAiModel:t=""}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider];if(r.aiProvider==="Azure OpenAI"){let R=r.aiProviderConfig[r.aiProvider];if(!R.baseUrl||R.baseUrl.length===0)throw new Error("Base URL is not set");if(!/\d{4}-\d{2}-\d{2}/.test(R.apiVersion)){new Ct.Notice("Invalid API Version, please enter in YYYY-MM-DD format");return}}let o=t.length>0?t:s.model,i=r.advancedSettings?r.frequencyPenalty:0;r.aiProvider==="Perplexity"&&(i=i===0?1:i);let c={stream:!1,model:o,temperature:r.advancedSettings?r.temperature:.5,max_tokens:r.advancedSettings?r.maxTokens:2e3,frequency_penalty:i,messages:[{role:"user",content:e}]},l={"Content-Type":"application/json"},m="/v1/chat/completions";switch(r.aiProvider){case"OpenRouter":m=`/api${m}`,l={...l,...Js,Authorization:`Bearer ${s.apiKey}`};break;case"Azure OpenAI":{let R=r.aiProviderConfig[r.aiProvider];m=`/openai/deployments/${o}/chat/completions?api-version=${R.apiVersion}`;let{model:O,...U}=c;c=U;break}default:r.aiProvider==="Perplexity"&&(m=m.replace("/v1","")),l={...l,Authorization:`Bearer ${s.apiKey}`};break}let w=`${Se(s.baseUrl,se[r.aiProvider])}${m}`,y=await(0,Ct.request)({url:w,headers:l,method:"POST",body:JSON.stringify(c)}),{choices:A}=JSON.parse(y);return A[0].message.content}function fe({settings:n,manifest:e},t){n.debugMode&&console.log(`${e.name}:`,t)}async function Xt({plugin:n,userMessage:e}){let{settings:t}=n,r=t.aiProvider,s="";if(t.customAiModel.length>0&&t.advancedSettings&&(s=t.customAiModel),fe(n,`Sending request to ${r} with prompt:

${e}`),r==="OpenAI"||r==="OpenRouter"||r==="Azure OpenAI"||r==="Perplexity"||r==="Custom (OpenAI Compatible)")return Xs({plugin:n,userMessage:e,customAiModel:s});if(r==="Anthropic")return fs({plugin:n,userMessage:e,customAiModel:s});if(r==="Google Gemini")return Vs({plugin:n,userMessage:e,customAiModel:s});if(r==="Cohere")return Ys({plugin:n,userMessage:e,customAiModel:s});throw new Error(`Unknown API Provider: ${r}`)}async function Wr(n,e,t){try{let r=n.getSelection();if(r.length===0){new st.Notice("No input selected");return}fe(e,`Running command: ${t}`);let s=Et(e.settings).find(R=>R.name===t);if(!s)throw new Error(`Could not find command data with name ${t}`);if(!s.data)throw new Error(`Command data with name ${t} has no data`);let o="";if(s.action===1){let R=new It(e);if(R.open(),o=await R.promise,!o||o==="")return}let i=e.settings.customAiModel,c=i.length>0?i:e.settings.aiProviderConfig[e.settings.aiProvider].model;new st.Notice(`Generating text with ${t} (${e.settings.aiProvider})...`);let l=as.render(s.data,{input:r,instructions:o}),m=Date.now(),g=await Xt({plugin:e,userMessage:l});if(!g){new st.Notice(`No result from ${e.settings.aiProvider}`);return}let w={id:cs(),by:t,model:c,generatedAt:new Date().toISOString(),provider:e.settings.aiProvider,orginalText:r,generatedText:g,customInstruction:o};e.settings.enableGenerationLogging&&await new be().addTextGenerationLog(w),n.replaceSelection(g);let A=((Date.now()-m)/1e3).toFixed(2);fe(e,`Replaced selection with result: ${g} (Time taken: ${A}s)`),new st.Notice("Text generated.")}catch(r){r instanceof Error&&(fe(e,r),new st.Notice(r.message.length>100?"Error generating text, see console for details":`Error generating text: ${r.message}`))}}var re=require("obsidian");var Qt=require("obsidian"),Tt=class extends Qt.Modal{resolve;promise;constructor(e){super(e.app),this.promise=new Promise(t=>{this.resolve=t})}onOpen(){let{contentEl:e}=this;e.createEl("h4",{text:"Are you sure you want to proceed?"}),e.createEl("p",{text:"This action cannot be undone, please confirm to proceed."}),new Qt.Setting(e).addButton(t=>t.setButtonText("Confirm").setCta().onClick(async()=>{this.close(),this.resolve(!0)})).addButton(t=>t.setButtonText("Cancel").setCta().onClick(async()=>{this.close(),this.resolve(!1)}))}onClose(){let{contentEl:e}=this;e.empty(),this.resolve(!1)}};var _e=require("obsidian"),Qs=({dropDown:n,plugin:e})=>{let t=n.selectEl.insertAdjacentElement("beforebegin",document.createElement("button")),r=n.selectEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(!t||!r)return;(0,_e.setIcon)(t,"list-restart"),(0,_e.setIcon)(r,"list-x"),(0,_e.setTooltip)(t,"Fetch models"),(0,_e.setTooltip)(r,"Reset models (use with caution)");let{setModels:s}=new be;return r.addEventListener("click",async()=>{let o=new Tt(e);if(o.open(),!!await o.promise){switch(e.settings.aiProvider){case"OpenRouter":{await s("OpenRouter",Qe);break}case"Custom (OpenAI Compatible)":{await s("Custom (OpenAI Compatible)",[]);break}default:throw new Error(`Unknown API Provider: ${e.settings.aiProvider}`)}new _e.Notice("Models reset successfully, please refresh the plugin.")}}),t.addEventListener("click",async()=>{try{let o=[],{settings:i}=e;switch(i.aiProvider){case"OpenRouter":{o=await Gr({plugin:e});break}case"Custom (OpenAI Compatible)":o=await Gr({plugin:e});break;default:throw new Error(`Unknown API Provider: ${i.aiProvider}`)}await s(i.aiProvider,o),fe(e,o),new _e.Notice("Models fetched and stored successfully, please refresh the plugin.")}catch(o){fe(e,o);let i="Failed to fetch models";o instanceof Error&&(i+=`: ${o.message}`),new _e.Notice(i)}}),n};var Ot=require("obsidian"),Zs=n=>{let e=n.inputEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(e)return(0,Ot.setTooltip)(e,"Toggle password visibility"),(0,Ot.setIcon)(e,"eye-off"),e.addEventListener("click",()=>{let t=n.inputEl.getAttribute("type")==="text",r=t?"eye-off":"eye",s=t?"password":"text";(0,Ot.setIcon)(e,r),n.inputEl.setAttribute("type",s),n.inputEl.focus()}),n.inputEl.setAttribute("type","password"),n};var Fe=require("obsidian"),eo=({text:n,plugin:e})=>{let t=n.inputEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(t)return(0,Fe.setTooltip)(t,"Test API"),(0,Fe.setIcon)(t,"check-circle-2"),t.addEventListener("click",async()=>{let{settings:r}=e;try{let s=await Xt({plugin:e,userMessage:"Say word hello only."});if(fe(e,s),s&&s.length>0){let o=r.aiProvider,i=r.aiProviderConfig[o],c=r.customAiModel.length>0?r.customAiModel:i.model;new Fe.Notice(`${o} API is working properly with model ${c}`)}}catch(s){fe(e,s);let o="API is not working properly";s instanceof Error&&(o+=`: ${s.message}`),new Fe.Notice(o)}}),n};var xe=require("obsidian"),ot=class extends xe.Modal{name;data;isEdit;plugin;constructor(e,t,r,s){super(e.app),this.name="",this.data="",this.plugin=e,this.isEdit=t,t&&(this.name=r??"",this.data=s??"")}async submitForm(){if(this.name===""||this.data===""){new xe.Notice("Please fill out all fields");return}let e=this.plugin.settings.customPrompts.find(t=>t.name===this.name);if(!this.isEdit&&e){new xe.Notice("Name already in use");return}if(this.isEdit){let t=this.plugin.settings.customPrompts.findIndex(r=>r.name===this.name);this.plugin.settings.customPrompts[t]={name:this.name,data:this.data}}else this.plugin.settings.customPrompts.push({name:this.name,data:this.data});await this.plugin.saveSettings(),new xe.Notice(`Please reload the plugin after ${this.isEdit?"editing":"adding"} a prompt`),this.close()}onOpen(){let{contentEl:e,data:t,name:r}=this;e.createEl("h4",{text:"Add custom prompt here:"}),new xe.Setting(e).setName("Name:").addText(s=>{s.setPlaceholder("Name (example: text-tone-helper)"),s.onChange(o=>{this.name=o}),s.setValue(r)}),new xe.Setting(e).setName("Prompt:").addTextArea(s=>{s.inputEl.className="modal-text-area",s.setPlaceholder("Change the tone of the text"),s.onChange(o=>{this.data=o}),s.setValue(t)}),new xe.Setting(e).addButton(s=>s.setButtonText("Confirm").setCta().onClick(async()=>{await this.submitForm()}))}async onClose(){let{contentEl:e,plugin:t}=this;e.empty(),await t.app.setting.open(),await t.app.setting.openTabById(t.manifest.id)}};var si=pt(ni());function hc(n){return btoa(encodeURIComponent(n))}function mc(n){return decodeURIComponent(atob(n))}var oi=async(n,e)=>{let t=encodeURIComponent(e),r=encodeURIComponent(hc(JSON.stringify(n.settings))),s=`obsidian://${n.manifest.id}?func=import&version=${n.manifest.version}&vault=${t}&data=${r}`,o=await si.default.toDataURL(s);return{rawUri:s,imgUri:o}},ii=(n,e)=>{let t=n;if(t.func===void 0||t.func!=="import"||t.vault===void 0||t.data===void 0)return{status:"error",message:`The uri is not for exporting/importing settings: ${JSON.stringify(n)}`};if(t.vault!==e)return{status:"error",message:`The target vault is ${t.vault} but you are currently in ${e}: ${JSON.stringify(n)}`};let r={};try{r=JSON.parse(mc(decodeURIComponent(t.data)))}catch{return{status:"error",message:`Errors while parsing settings: ${JSON.stringify(n)}`}}return{status:"ok",message:"OK",result:r}};var fr=require("obsidian"),lr=class extends fr.Modal{plugin;constructor(e){super(e.app),this.plugin=e}async onOpen(){let{contentEl:e}=this,{rawUri:t,imgUri:r}=await oi(this.plugin,this.app.vault.getName());e.createDiv().createEl("p",{text:"Scan the QR code with your mobile device to import the settings"}),e.createDiv().createEl("button",{text:"Copy URI"},c=>{c.onclick=async()=>{await navigator.clipboard.writeText(t),new fr.Notice("URI copied to clipboard")}}),e.createDiv().createEl("img",{cls:"qrcode-img"},async c=>{c.src=r})}onClose(){this.contentEl.empty()}};var dr=class extends re.PluginSettingTab{plugin;constructor(e,t){super(e,t),this.plugin=t}async restartSettingsTab(e){await e.app.setting.close(),await e.app.setting.open(),await e.app.setting.openTabById(e.manifest.id)}display(){let{containerEl:e,plugin:t}=this,{settings:r}=t;e.empty(),new re.Setting(e).setName("API provider").setDesc("API Provider to be used, available options are OpenAI, Anthropic and Google AI").addDropdown(s=>{for(let o of Object.values(Pe))s.addOption(o,o);s.setValue(r.aiProvider),s.onChange(async o=>{r.aiProvider=o,await t.saveSettings(),this.restartSettingsTab(t)})});for(let[s,o]of Object.entries(Gn))r.aiProvider===s&&(new re.Setting(e).setName(`${s} api key`).setDesc(`API Key for the ${s} API`).addText(i=>{Zs(i),eo({text:i,plugin:t}),i.setPlaceholder(`Enter your ${s} API Key`).setValue(r.aiProviderConfig[s].apiKey).onChange(async c=>{r.aiProviderConfig[s].apiKey=c,await t.saveSettings()})}),(r.advancedSettings||s==="Azure OpenAI")&&new re.Setting(e).setName(`${s} endpoint base url`).setDesc(`Base URL for the ${s} API. DO NOT include / trailing slash and paths.`).addText(i=>i.setPlaceholder(o.defaultHost).setValue(r.aiProviderConfig[s].baseUrl).onChange(async c=>{r.aiProviderConfig[s].baseUrl=c,await t.saveSettings()})),s==="Azure OpenAI"&&new re.Setting(e).setName(`${s} api version`).setDesc(`API Version for the ${s} API`).addText(i=>i.setPlaceholder("2023-05-15").setValue(r.aiProviderConfig[s].apiVersion).onChange(async c=>{r.aiProviderConfig[s].apiVersion=c,await t.saveSettings()})),new re.Setting(e).setName(`${s} language model`).setDesc(`Model to be used, defaults to ${o.defaultModel}, see ${s} Models for more info`).addDropdown(async i=>{let c=o.models;(s==="OpenRouter"||s==="Custom (OpenAI Compatible)")&&(Qs({dropDown:i,plugin:t}),c=await new be().getModels(s));for(let l of c)typeof l=="string"?i.addOption(l,l):i.addOption(l.id,l.name||l.id);i.setValue(r.aiProviderConfig[s].model),i.onChange(async l=>{r.aiProviderConfig[s].model=l,await t.saveSettings()})}));new re.Setting(e).setName("Advanced mode").setDesc("Configure advanced model settings, enable this in order to send extra parameters to the API").addToggle(s=>s.setValue(r.advancedSettings).onChange(async o=>{r.advancedSettings=o,await t.saveSettings(),this.restartSettingsTab(t)})),r.advancedSettings&&(new re.Setting(e).setName("Temperature").setDesc("Temperature for the model, defaults to 0.5 for best suitable results, higher value means more creative but less accurate, lower value means less creative but more accurate.").addSlider(s=>{s.setDynamicTooltip(),s.setLimits(0,1,.1),s.setValue(r.temperature),s.onChange(async o=>{r.temperature=o,await t.saveSettings()})}),new re.Setting(e).setName("Custom model id").setDesc("Enter custom model ID for your own API, if this is empty, it will follow the selected menu above.").addText(s=>s.setPlaceholder("Enter the model name").setValue(r.customAiModel).onChange(async o=>{r.customAiModel=o,await t.saveSettings()})),new re.Setting(e).setName("Frequency penalty").setDesc("Decreasing the model's likelihood to repeat the same line verbatim, defaults to 0.0.").addSlider(s=>{s.setDynamicTooltip(),s.setLimits(-2,2,.1),s.setValue(r.frequencyPenalty),s.onChange(async o=>{r.frequencyPenalty=o,await t.saveSettings()})}),new re.Setting(e).setName("Max tokens").setDesc("Maximum number of tokens to generate (0 means not specifying in API)").addText(s=>s.setValue(r.maxTokens.toString()).onChange(async o=>{!Number.isNaN(Number.parseInt(o))&&Number.parseInt(o)>=0&&(r.maxTokens=Number.parseInt(o),await t.saveSettings())}))),new re.Setting(e).setName("Debug mode").setDesc("Enable debug mode, which will log more information to the console").addToggle(s=>s.setValue(r.debugMode).onChange(async o=>{r.debugMode=o,await t.saveSettings()})),new re.Setting(e).setName("Enable text generation log").setDesc("Enable text generation log, which will log all the generated text to the storage").addToggle(s=>s.setValue(r.enableGenerationLogging).onChange(async o=>{r.enableGenerationLogging=o,await t.saveSettings()})),new re.Setting(e).setName("Export settings").setDesc("Export settings as a QR code.").addButton(s=>{s.setButtonText("Export").onClick(async()=>{new lr(this.plugin).open()})}),new re.Setting(e).setName("Reset settings").setDesc("This will reset all settings to their default values").addButton(s=>{s.setTooltip("Irrevisible action, please be careful!"),s.setButtonText("Reset").onClick(async()=>{if(s.buttonEl.textContent==="Reset"){for(let o=0;o<5;o++)s.setButtonText(`Are you sure to reset? (${5-o})`),s.setDisabled(!0),sleep(1e3);s.setDisabled(!1),s.setButtonText("Are you sure to reset?"),setTimeout(()=>{s.setButtonText("Reset")},5e3)}else await t.resetSettings(),new re.Notice("Resetting settings to default values"),this.restartSettingsTab(t)})}),new re.Setting(e).setName("Custom Prompts").setHeading(),new re.Setting(e).setDesc("Here is a list of all the custom prompts you've created. You can edit or delete them here, or add a new one below.").addButton(s=>{s.setTooltip("Add a new custom prompt"),s.setButtonText("Add"),s.onClick(async()=>{await t.app.setting.close(),new ot(t,!1).open()})});for(let s of r.customPrompts)new re.Setting(e).setName(s.name).addButton(o=>{o.setIcon("pencil"),o.setTooltip("Edit this prompt"),o.onClick(async()=>{let i=r.customPrompts.find(c=>c.name===s.name);i&&(await t.app.setting.close(),new ot(t,!0,s.name,i.data).open())})}).addButton(o=>{o.setIcon("cross"),o.setTooltip("Delete this prompt"),o.onClick(async()=>{if(o.buttonEl.textContent===""){for(let i=0;i<5;i++)o.setButtonText(`Are you sure to delete? (${5-i})`),o.setDisabled(!0),sleep(1e3);o.setDisabled(!1),o.setButtonText("Are you sure to delete?"),setTimeout(()=>{o.setIcon("cross")},5e3)}else o.buttonEl.parentElement?.parentElement&&o.buttonEl.parentElement.parentElement.remove(),r.customPrompts=r.customPrompts.filter(i=>i.name!==s.name),await t.saveSettings()})})}};var ai="RSUH6NwtuGcUS252ssX2U4dCeCi48Yg2ekqnrKatZkmQRetZpxMUxqE",ui=n=>[...n].reverse().join(""),ci=(n,e)=>[...n].map((t,r)=>String.fromCharCode(t.charCodeAt(0)^e.charCodeAt(r%e.length))).join(""),li=n=>{if(!n?.z)return null;let e=ui(n.z);return e=ci(e,ai),JSON.parse(e)},fi=n=>{if(!n)return;let e=JSON.stringify(n);return e=ci(e,ai),e=ui(e),{_NOTICE:"This configuration is sensitive and should not be modified or shared. Non-compliance may disrupt system functionality.",z:e}};var pr=class extends Ce.Plugin{settings;async onload(){await this.loadSettings(),(0,Ce.addIcon)("openai",Gt);for(let t of Et(this.settings)){let r=t.name.toLowerCase().replaceAll(/\s/g,"-");t.icon&&(0,Ce.addIcon)(r,t.icon),this.addCommand({id:(0,yn.default)(t.name),name:t.name,icon:t.icon?r:Gt,editorCallback:s=>Wr(s,this,t.name)})}let e=[{name:"Check Text Generation Logs",onClick:async t=>{let r=new xt(this);await r.initStates(),r.open()}}];for(let t of e)this.addCommand({id:(0,yn.default)(t.name),name:t.name,editorCallback:r=>t.onClick(r)});this.registerEvent(this.app.workspace.on("editor-menu",(t,r)=>{t.addItem(s=>{s.setTitle(`${this.manifest.name} Commands`).setIcon("brain-cog");let o=s.setSubmenu();for(let i of Et(this.settings)){let c=i.name.toLowerCase().replaceAll(/\s/g,"-");i.icon&&(0,Ce.addIcon)(c,i.icon),o.addItem(l=>{l.setTitle(i.name).setIcon(i.icon?c:Gt).onClick(()=>Wr(r,this,i.name))})}})})),this.addSettingTab(new dr(this.app,this)),this.registerObsidianProtocolHandler(this.manifest.id,async t=>{let r=ii(t,this.app.vault.getName());r.status==="error"?new Ce.Notice(r.message):r.result&&(this.settings=ht(this.settings,r.result),this.saveSettings(),new Ce.Notice("Settings imported. Please check the settings tab to verify."))}),fe(this,"Loaded plugin.")}onunload(){}async resetSettings(){this.settings=bt,await this.saveSettings()}async loadSettings(){let e=await this.loadData(),{success:t}=await we(Hn,e);if(!t){this.settings=bt,fe(this,"Failed to parse settings, using default settings.");return}let r=li(e);if(r===null){this.settings=bt,fe(this,"Failed to deobfuscate settings, using default settings.");return}this.settings=ht(bt,r)}async saveSettings(){await this.saveData(fi(this.settings))}};
