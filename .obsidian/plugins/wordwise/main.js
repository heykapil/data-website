var ka=Object.create;var Yt=Object.defineProperty;var Da=Object.getOwnPropertyDescriptor;var $a=Object.getOwnPropertyNames;var Ba=Object.getPrototypeOf,Ua=Object.prototype.hasOwnProperty;var ja=(n,e)=>()=>(n&&(e=n(n=0)),e);var q=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),us=(n,e)=>{for(var t in e)Yt(n,t,{get:e[t],enumerable:!0})},cs=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $a(e))!Ua.call(n,s)&&s!==t&&Yt(n,s,{get:()=>e[s],enumerable:!(r=Da(e,s))||r.enumerable});return n};var Ye=(n,e,t)=>(t=n!=null?ka(Ba(n)):{},cs(e||!n||!n.__esModule?Yt(t,"default",{value:n,enumerable:!0}):t,n)),kr=n=>cs(Yt({},"__esModule",{value:!0}),n);var Vt=q((ls,Dr)=>{(function(n){if(typeof ls=="object"&&typeof Dr<"u")Dr.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.localforage=n()}})(function(){var n,e,t;return function r(s,o,i){function u(m,v){if(!o[m]){if(!s[m]){var y=typeof require=="function"&&require;if(!v&&y)return y(m,!0);if(c)return c(m,!0);var b=new Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b}var T=o[m]={exports:{}};s[m][0].call(T.exports,function(M){var F=s[m][1][M];return u(F||M)},T,T.exports,r,s,o,i)}return o[m].exports}for(var c=typeof require=="function"&&require,d=0;d<i.length;d++)u(i[d]);return u}({1:[function(r,s,o){(function(i){"use strict";var u=i.MutationObserver||i.WebKitMutationObserver,c;if(u){var d=0,m=new u(M),v=i.document.createTextNode("");m.observe(v,{characterData:!0}),c=function(){v.data=d=++d%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var y=new i.MessageChannel;y.port1.onmessage=M,c=function(){y.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?c=function(){var $=i.document.createElement("script");$.onreadystatechange=function(){M(),$.onreadystatechange=null,$.parentNode.removeChild($),$=null},i.document.documentElement.appendChild($)}:c=function(){setTimeout(M,0)};var b,T=[];function M(){b=!0;for(var $,Z,W=T.length;W;){for(Z=T,T=[],$=-1;++$<W;)Z[$]();W=T.length}b=!1}s.exports=F;function F($){T.push($)===1&&!b&&c()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,s,o){"use strict";var i=r(1);function u(){}var c={},d=["REJECTED"],m=["FULFILLED"],v=["PENDING"];s.exports=y;function y(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,I!==u&&F(this,I)}y.prototype.catch=function(I){return this.then(null,I)},y.prototype.then=function(I,D){if(typeof I!="function"&&this.state===m||typeof D!="function"&&this.state===d)return this;var O=new this.constructor(u);if(this.state!==v){var R=this.state===m?I:D;T(O,R,this.outcome)}else this.queue.push(new b(O,I,D));return O};function b(I,D,O){this.promise=I,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(I){c.resolve(this.promise,I)},b.prototype.otherCallFulfilled=function(I){T(this.promise,this.onFulfilled,I)},b.prototype.callRejected=function(I){c.reject(this.promise,I)},b.prototype.otherCallRejected=function(I){T(this.promise,this.onRejected,I)};function T(I,D,O){i(function(){var R;try{R=D(O)}catch(ee){return c.reject(I,ee)}R===I?c.reject(I,new TypeError("Cannot resolve promise with itself")):c.resolve(I,R)})}c.resolve=function(I,D){var O=$(M,D);if(O.status==="error")return c.reject(I,O.value);var R=O.value;if(R)F(I,R);else{I.state=m,I.outcome=D;for(var ee=-1,ie=I.queue.length;++ee<ie;)I.queue[ee].callFulfilled(D)}return I},c.reject=function(I,D){I.state=d,I.outcome=D;for(var O=-1,R=I.queue.length;++O<R;)I.queue[O].callRejected(D);return I};function M(I){var D=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof D=="function")return function(){D.apply(I,arguments)}}function F(I,D){var O=!1;function R(S){O||(O=!0,c.reject(I,S))}function ee(S){O||(O=!0,c.resolve(I,S))}function ie(){D(ee,R)}var N=$(ie);N.status==="error"&&R(N.value)}function $(I,D){var O={};try{O.value=I(D),O.status="success"}catch(R){O.status="error",O.value=R}return O}y.resolve=Z;function Z(I){return I instanceof this?I:c.resolve(new this(u),I)}y.reject=W;function W(I){var D=new this(u);return c.reject(D,I)}y.all=le;function le(I){var D=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=I.length,R=!1;if(!O)return this.resolve([]);for(var ee=new Array(O),ie=0,N=-1,S=new this(u);++N<O;)_(I[N],N);return S;function _(L,C){D.resolve(L).then(j,function(U){R||(R=!0,c.reject(S,U))});function j(U){ee[C]=U,++ie===O&&!R&&(R=!0,c.resolve(S,ee))}}}y.race=ne;function ne(I){var D=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=I.length,R=!1;if(!O)return this.resolve([]);for(var ee=-1,ie=new this(u);++ee<O;)N(I[ee]);return ie;function N(S){D.resolve(S).then(function(_){R||(R=!0,c.resolve(ie,_))},function(_){R||(R=!0,c.reject(ie,_))})}}},{1:1}],3:[function(r,s,o){(function(i){"use strict";typeof i.Promise!="function"&&(i.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,s,o){"use strict";var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function u(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=c();function m(){try{if(!d||!d.open)return!1;var a=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),f=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!a||f)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function v(a,f){a=a||[],f=f||{};try{return new Blob(a,f)}catch(p){if(p.name!=="TypeError")throw p;for(var l=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,h=new l,g=0;g<a.length;g+=1)h.append(a[g]);return h.getBlob(f.type)}}typeof Promise>"u"&&r(3);var y=Promise;function b(a,f){f&&a.then(function(l){f(null,l)},function(l){f(l)})}function T(a,f,l){typeof f=="function"&&a.then(f),typeof l=="function"&&a.catch(l)}function M(a){return typeof a!="string"&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function F(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var $="local-forage-detect-blob-support",Z=void 0,W={},le=Object.prototype.toString,ne="readonly",I="readwrite";function D(a){for(var f=a.length,l=new ArrayBuffer(f),h=new Uint8Array(l),g=0;g<f;g++)h[g]=a.charCodeAt(g);return l}function O(a){return new y(function(f){var l=a.transaction($,I),h=v([""]);l.objectStore($).put(h,"key"),l.onabort=function(g){g.preventDefault(),g.stopPropagation(),f(!1)},l.oncomplete=function(){var g=navigator.userAgent.match(/Chrome\/(\d+)/),p=navigator.userAgent.match(/Edge\//);f(p||!g||parseInt(g[1],10)>=43)}}).catch(function(){return!1})}function R(a){return typeof Z=="boolean"?y.resolve(Z):O(a).then(function(f){return Z=f,Z})}function ee(a){var f=W[a.name],l={};l.promise=new y(function(h,g){l.resolve=h,l.reject=g}),f.deferredOperations.push(l),f.dbReady?f.dbReady=f.dbReady.then(function(){return l.promise}):f.dbReady=l.promise}function ie(a){var f=W[a.name],l=f.deferredOperations.pop();if(l)return l.resolve(),l.promise}function N(a,f){var l=W[a.name],h=l.deferredOperations.pop();if(h)return h.reject(f),h.promise}function S(a,f){return new y(function(l,h){if(W[a.name]=W[a.name]||pe(),a.db)if(f)ee(a),a.db.close();else return l(a.db);var g=[a.name];f&&g.push(a.version);var p=d.open.apply(d,g);f&&(p.onupgradeneeded=function(w){var x=p.result;try{x.createObjectStore(a.storeName),w.oldVersion<=1&&x.createObjectStore($)}catch(E){if(E.name==="ConstraintError")console.warn('The database "'+a.name+'" has been upgraded from version '+w.oldVersion+" to version "+w.newVersion+', but the storage "'+a.storeName+'" already exists.');else throw E}}),p.onerror=function(w){w.preventDefault(),h(p.error)},p.onsuccess=function(){var w=p.result;w.onversionchange=function(x){x.target.close()},l(w),ie(a)}})}function _(a){return S(a,!1)}function L(a){return S(a,!0)}function C(a,f){if(!a.db)return!0;var l=!a.db.objectStoreNames.contains(a.storeName),h=a.version<a.db.version,g=a.version>a.db.version;if(h&&(a.version!==f&&console.warn('The database "'+a.name+`" can't be downgraded from version `+a.db.version+" to version "+a.version+"."),a.version=a.db.version),g||l){if(l){var p=a.db.version+1;p>a.version&&(a.version=p)}return!0}return!1}function j(a){return new y(function(f,l){var h=new FileReader;h.onerror=l,h.onloadend=function(g){var p=btoa(g.target.result||"");f({__local_forage_encoded_blob:!0,data:p,type:a.type})},h.readAsBinaryString(a)})}function U(a){var f=D(atob(a.data));return v([f],{type:a.type})}function V(a){return a&&a.__local_forage_encoded_blob}function re(a){var f=this,l=f._initReady().then(function(){var h=W[f._dbInfo.name];if(h&&h.dbReady)return h.dbReady});return T(l,a,a),l}function ae(a){ee(a);for(var f=W[a.name],l=f.forages,h=0;h<l.length;h++){var g=l[h];g._dbInfo.db&&(g._dbInfo.db.close(),g._dbInfo.db=null)}return a.db=null,_(a).then(function(p){return a.db=p,C(a)?L(a):p}).then(function(p){a.db=f.db=p;for(var w=0;w<l.length;w++)l[w]._dbInfo.db=p}).catch(function(p){throw N(a,p),p})}function X(a,f,l,h){h===void 0&&(h=1);try{var g=a.db.transaction(a.storeName,f);l(null,g)}catch(p){if(h>0&&(!a.db||p.name==="InvalidStateError"||p.name==="NotFoundError"))return y.resolve().then(function(){if(!a.db||p.name==="NotFoundError"&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),L(a)}).then(function(){return ae(a).then(function(){X(a,f,l,h-1)})}).catch(l);l(p)}}function pe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ke(a){var f=this,l={db:null};if(a)for(var h in a)l[h]=a[h];var g=W[l.name];g||(g=pe(),W[l.name]=g),g.forages.push(f),f._initReady||(f._initReady=f.ready,f.ready=re);var p=[];function w(){return y.resolve()}for(var x=0;x<g.forages.length;x++){var E=g.forages[x];E!==f&&p.push(E._initReady().catch(w))}var A=g.forages.slice(0);return y.all(p).then(function(){return l.db=g.db,_(l)}).then(function(P){return l.db=P,C(l,f._defaultConfig.version)?L(l):P}).then(function(P){l.db=g.db=P,f._dbInfo=l;for(var k=0;k<A.length;k++){var z=A[k];z!==f&&(z._dbInfo.db=l.db,z._dbInfo.version=l.version)}})}function Se(a,f){var l=this;a=M(a);var h=new y(function(g,p){l.ready().then(function(){X(l._dbInfo,ne,function(w,x){if(w)return p(w);try{var E=x.objectStore(l._dbInfo.storeName),A=E.get(a);A.onsuccess=function(){var P=A.result;P===void 0&&(P=null),V(P)&&(P=U(P)),g(P)},A.onerror=function(){p(A.error)}}catch(P){p(P)}})}).catch(p)});return b(h,f),h}function We(a,f){var l=this,h=new y(function(g,p){l.ready().then(function(){X(l._dbInfo,ne,function(w,x){if(w)return p(w);try{var E=x.objectStore(l._dbInfo.storeName),A=E.openCursor(),P=1;A.onsuccess=function(){var k=A.result;if(k){var z=k.value;V(z)&&(z=U(z));var H=a(z,k.key,P++);H!==void 0?g(H):k.continue()}else g()},A.onerror=function(){p(A.error)}}catch(k){p(k)}})}).catch(p)});return b(h,f),h}function Te(a,f,l){var h=this;a=M(a);var g=new y(function(p,w){var x;h.ready().then(function(){return x=h._dbInfo,le.call(f)==="[object Blob]"?R(x.db).then(function(E){return E?f:j(f)}):f}).then(function(E){X(h._dbInfo,I,function(A,P){if(A)return w(A);try{var k=P.objectStore(h._dbInfo.storeName);E===null&&(E=void 0);var z=k.put(E,a);P.oncomplete=function(){E===void 0&&(E=null),p(E)},P.onabort=P.onerror=function(){var H=z.error?z.error:z.transaction.error;w(H)}}catch(H){w(H)}})}).catch(w)});return b(g,l),g}function fe(a,f){var l=this;a=M(a);var h=new y(function(g,p){l.ready().then(function(){X(l._dbInfo,I,function(w,x){if(w)return p(w);try{var E=x.objectStore(l._dbInfo.storeName),A=E.delete(a);x.oncomplete=function(){g()},x.onerror=function(){p(A.error)},x.onabort=function(){var P=A.error?A.error:A.transaction.error;p(P)}}catch(P){p(P)}})}).catch(p)});return b(h,f),h}function be(a){var f=this,l=new y(function(h,g){f.ready().then(function(){X(f._dbInfo,I,function(p,w){if(p)return g(p);try{var x=w.objectStore(f._dbInfo.storeName),E=x.clear();w.oncomplete=function(){h()},w.onabort=w.onerror=function(){var A=E.error?E.error:E.transaction.error;g(A)}}catch(A){g(A)}})}).catch(g)});return b(l,a),l}function He(a){var f=this,l=new y(function(h,g){f.ready().then(function(){X(f._dbInfo,ne,function(p,w){if(p)return g(p);try{var x=w.objectStore(f._dbInfo.storeName),E=x.count();E.onsuccess=function(){h(E.result)},E.onerror=function(){g(E.error)}}catch(A){g(A)}})}).catch(g)});return b(l,a),l}function nt(a,f){var l=this,h=new y(function(g,p){if(a<0){g(null);return}l.ready().then(function(){X(l._dbInfo,ne,function(w,x){if(w)return p(w);try{var E=x.objectStore(l._dbInfo.storeName),A=!1,P=E.openKeyCursor();P.onsuccess=function(){var k=P.result;if(!k){g(null);return}a===0||A?g(k.key):(A=!0,k.advance(a))},P.onerror=function(){p(P.error)}}catch(k){p(k)}})}).catch(p)});return b(h,f),h}function Hi(a){var f=this,l=new y(function(h,g){f.ready().then(function(){X(f._dbInfo,ne,function(p,w){if(p)return g(p);try{var x=w.objectStore(f._dbInfo.storeName),E=x.openKeyCursor(),A=[];E.onsuccess=function(){var P=E.result;if(!P){h(A);return}A.push(P.key),P.continue()},E.onerror=function(){g(E.error)}}catch(P){g(P)}})}).catch(g)});return b(l,a),l}function Yi(a,f){f=F.apply(this,arguments);var l=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||l.name,a.storeName=a.storeName||l.storeName);var h=this,g;if(!a.name)g=y.reject("Invalid arguments");else{var p=a.name===l.name&&h._dbInfo.db,w=p?y.resolve(h._dbInfo.db):_(a).then(function(x){var E=W[a.name],A=E.forages;E.db=x;for(var P=0;P<A.length;P++)A[P]._dbInfo.db=x;return x});a.storeName?g=w.then(function(x){if(x.objectStoreNames.contains(a.storeName)){var E=x.version+1;ee(a);var A=W[a.name],P=A.forages;x.close();for(var k=0;k<P.length;k++){var z=P[k];z._dbInfo.db=null,z._dbInfo.version=E}var H=new y(function(K,ue){var oe=d.open(a.name,E);oe.onerror=function(ge){var yt=oe.result;yt.close(),ue(ge)},oe.onupgradeneeded=function(){var ge=oe.result;ge.deleteObjectStore(a.storeName)},oe.onsuccess=function(){var ge=oe.result;ge.close(),K(ge)}});return H.then(function(K){A.db=K;for(var ue=0;ue<P.length;ue++){var oe=P[ue];oe._dbInfo.db=K,ie(oe._dbInfo)}}).catch(function(K){throw(N(a,K)||y.resolve()).catch(function(){}),K})}}):g=w.then(function(x){ee(a);var E=W[a.name],A=E.forages;x.close();for(var P=0;P<A.length;P++){var k=A[P];k._dbInfo.db=null}var z=new y(function(H,K){var ue=d.deleteDatabase(a.name);ue.onerror=function(){var oe=ue.result;oe&&oe.close(),K(ue.error)},ue.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},ue.onsuccess=function(){var oe=ue.result;oe&&oe.close(),H(oe)}});return z.then(function(H){E.db=H;for(var K=0;K<A.length;K++){var ue=A[K];ie(ue._dbInfo)}}).catch(function(H){throw(N(a,H)||y.resolve()).catch(function(){}),H})})}return b(g,f),g}var Vi={_driver:"asyncStorage",_initStorage:ke,_support:m(),iterate:We,getItem:Se,setItem:Te,removeItem:fe,clear:be,length:He,key:nt,keys:Hi,dropInstance:Yi};function Ki(){return typeof openDatabase=="function"}var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ji="~~local_forage_type~",zn=/^~~local_forage_type~([^~]+)~/,Wt="__lfsc__:",Pr=Wt.length,Sr="arbf",Tr="blob",qn="si08",Wn="ui08",Hn="uic8",Yn="si16",Vn="si32",Kn="ur16",Jn="ui32",Xn="fl32",Qn="fl64",Zn=Pr+Sr.length,es=Object.prototype.toString;function ts(a){var f=a.length*.75,l=a.length,h,g=0,p,w,x,E;a[a.length-1]==="="&&(f--,a[a.length-2]==="="&&f--);var A=new ArrayBuffer(f),P=new Uint8Array(A);for(h=0;h<l;h+=4)p=De.indexOf(a[h]),w=De.indexOf(a[h+1]),x=De.indexOf(a[h+2]),E=De.indexOf(a[h+3]),P[g++]=p<<2|w>>4,P[g++]=(w&15)<<4|x>>2,P[g++]=(x&3)<<6|E&63;return A}function Cr(a){var f=new Uint8Array(a),l="",h;for(h=0;h<f.length;h+=3)l+=De[f[h]>>2],l+=De[(f[h]&3)<<4|f[h+1]>>4],l+=De[(f[h+1]&15)<<2|f[h+2]>>6],l+=De[f[h+2]&63];return f.length%3===2?l=l.substring(0,l.length-1)+"=":f.length%3===1&&(l=l.substring(0,l.length-2)+"=="),l}function Xi(a,f){var l="";if(a&&(l=es.call(a)),a&&(l==="[object ArrayBuffer]"||a.buffer&&es.call(a.buffer)==="[object ArrayBuffer]")){var h,g=Wt;a instanceof ArrayBuffer?(h=a,g+=Sr):(h=a.buffer,l==="[object Int8Array]"?g+=qn:l==="[object Uint8Array]"?g+=Wn:l==="[object Uint8ClampedArray]"?g+=Hn:l==="[object Int16Array]"?g+=Yn:l==="[object Uint16Array]"?g+=Kn:l==="[object Int32Array]"?g+=Vn:l==="[object Uint32Array]"?g+=Jn:l==="[object Float32Array]"?g+=Xn:l==="[object Float64Array]"?g+=Qn:f(new Error("Failed to get type for BinaryArray"))),f(g+Cr(h))}else if(l==="[object Blob]"){var p=new FileReader;p.onload=function(){var w=Ji+a.type+"~"+Cr(this.result);f(Wt+Tr+w)},p.readAsArrayBuffer(a)}else try{f(JSON.stringify(a))}catch(w){console.error("Couldn't convert value into a JSON string: ",a),f(null,w)}}function Qi(a){if(a.substring(0,Pr)!==Wt)return JSON.parse(a);var f=a.substring(Zn),l=a.substring(Pr,Zn),h;if(l===Tr&&zn.test(f)){var g=f.match(zn);h=g[1],f=f.substring(g[0].length)}var p=ts(f);switch(l){case Sr:return p;case Tr:return v([p],{type:h});case qn:return new Int8Array(p);case Wn:return new Uint8Array(p);case Hn:return new Uint8ClampedArray(p);case Yn:return new Int16Array(p);case Kn:return new Uint16Array(p);case Vn:return new Int32Array(p);case Jn:return new Uint32Array(p);case Xn:return new Float32Array(p);case Qn:return new Float64Array(p);default:throw new Error("Unkown type: "+l)}}var Or={serialize:Xi,deserialize:Qi,stringToBuffer:ts,bufferToString:Cr};function rs(a,f,l,h){a.executeSql("CREATE TABLE IF NOT EXISTS "+f.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],l,h)}function Zi(a){var f=this,l={db:null};if(a)for(var h in a)l[h]=typeof a[h]!="string"?a[h].toString():a[h];var g=new y(function(p,w){try{l.db=openDatabase(l.name,String(l.version),l.description,l.size)}catch(x){return w(x)}l.db.transaction(function(x){rs(x,l,function(){f._dbInfo=l,p()},function(E,A){w(A)})},w)});return l.serializer=Or,g}function $e(a,f,l,h,g,p){a.executeSql(l,h,g,function(w,x){x.code===x.SYNTAX_ERR?w.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[f.storeName],function(E,A){A.rows.length?p(E,x):rs(E,f,function(){E.executeSql(l,h,g,p)},p)},p):p(w,x)},p)}function ea(a,f){var l=this;a=M(a);var h=new y(function(g,p){l.ready().then(function(){var w=l._dbInfo;w.db.transaction(function(x){$e(x,w,"SELECT * FROM "+w.storeName+" WHERE key = ? LIMIT 1",[a],function(E,A){var P=A.rows.length?A.rows.item(0).value:null;P&&(P=w.serializer.deserialize(P)),g(P)},function(E,A){p(A)})})}).catch(p)});return b(h,f),h}function ta(a,f){var l=this,h=new y(function(g,p){l.ready().then(function(){var w=l._dbInfo;w.db.transaction(function(x){$e(x,w,"SELECT * FROM "+w.storeName,[],function(E,A){for(var P=A.rows,k=P.length,z=0;z<k;z++){var H=P.item(z),K=H.value;if(K&&(K=w.serializer.deserialize(K)),K=a(K,H.key,z+1),K!==void 0){g(K);return}}g()},function(E,A){p(A)})})}).catch(p)});return b(h,f),h}function ns(a,f,l,h){var g=this;a=M(a);var p=new y(function(w,x){g.ready().then(function(){f===void 0&&(f=null);var E=f,A=g._dbInfo;A.serializer.serialize(f,function(P,k){k?x(k):A.db.transaction(function(z){$e(z,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[a,P],function(){w(E)},function(H,K){x(K)})},function(z){if(z.code===z.QUOTA_ERR){if(h>0){w(ns.apply(g,[a,E,l,h-1]));return}x(z)}})})}).catch(x)});return b(p,l),p}function ra(a,f,l){return ns.apply(this,[a,f,l,1])}function na(a,f){var l=this;a=M(a);var h=new y(function(g,p){l.ready().then(function(){var w=l._dbInfo;w.db.transaction(function(x){$e(x,w,"DELETE FROM "+w.storeName+" WHERE key = ?",[a],function(){g()},function(E,A){p(A)})})}).catch(p)});return b(h,f),h}function sa(a){var f=this,l=new y(function(h,g){f.ready().then(function(){var p=f._dbInfo;p.db.transaction(function(w){$e(w,p,"DELETE FROM "+p.storeName,[],function(){h()},function(x,E){g(E)})})}).catch(g)});return b(l,a),l}function oa(a){var f=this,l=new y(function(h,g){f.ready().then(function(){var p=f._dbInfo;p.db.transaction(function(w){$e(w,p,"SELECT COUNT(key) as c FROM "+p.storeName,[],function(x,E){var A=E.rows.item(0).c;h(A)},function(x,E){g(E)})})}).catch(g)});return b(l,a),l}function ia(a,f){var l=this,h=new y(function(g,p){l.ready().then(function(){var w=l._dbInfo;w.db.transaction(function(x){$e(x,w,"SELECT key FROM "+w.storeName+" WHERE id = ? LIMIT 1",[a+1],function(E,A){var P=A.rows.length?A.rows.item(0).key:null;g(P)},function(E,A){p(A)})})}).catch(p)});return b(h,f),h}function aa(a){var f=this,l=new y(function(h,g){f.ready().then(function(){var p=f._dbInfo;p.db.transaction(function(w){$e(w,p,"SELECT key FROM "+p.storeName,[],function(x,E){for(var A=[],P=0;P<E.rows.length;P++)A.push(E.rows.item(P).key);h(A)},function(x,E){g(E)})})}).catch(g)});return b(l,a),l}function ua(a){return new y(function(f,l){a.transaction(function(h){h.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(g,p){for(var w=[],x=0;x<p.rows.length;x++)w.push(p.rows.item(x).name);f({db:a,storeNames:w})},function(g,p){l(p)})},function(h){l(h)})})}function ca(a,f){f=F.apply(this,arguments);var l=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||l.name,a.storeName=a.storeName||l.storeName);var h=this,g;return a.name?g=new y(function(p){var w;a.name===l.name?w=h._dbInfo.db:w=openDatabase(a.name,"","",0),a.storeName?p({db:w,storeNames:[a.storeName]}):p(ua(w))}).then(function(p){return new y(function(w,x){p.db.transaction(function(E){function A(H){return new y(function(K,ue){E.executeSql("DROP TABLE IF EXISTS "+H,[],function(){K()},function(oe,ge){ue(ge)})})}for(var P=[],k=0,z=p.storeNames.length;k<z;k++)P.push(A(p.storeNames[k]));y.all(P).then(function(){w()}).catch(function(H){x(H)})},function(E){x(E)})})}):g=y.reject("Invalid arguments"),b(g,f),g}var la={_driver:"webSQLStorage",_initStorage:Zi,_support:Ki(),iterate:ta,getItem:ea,setItem:ra,removeItem:na,clear:sa,length:oa,key:ia,keys:aa,dropInstance:ca};function fa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ss(a,f){var l=a.name+"/";return a.storeName!==f.storeName&&(l+=a.storeName+"/"),l}function da(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch{return!0}}function pa(){return!da()||localStorage.length>0}function ha(a){var f=this,l={};if(a)for(var h in a)l[h]=a[h];return l.keyPrefix=ss(a,f._defaultConfig),pa()?(f._dbInfo=l,l.serializer=Or,y.resolve()):y.reject()}function ma(a){var f=this,l=f.ready().then(function(){for(var h=f._dbInfo.keyPrefix,g=localStorage.length-1;g>=0;g--){var p=localStorage.key(g);p.indexOf(h)===0&&localStorage.removeItem(p)}});return b(l,a),l}function ga(a,f){var l=this;a=M(a);var h=l.ready().then(function(){var g=l._dbInfo,p=localStorage.getItem(g.keyPrefix+a);return p&&(p=g.serializer.deserialize(p)),p});return b(h,f),h}function ya(a,f){var l=this,h=l.ready().then(function(){for(var g=l._dbInfo,p=g.keyPrefix,w=p.length,x=localStorage.length,E=1,A=0;A<x;A++){var P=localStorage.key(A);if(P.indexOf(p)===0){var k=localStorage.getItem(P);if(k&&(k=g.serializer.deserialize(k)),k=a(k,P.substring(w),E++),k!==void 0)return k}}});return b(h,f),h}function va(a,f){var l=this,h=l.ready().then(function(){var g=l._dbInfo,p;try{p=localStorage.key(a)}catch{p=null}return p&&(p=p.substring(g.keyPrefix.length)),p});return b(h,f),h}function wa(a){var f=this,l=f.ready().then(function(){for(var h=f._dbInfo,g=localStorage.length,p=[],w=0;w<g;w++){var x=localStorage.key(w);x.indexOf(h.keyPrefix)===0&&p.push(x.substring(h.keyPrefix.length))}return p});return b(l,a),l}function ba(a){var f=this,l=f.keys().then(function(h){return h.length});return b(l,a),l}function xa(a,f){var l=this;a=M(a);var h=l.ready().then(function(){var g=l._dbInfo;localStorage.removeItem(g.keyPrefix+a)});return b(h,f),h}function _a(a,f,l){var h=this;a=M(a);var g=h.ready().then(function(){f===void 0&&(f=null);var p=f;return new y(function(w,x){var E=h._dbInfo;E.serializer.serialize(f,function(A,P){if(P)x(P);else try{localStorage.setItem(E.keyPrefix+a,A),w(p)}catch(k){(k.name==="QuotaExceededError"||k.name==="NS_ERROR_DOM_QUOTA_REACHED")&&x(k),x(k)}})})});return b(g,l),g}function Ea(a,f){if(f=F.apply(this,arguments),a=typeof a!="function"&&a||{},!a.name){var l=this.config();a.name=a.name||l.name,a.storeName=a.storeName||l.storeName}var h=this,g;return a.name?g=new y(function(p){a.storeName?p(ss(a,h._defaultConfig)):p(a.name+"/")}).then(function(p){for(var w=localStorage.length-1;w>=0;w--){var x=localStorage.key(w);x.indexOf(p)===0&&localStorage.removeItem(x)}}):g=y.reject("Invalid arguments"),b(g,f),g}var Aa={_driver:"localStorageWrapper",_initStorage:ha,_support:fa(),iterate:ya,getItem:ga,setItem:_a,removeItem:xa,clear:ma,length:ba,key:va,keys:wa,dropInstance:Ea},Ia=function(f,l){return f===l||typeof f=="number"&&typeof l=="number"&&isNaN(f)&&isNaN(l)},Pa=function(f,l){for(var h=f.length,g=0;g<h;){if(Ia(f[g],l))return!0;g++}return!1},os=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},gt={},is={},st={INDEXEDDB:Vi,WEBSQL:la,LOCALSTORAGE:Aa},Sa=[st.INDEXEDDB._driver,st.WEBSQL._driver,st.LOCALSTORAGE._driver],Ht=["dropInstance"],Mr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ht),Ta={description:"",driver:Sa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ca(a,f){a[f]=function(){var l=arguments;return a.ready().then(function(){return a[f].apply(a,l)})}}function Rr(){for(var a=1;a<arguments.length;a++){var f=arguments[a];if(f)for(var l in f)f.hasOwnProperty(l)&&(os(f[l])?arguments[0][l]=f[l].slice():arguments[0][l]=f[l])}return arguments[0]}var Oa=function(){function a(f){u(this,a);for(var l in st)if(st.hasOwnProperty(l)){var h=st[l],g=h._driver;this[l]=g,gt[g]||this.defineDriver(h)}this._defaultConfig=Rr({},Ta),this._config=Rr({},this._defaultConfig,f),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(l){if((typeof l>"u"?"undefined":i(l))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var h in l){if(h==="storeName"&&(l[h]=l[h].replace(/\W/g,"_")),h==="version"&&typeof l[h]!="number")return new Error("Database version must be a number.");this._config[h]=l[h]}return"driver"in l&&l.driver?this.setDriver(this._config.driver):!0}else return typeof l=="string"?this._config[l]:this._config},a.prototype.defineDriver=function(l,h,g){var p=new y(function(w,x){try{var E=l._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!l._driver){x(A);return}for(var P=Mr.concat("_initStorage"),k=0,z=P.length;k<z;k++){var H=P[k],K=!Pa(Ht,H);if((K||l[H])&&typeof l[H]!="function"){x(A);return}}var ue=function(){for(var yt=function(Na){return function(){var La=new Error("Method "+Na+" is not implemented by the current driver"),as=y.reject(La);return b(as,arguments[arguments.length-1]),as}},Nr=0,Ra=Ht.length;Nr<Ra;Nr++){var Lr=Ht[Nr];l[Lr]||(l[Lr]=yt(Lr))}};ue();var oe=function(yt){gt[E]&&console.info("Redefining LocalForage driver: "+E),gt[E]=l,is[E]=yt,w()};"_support"in l?l._support&&typeof l._support=="function"?l._support().then(oe,x):oe(!!l._support):oe(!0)}catch(ge){x(ge)}});return T(p,h,g),p},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(l,h,g){var p=gt[l]?y.resolve(gt[l]):y.reject(new Error("Driver not found."));return T(p,h,g),p},a.prototype.getSerializer=function(l){var h=y.resolve(Or);return T(h,l),h},a.prototype.ready=function(l){var h=this,g=h._driverSet.then(function(){return h._ready===null&&(h._ready=h._initDriver()),h._ready});return T(g,l,l),g},a.prototype.setDriver=function(l,h,g){var p=this;os(l)||(l=[l]);var w=this._getSupportedDrivers(l);function x(){p._config.driver=p.driver()}function E(k){return p._extend(k),x(),p._ready=p._initStorage(p._config),p._ready}function A(k){return function(){var z=0;function H(){for(;z<k.length;){var K=k[z];return z++,p._dbInfo=null,p._ready=null,p.getDriver(K).then(E).catch(H)}x();var ue=new Error("No available storage method found.");return p._driverSet=y.reject(ue),p._driverSet}return H()}}var P=this._driverSet!==null?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=P.then(function(){var k=w[0];return p._dbInfo=null,p._ready=null,p.getDriver(k).then(function(z){p._driver=z._driver,x(),p._wrapLibraryMethodsWithReady(),p._initDriver=A(w)})}).catch(function(){x();var k=new Error("No available storage method found.");return p._driverSet=y.reject(k),p._driverSet}),T(this._driverSet,h,g),this._driverSet},a.prototype.supports=function(l){return!!is[l]},a.prototype._extend=function(l){Rr(this,l)},a.prototype._getSupportedDrivers=function(l){for(var h=[],g=0,p=l.length;g<p;g++){var w=l[g];this.supports(w)&&h.push(w)}return h},a.prototype._wrapLibraryMethodsWithReady=function(){for(var l=0,h=Mr.length;l<h;l++)Ca(this,Mr[l])},a.prototype.createInstance=function(l){return new a(l)},a}(),Ma=new Oa;s.exports=Ma},{3:3}]},{},[4])(4)})});var ds=q((Ur,jr)=>{(function(n,e,t){typeof Ur=="object"?(jr.exports=t(),jr.exports.default=t()):typeof define=="function"&&define.amd?define(t):e[n]=t()})("slugify",Ur,function(){var n=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xA2":"cent","\xA3":"pound","\xA4":"currency","\xA5":"yen","\xA9":"(c)","\xAA":"a","\xAE":"(r)","\xBA":"o","\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xC6":"AE","\xC7":"C","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xD0":"D","\xD1":"N","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xDD":"Y","\xDE":"TH","\xDF":"ss","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xE6":"ae","\xE7":"c","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xF0":"d","\xF1":"n","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xFD":"y","\xFE":"th","\xFF":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010C":"C","\u010D":"c","\u010E":"D","\u010F":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011A":"E","\u011B":"e","\u011E":"G","\u011F":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012A":"i","\u012B":"i","\u012E":"I","\u012F":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013B":"L","\u013C":"l","\u013D":"L","\u013E":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014C":"O","\u014D":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015A":"S","\u015B":"s","\u015E":"S","\u015F":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016A":"u","\u016B":"u","\u016E":"U","\u016F":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017A":"z","\u017B":"Z","\u017C":"z","\u017D":"Z","\u017E":"z","\u018F":"E","\u0192":"f","\u01A0":"O","\u01A1":"o","\u01AF":"U","\u01B0":"u","\u01C8":"LJ","\u01C9":"lj","\u01CB":"NJ","\u01CC":"nj","\u0218":"S","\u0219":"s","\u021A":"T","\u021B":"t","\u0259":"e","\u02DA":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038A":"I","\u038C":"O","\u038E":"Y","\u038F":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039A":"K","\u039B":"L","\u039C":"M","\u039D":"N","\u039E":"3","\u039F":"O","\u03A0":"P","\u03A1":"R","\u03A3":"S","\u03A4":"T","\u03A5":"Y","\u03A6":"F","\u03A7":"X","\u03A8":"PS","\u03A9":"W","\u03AA":"I","\u03AB":"Y","\u03AC":"a","\u03AD":"e","\u03AE":"h","\u03AF":"i","\u03B0":"y","\u03B1":"a","\u03B2":"b","\u03B3":"g","\u03B4":"d","\u03B5":"e","\u03B6":"z","\u03B7":"h","\u03B8":"8","\u03B9":"i","\u03BA":"k","\u03BB":"l","\u03BC":"m","\u03BD":"n","\u03BE":"3","\u03BF":"o","\u03C0":"p","\u03C1":"r","\u03C2":"s","\u03C3":"s","\u03C4":"t","\u03C5":"y","\u03C6":"f","\u03C7":"x","\u03C8":"ps","\u03C9":"w","\u03CA":"i","\u03CB":"y","\u03CC":"o","\u03CD":"y","\u03CE":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040A":"NJ","\u040B":"C","\u040F":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041A":"K","\u041B":"L","\u041C":"M","\u041D":"N","\u041E":"O","\u041F":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042A":"U","\u042B":"Y","\u042C":"","\u042D":"E","\u042E":"Yu","\u042F":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043A":"k","\u043B":"l","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044A":"u","\u044B":"y","\u044C":"","\u044D":"e","\u044E":"yu","\u044F":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045A":"nj","\u045B":"c","\u045D":"u","\u045F":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049A":"KH","\u049B":"kh","\u04A2":"NG","\u04A3":"ng","\u04AE":"UE","\u04AF":"ue","\u04B0":"U","\u04B1":"u","\u04BA":"H","\u04BB":"h","\u04D8":"AE","\u04D9":"ae","\u04E8":"OE","\u04E9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E'","\u0538":"Y'","\u0539":"T'","\u053A":"JH","\u053B":"I","\u053C":"L","\u053D":"X","\u053E":"C'","\u053F":"K","\u0540":"H","\u0541":"D'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054A":"P","\u054B":"J","\u054C":"R'","\u054D":"S","\u054E":"V","\u054F":"T","\u0550":"R","\u0551":"C","\u0553":"P'","\u0554":"Q'","\u0555":"O''","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062A":"t","\u062B":"th","\u062C":"j","\u062D":"h","\u062E":"kh","\u062F":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063A":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064A":"y","\u064B":"an","\u064C":"on","\u064D":"en","\u064E":"a","\u064F":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067E":"p","\u0686":"ch","\u0698":"zh","\u06A9":"k","\u06AF":"g","\u06CC":"y","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9","\u0E3F":"baht","\u10D0":"a","\u10D1":"b","\u10D2":"g","\u10D3":"d","\u10D4":"e","\u10D5":"v","\u10D6":"z","\u10D7":"t","\u10D8":"i","\u10D9":"k","\u10DA":"l","\u10DB":"m","\u10DC":"n","\u10DD":"o","\u10DE":"p","\u10DF":"zh","\u10E0":"r","\u10E1":"s","\u10E2":"t","\u10E3":"u","\u10E4":"f","\u10E5":"k","\u10E6":"gh","\u10E7":"q","\u10E8":"sh","\u10E9":"ch","\u10EA":"ts","\u10EB":"dz","\u10EC":"ts","\u10ED":"ch","\u10EE":"kh","\u10EF":"j","\u10F0":"h","\u1E62":"S","\u1E63":"s","\u1E80":"W","\u1E81":"w","\u1E82":"W","\u1E83":"w","\u1E84":"W","\u1E85":"w","\u1E9E":"SS","\u1EA0":"A","\u1EA1":"a","\u1EA2":"A","\u1EA3":"a","\u1EA4":"A","\u1EA5":"a","\u1EA6":"A","\u1EA7":"a","\u1EA8":"A","\u1EA9":"a","\u1EAA":"A","\u1EAB":"a","\u1EAC":"A","\u1EAD":"a","\u1EAE":"A","\u1EAF":"a","\u1EB0":"A","\u1EB1":"a","\u1EB2":"A","\u1EB3":"a","\u1EB4":"A","\u1EB5":"a","\u1EB6":"A","\u1EB7":"a","\u1EB8":"E","\u1EB9":"e","\u1EBA":"E","\u1EBB":"e","\u1EBC":"E","\u1EBD":"e","\u1EBE":"E","\u1EBF":"e","\u1EC0":"E","\u1EC1":"e","\u1EC2":"E","\u1EC3":"e","\u1EC4":"E","\u1EC5":"e","\u1EC6":"E","\u1EC7":"e","\u1EC8":"I","\u1EC9":"i","\u1ECA":"I","\u1ECB":"i","\u1ECC":"O","\u1ECD":"o","\u1ECE":"O","\u1ECF":"o","\u1ED0":"O","\u1ED1":"o","\u1ED2":"O","\u1ED3":"o","\u1ED4":"O","\u1ED5":"o","\u1ED6":"O","\u1ED7":"o","\u1ED8":"O","\u1ED9":"o","\u1EDA":"O","\u1EDB":"o","\u1EDC":"O","\u1EDD":"o","\u1EDE":"O","\u1EDF":"o","\u1EE0":"O","\u1EE1":"o","\u1EE2":"O","\u1EE3":"o","\u1EE4":"U","\u1EE5":"u","\u1EE6":"U","\u1EE7":"u","\u1EE8":"U","\u1EE9":"u","\u1EEA":"U","\u1EEB":"u","\u1EEC":"U","\u1EED":"u","\u1EEE":"U","\u1EEF":"u","\u1EF0":"U","\u1EF1":"u","\u1EF2":"Y","\u1EF3":"y","\u1EF4":"Y","\u1EF5":"y","\u1EF6":"Y","\u1EF7":"y","\u1EF8":"Y","\u1EF9":"y","\u2013":"-","\u2018":"'","\u2019":"'","\u201C":"\\"","\u201D":"\\"","\u201E":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20A0":"ecu","\u20A2":"cruzeiro","\u20A3":"french franc","\u20A4":"lira","\u20A5":"mill","\u20A6":"naira","\u20A7":"peseta","\u20A8":"rupee","\u20A9":"won","\u20AA":"new shequel","\u20AB":"dong","\u20AC":"euro","\u20AD":"kip","\u20AE":"tugrik","\u20AF":"drachma","\u20B0":"penny","\u20B1":"peso","\u20B2":"guarani","\u20B3":"austral","\u20B4":"hryvnia","\u20B5":"cedi","\u20B8":"kazakhstani tenge","\u20B9":"indian rupee","\u20BA":"turkish lira","\u20BD":"russian ruble","\u20BF":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221E":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\uFDFC":"rial","\uFEF5":"laa","\uFEF7":"laa","\uFEF9":"lai","\uFEFB":"la"}`),e=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042A":"A","\u042C":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044A":"a","\u044C":"y"},"de":{"\xC4":"AE","\xE4":"ae","\xD6":"OE","\xF6":"oe","\xDC":"UE","\xFC":"ue","\xDF":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221E":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xA2":"centavos","\xA3":"libras","\xA4":"moneda","\u20A3":"francos","\u2211":"suma","\u221E":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xA2":"centime","\xA3":"livre","\xA4":"devise","\u20A3":"franc","\u2211":"somme","\u221E":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xA2":"centavo","\u2211":"soma","\xA3":"libra","\u221E":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xD8":"OE","\xF8":"oe","\xC5":"AA","\xE5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xF8rre end"},"nb":{"&":"og","\xC5":"AA","\xC6":"AE","\xD8":"OE","\xE5":"aa","\xE6":"ae","\xF8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xC5":"AA","\xC4":"AE","\xD6":"OE","\xE5":"aa","\xE4":"ae","\xF6":"oe"}}');function t(r,s){if(typeof r!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var o=e[s.locale]||{},i=s.replacement===void 0?"-":s.replacement,u=s.trim===void 0?!0:s.trim,c=r.normalize().split("").reduce(function(d,m){var v=o[m];return v===void 0&&(v=n[m]),v===void 0&&(v=m),v===i&&(v=" "),d+v.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(c=c.replace(/[^A-Za-z0-9\s]/g,"")),u&&(c=c.trim()),c=c.replace(/\s+/g,i),s.lower&&(c=c.toLowerCase()),c}return t.extend=function(r){Object.assign(n,r)},t})});var xs=q((qr,Wr)=>{(function(n,e){typeof qr=="object"&&typeof Wr<"u"?Wr.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=e()})(qr,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",s="second",o="minute",i="hour",u="day",c="week",d="month",m="quarter",v="year",y="date",b="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var S=["th","st","nd","rd"],_=N%100;return"["+N+(S[(_-20)%10]||S[_]||S[0])+"]"}},$=function(N,S,_){var L=String(N);return!L||L.length>=S?N:""+Array(S+1-L.length).join(_)+N},Z={s:$,z:function(N){var S=-N.utcOffset(),_=Math.abs(S),L=Math.floor(_/60),C=_%60;return(S<=0?"+":"-")+$(L,2,"0")+":"+$(C,2,"0")},m:function N(S,_){if(S.date()<_.date())return-N(_,S);var L=12*(_.year()-S.year())+(_.month()-S.month()),C=S.clone().add(L,d),j=_-C<0,U=S.clone().add(L+(j?-1:1),d);return+(-(L+(_-C)/(j?C-U:U-C))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y:v,w:c,d:u,D:y,h:i,m:o,s,ms:r,Q:m}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},W="en",le={};le[W]=F;var ne="$isDayjsObject",I=function(N){return N instanceof ee||!(!N||!N[ne])},D=function N(S,_,L){var C;if(!S)return W;if(typeof S=="string"){var j=S.toLowerCase();le[j]&&(C=j),_&&(le[j]=_,C=j);var U=S.split("-");if(!C&&U.length>1)return N(U[0])}else{var V=S.name;le[V]=S,C=V}return!L&&C&&(W=C),C||!L&&W},O=function(N,S){if(I(N))return N.clone();var _=typeof S=="object"?S:{};return _.date=N,_.args=arguments,new ee(_)},R=Z;R.l=D,R.i=I,R.w=function(N,S){return O(N,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var ee=function(){function N(_){this.$L=D(_.locale,null,!0),this.parse(_),this.$x=this.$x||_.x||{},this[ne]=!0}var S=N.prototype;return S.parse=function(_){this.$d=function(L){var C=L.date,j=L.utc;if(C===null)return new Date(NaN);if(R.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var U=C.match(T);if(U){var V=U[2]-1||0,re=(U[7]||"0").substring(0,3);return j?new Date(Date.UTC(U[1],V,U[3]||1,U[4]||0,U[5]||0,U[6]||0,re)):new Date(U[1],V,U[3]||1,U[4]||0,U[5]||0,U[6]||0,re)}}return new Date(C)}(_),this.init()},S.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},S.$utils=function(){return R},S.isValid=function(){return this.$d.toString()!==b},S.isSame=function(_,L){var C=O(_);return this.startOf(L)<=C&&C<=this.endOf(L)},S.isAfter=function(_,L){return O(_)<this.startOf(L)},S.isBefore=function(_,L){return this.endOf(L)<O(_)},S.$g=function(_,L,C){return R.u(_)?this[L]:this.set(C,_)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(_,L){var C=this,j=!!R.u(L)||L,U=R.p(_),V=function(Te,fe){var be=R.w(C.$u?Date.UTC(C.$y,fe,Te):new Date(C.$y,fe,Te),C);return j?be:be.endOf(u)},re=function(Te,fe){return R.w(C.toDate()[Te].apply(C.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(fe)),C)},ae=this.$W,X=this.$M,pe=this.$D,ke="set"+(this.$u?"UTC":"");switch(U){case v:return j?V(1,0):V(31,11);case d:return j?V(1,X):V(0,X+1);case c:var Se=this.$locale().weekStart||0,We=(ae<Se?ae+7:ae)-Se;return V(j?pe-We:pe+(6-We),X);case u:case y:return re(ke+"Hours",0);case i:return re(ke+"Minutes",1);case o:return re(ke+"Seconds",2);case s:return re(ke+"Milliseconds",3);default:return this.clone()}},S.endOf=function(_){return this.startOf(_,!1)},S.$set=function(_,L){var C,j=R.p(_),U="set"+(this.$u?"UTC":""),V=(C={},C[u]=U+"Date",C[y]=U+"Date",C[d]=U+"Month",C[v]=U+"FullYear",C[i]=U+"Hours",C[o]=U+"Minutes",C[s]=U+"Seconds",C[r]=U+"Milliseconds",C)[j],re=j===u?this.$D+(L-this.$W):L;if(j===d||j===v){var ae=this.clone().set(y,1);ae.$d[V](re),ae.init(),this.$d=ae.set(y,Math.min(this.$D,ae.daysInMonth())).$d}else V&&this.$d[V](re);return this.init(),this},S.set=function(_,L){return this.clone().$set(_,L)},S.get=function(_){return this[R.p(_)]()},S.add=function(_,L){var C,j=this;_=Number(_);var U=R.p(L),V=function(X){var pe=O(j);return R.w(pe.date(pe.date()+Math.round(X*_)),j)};if(U===d)return this.set(d,this.$M+_);if(U===v)return this.set(v,this.$y+_);if(U===u)return V(1);if(U===c)return V(7);var re=(C={},C[o]=e,C[i]=t,C[s]=n,C)[U]||1,ae=this.$d.getTime()+_*re;return R.w(ae,this)},S.subtract=function(_,L){return this.add(-1*_,L)},S.format=function(_){var L=this,C=this.$locale();if(!this.isValid())return C.invalidDate||b;var j=_||"YYYY-MM-DDTHH:mm:ssZ",U=R.z(this),V=this.$H,re=this.$m,ae=this.$M,X=C.weekdays,pe=C.months,ke=C.meridiem,Se=function(fe,be,He,nt){return fe&&(fe[be]||fe(L,j))||He[be].slice(0,nt)},We=function(fe){return R.s(V%12||12,fe,"0")},Te=ke||function(fe,be,He){var nt=fe<12?"AM":"PM";return He?nt.toLowerCase():nt};return j.replace(M,function(fe,be){return be||function(He){switch(He){case"YY":return String(L.$y).slice(-2);case"YYYY":return R.s(L.$y,4,"0");case"M":return ae+1;case"MM":return R.s(ae+1,2,"0");case"MMM":return Se(C.monthsShort,ae,pe,3);case"MMMM":return Se(pe,ae);case"D":return L.$D;case"DD":return R.s(L.$D,2,"0");case"d":return String(L.$W);case"dd":return Se(C.weekdaysMin,L.$W,X,2);case"ddd":return Se(C.weekdaysShort,L.$W,X,3);case"dddd":return X[L.$W];case"H":return String(V);case"HH":return R.s(V,2,"0");case"h":return We(1);case"hh":return We(2);case"a":return Te(V,re,!0);case"A":return Te(V,re,!1);case"m":return String(re);case"mm":return R.s(re,2,"0");case"s":return String(L.$s);case"ss":return R.s(L.$s,2,"0");case"SSS":return R.s(L.$ms,3,"0");case"Z":return U}return null}(fe)||U.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(_,L,C){var j,U=this,V=R.p(L),re=O(_),ae=(re.utcOffset()-this.utcOffset())*e,X=this-re,pe=function(){return R.m(U,re)};switch(V){case v:j=pe()/12;break;case d:j=pe();break;case m:j=pe()/3;break;case c:j=(X-ae)/6048e5;break;case u:j=(X-ae)/864e5;break;case i:j=X/t;break;case o:j=X/e;break;case s:j=X/n;break;default:j=X}return C?j:R.a(j)},S.daysInMonth=function(){return this.endOf(d).$D},S.$locale=function(){return le[this.$L]},S.locale=function(_,L){if(!_)return this.$L;var C=this.clone(),j=D(_,L,!0);return j&&(C.$L=j),C},S.clone=function(){return R.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},N}(),ie=ee.prototype;return O.prototype=ie,[["$ms",r],["$s",s],["$m",o],["$H",i],["$W",u],["$M",d],["$y",v],["$D",y]].forEach(function(N){ie[N[1]]=function(S){return this.$g(S,N[0],N[1])}}),O.extend=function(N,S){return N.$i||(N(S,ee,O),N.$i=!0),O},O.locale=D,O.isDayjs=I,O.unix=function(N){return O(1e3*N)},O.en=le[W],O.Ls=le,O.p={},O})});var Zs=q((Cf,dn)=>{"use strict";var Xs=n=>typeof n=="object"&&n!==null,Qs=Symbol("skip"),Js=n=>Xs(n)&&!(n instanceof RegExp)&&!(n instanceof Error)&&!(n instanceof Date),fn=(n,e,t,r=new WeakMap)=>{if(t={deep:!1,target:{},...t},r.has(n))return r.get(n);r.set(n,t.target);let{target:s}=t;delete t.target;let o=i=>i.map(u=>Js(u)?fn(u,e,t,r):u);if(Array.isArray(n))return o(n);for(let[i,u]of Object.entries(n)){let c=e(i,u,n);if(c===Qs)continue;let[d,m,{shouldRecurse:v=!0}={}]=c;d!=="__proto__"&&(t.deep&&v&&Js(m)&&(m=Array.isArray(m)?o(m):fn(m,e,t,r)),s[d]=m)}return s};dn.exports=(n,e,t)=>{if(!Xs(n))throw new TypeError(`Expected an object, got \`${n}\` (${typeof n})`);return fn(n,e,t)};dn.exports.mapObjectSkip=Qs});var mn={};us(mn,{__addDisposableResource:()=>xo,__assign:()=>ir,__asyncDelegator:()=>po,__asyncGenerator:()=>fo,__asyncValues:()=>ho,__await:()=>at,__awaiter:()=>oo,__classPrivateFieldGet:()=>vo,__classPrivateFieldIn:()=>bo,__classPrivateFieldSet:()=>wo,__createBinding:()=>ur,__decorate:()=>ro,__disposeResources:()=>_o,__esDecorate:()=>Yu,__exportStar:()=>ao,__extends:()=>eo,__generator:()=>io,__importDefault:()=>yo,__importStar:()=>go,__makeTemplateObject:()=>mo,__metadata:()=>so,__param:()=>no,__propKey:()=>Ku,__read:()=>hn,__rest:()=>to,__runInitializers:()=>Vu,__setFunctionName:()=>Ju,__spread:()=>uo,__spreadArray:()=>lo,__spreadArrays:()=>co,__values:()=>ar,default:()=>Zu});function eo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pn(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function to(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function ro(n,e,t,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(i=n[u])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o}function no(n,e){return function(t,r){e(t,r,n)}}function Yu(n,e,t,r,s,o){function i($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var u=r.kind,c=u==="getter"?"get":u==="setter"?"set":"value",d=!e&&n?r.static?n:n.prototype:null,m=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),v,y=!1,b=t.length-1;b>=0;b--){var T={};for(var M in r)T[M]=M==="access"?{}:r[M];for(var M in r.access)T.access[M]=r.access[M];T.addInitializer=function($){if(y)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i($||null))};var F=(0,t[b])(u==="accessor"?{get:m.get,set:m.set}:m[c],T);if(u==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(v=i(F.get))&&(m.get=v),(v=i(F.set))&&(m.set=v),(v=i(F.init))&&s.unshift(v)}else(v=i(F))&&(u==="field"?s.unshift(v):m[c]=v)}d&&Object.defineProperty(d,r.name,m),y=!0}function Vu(n,e,t){for(var r=arguments.length>2,s=0;s<e.length;s++)t=r?e[s].call(n,t):e[s].call(n);return r?t:void 0}function Ku(n){return typeof n=="symbol"?n:"".concat(n)}function Ju(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function so(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function oo(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function u(m){try{d(r.next(m))}catch(v){i(v)}}function c(m){try{d(r.throw(m))}catch(v){i(v)}}function d(m){m.done?o(m.value):s(m.value).then(u,c)}d((r=r.apply(n,e||[])).next())})}function io(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(d){return function(m){return c([d,m])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(t=0)),t;)try{if(r=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(m){d=[6,m],s=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ao(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ur(e,n,t)}function ar(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hn(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(u){i={error:u}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o}function uo(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(hn(arguments[e]));return n}function co(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var o=arguments[e],i=0,u=o.length;i<u;i++,s++)r[s]=o[i];return r}function lo(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function fo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(y){r[y]&&(s[y]=function(b){return new Promise(function(T,M){o.push([y,b,T,M])>1||u(y,b)})})}function u(y,b){try{c(r[y](b))}catch(T){v(o[0][3],T)}}function c(y){y.value instanceof at?Promise.resolve(y.value.v).then(d,m):v(o[0][2],y)}function d(y){u("next",y)}function m(y){u("throw",y)}function v(y,b){y(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function po(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=n[s]?function(i){return(t=!t)?{value:at(n[s](i)),done:!1}:o?o(i):i}:o}}function ho(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ar=="function"?ar(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(i){return new Promise(function(u,c){i=n[o](i),s(u,c,i.done,i.value)})}}function s(o,i,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},i)}}function mo(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function go(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&ur(e,n,t);return Xu(e,n),e}function yo(n){return n&&n.__esModule?n:{default:n}}function vo(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function wo(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}function bo(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function xo(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}function _o(n){function e(r){n.error=n.hasError?new Qu(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}function t(){for(;n.stack.length;){var r=n.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(t,function(o){return e(o),t()})}catch(o){e(o)}}if(n.hasError)throw n.error}return t()}var pn,ir,ur,Xu,Qu,Zu,gn=ja(()=>{pn=function(n,e){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},pn(n,e)};ir=function(){return ir=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ir.apply(this,arguments)};ur=Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};Xu=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e};Qu=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};Zu={__extends:eo,__assign:ir,__rest:to,__decorate:ro,__param:no,__metadata:so,__awaiter:oo,__generator:io,__createBinding:ur,__exportStar:ao,__values:ar,__read:hn,__spread:uo,__spreadArrays:co,__spreadArray:lo,__await:at,__asyncGenerator:fo,__asyncDelegator:po,__asyncValues:ho,__makeTemplateObject:mo,__importStar:go,__importDefault:yo,__classPrivateFieldGet:vo,__classPrivateFieldSet:wo,__classPrivateFieldIn:bo,__addDisposableResource:xo,__disposeResources:_o}});var Eo=q(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.lowerCase=ut.localeLowerCase=void 0;var ec={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{\u0130:"i",I:"\u0131",I\u0307:"i"}},az:{regexp:/\u0130/g,map:{\u0130:"i",I:"\u0131",I\u0307:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i\u0307",J:"j\u0307",\u012E:"\u012F\u0307",\u00CC:"i\u0307\u0300",\u00CD:"i\u0307\u0301",\u0128:"i\u0307\u0303"}}};function tc(n,e){var t=ec[e.toLowerCase()];return yn(t?n.replace(t.regexp,function(r){return t.map[r]}):n)}ut.localeLowerCase=tc;function yn(n){return n.toLowerCase()}ut.lowerCase=yn});var Io=q(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.noCase=void 0;var rc=Eo(),nc=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],sc=/[^A-Z0-9]+/gi;function oc(n,e){e===void 0&&(e={});for(var t=e.splitRegexp,r=t===void 0?nc:t,s=e.stripRegexp,o=s===void 0?sc:s,i=e.transform,u=i===void 0?rc.lowerCase:i,c=e.delimiter,d=c===void 0?" ":c,m=Ao(Ao(n,r,"$1\0$2"),o,"\0"),v=0,y=m.length;m.charAt(v)==="\0";)v++;for(;m.charAt(y-1)==="\0";)y--;return m.slice(v,y).split("\0").map(u).join(d)}cr.noCase=oc;function Ao(n,e,t){return e instanceof RegExp?n.replace(e,t):e.reduce(function(r,s){return r.replace(s,t)},n)}});var Po=q(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.dotCase=void 0;var ic=(gn(),kr(mn)),ac=Io();function uc(n,e){return e===void 0&&(e={}),ac.noCase(n,ic.__assign({delimiter:"."},e))}lr.dotCase=uc});var So=q(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.snakeCase=void 0;var cc=(gn(),kr(mn)),lc=Po();function fc(n,e){return e===void 0&&(e={}),lc.dotCase(n,cc.__assign({delimiter:"_"},e))}fr.snakeCase=fc});var Co=q((Lf,To)=>{"use strict";var dc=Zs(),{snakeCase:pc}=So();To.exports=function(n,e){if(Array.isArray(n)&&n.some(t=>t.constructor!==Object))throw new Error("obj must be array of plain objects");if(n.constructor!==Object)throw new Error("obj must be an plain object");return e=Object.assign({deep:!0,exclude:[],parsingOptions:{}},e),dc(n,function(t,r){return[hc(e.exclude,t)?t:pc(t,e.parsingOptions),r,mc(t,r,e)]},e)};function hc(n,e){return n.some(function(t){return typeof t=="string"?t===e:t.test(e)})}function mc(n,e,t){return t.shouldRecurse?{shouldRecurse:t.shouldRecurse(n,e)}:void 0}});var ko=q((Kf,Lo)=>{Lo.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var je=q(Ze=>{var vn,gc=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ze.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ze.getSymbolTotalCodewords=function(e){return gc[e]};Ze.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Ze.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');vn=e};Ze.isKanjiModeEnabled=function(){return typeof vn<"u"};Ze.toSJIS=function(e){return vn(e)}});var pr=q(ve=>{ve.L={bit:1};ve.M={bit:0};ve.Q={bit:3};ve.H={bit:2};function yc(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return ve.L;case"m":case"medium":return ve.M;case"q":case"quartile":return ve.Q;case"h":case"high":return ve.H;default:throw new Error("Unknown EC Level: "+n)}}ve.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};ve.from=function(e,t){if(ve.isValid(e))return e;try{return yc(e)}catch{return t}}});var Bo=q((Qf,$o)=>{function Do(){this.buffer=[],this.length=0}Do.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};$o.exports=Do});var jo=q((Zf,Uo)=>{function Rt(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Rt.prototype.set=function(n,e,t,r){let s=n*this.size+e;this.data[s]=t,r&&(this.reservedBit[s]=!0)};Rt.prototype.get=function(n,e){return this.data[n*this.size+e]};Rt.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Rt.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};Uo.exports=Rt});var Go=q(hr=>{var vc=je().getSymbolSize;hr.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=vc(e),s=r===145?26:Math.ceil((r-13)/(2*t-2))*2,o=[r-7];for(let i=1;i<t-1;i++)o[i]=o[i-1]-s;return o.push(6),o.reverse()};hr.getPositions=function(e){let t=[],r=hr.getRowColCoords(e),s=r.length;for(let o=0;o<s;o++)for(let i=0;i<s;i++)o===0&&i===0||o===0&&i===s-1||o===s-1&&i===0||t.push([r[o],r[i]]);return t}});var qo=q(zo=>{var wc=je().getSymbolSize,Fo=7;zo.getPositions=function(e){let t=wc(e);return[[0,0],[t-Fo,0],[0,t-Fo]]}});var Wo=q(Q=>{Q.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var et={N1:3,N2:3,N3:40,N4:10};Q.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};Q.from=function(e){return Q.isValid(e)?parseInt(e,10):void 0};Q.getPenaltyN1=function(e){let t=e.size,r=0,s=0,o=0,i=null,u=null;for(let c=0;c<t;c++){s=o=0,i=u=null;for(let d=0;d<t;d++){let m=e.get(c,d);m===i?s++:(s>=5&&(r+=et.N1+(s-5)),i=m,s=1),m=e.get(d,c),m===u?o++:(o>=5&&(r+=et.N1+(o-5)),u=m,o=1)}s>=5&&(r+=et.N1+(s-5)),o>=5&&(r+=et.N1+(o-5))}return r};Q.getPenaltyN2=function(e){let t=e.size,r=0;for(let s=0;s<t-1;s++)for(let o=0;o<t-1;o++){let i=e.get(s,o)+e.get(s,o+1)+e.get(s+1,o)+e.get(s+1,o+1);(i===4||i===0)&&r++}return r*et.N2};Q.getPenaltyN3=function(e){let t=e.size,r=0,s=0,o=0;for(let i=0;i<t;i++){s=o=0;for(let u=0;u<t;u++)s=s<<1&2047|e.get(i,u),u>=10&&(s===1488||s===93)&&r++,o=o<<1&2047|e.get(u,i),u>=10&&(o===1488||o===93)&&r++}return r*et.N3};Q.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let o=0;o<r;o++)t+=e.data[o];return Math.abs(Math.ceil(t*100/r/5)-10)*et.N4};function bc(n,e,t){switch(n){case Q.Patterns.PATTERN000:return(e+t)%2===0;case Q.Patterns.PATTERN001:return e%2===0;case Q.Patterns.PATTERN010:return t%3===0;case Q.Patterns.PATTERN011:return(e+t)%3===0;case Q.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case Q.Patterns.PATTERN101:return e*t%2+e*t%3===0;case Q.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case Q.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}Q.applyMask=function(e,t){let r=t.size;for(let s=0;s<r;s++)for(let o=0;o<r;o++)t.isReserved(o,s)||t.xor(o,s,bc(e,o,s))};Q.getBestMask=function(e,t){let r=Object.keys(Q.Patterns).length,s=0,o=1/0;for(let i=0;i<r;i++){t(i),Q.applyMask(i,e);let u=Q.getPenaltyN1(e)+Q.getPenaltyN2(e)+Q.getPenaltyN3(e)+Q.getPenaltyN4(e);Q.applyMask(i,e),u<o&&(o=u,s=i)}return s}});var bn=q(wn=>{var Ge=pr(),mr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],gr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];wn.getBlocksCount=function(e,t){switch(t){case Ge.L:return mr[(e-1)*4+0];case Ge.M:return mr[(e-1)*4+1];case Ge.Q:return mr[(e-1)*4+2];case Ge.H:return mr[(e-1)*4+3];default:return}};wn.getTotalCodewordsCount=function(e,t){switch(t){case Ge.L:return gr[(e-1)*4+0];case Ge.M:return gr[(e-1)*4+1];case Ge.Q:return gr[(e-1)*4+2];case Ge.H:return gr[(e-1)*4+3];default:return}}});var Ho=q(vr=>{var Nt=new Uint8Array(512),yr=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Nt[t]=e,yr[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Nt[t]=Nt[t-255]})();vr.log=function(e){if(e<1)throw new Error("log("+e+")");return yr[e]};vr.exp=function(e){return Nt[e]};vr.mul=function(e,t){return e===0||t===0?0:Nt[yr[e]+yr[t]]}});var Yo=q(Lt=>{var xn=Ho();Lt.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let o=0;o<t.length;o++)r[s+o]^=xn.mul(e[s],t[o]);return r};Lt.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let s=r[0];for(let i=0;i<t.length;i++)r[i]^=xn.mul(t[i],s);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};Lt.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=Lt.mul(t,new Uint8Array([1,xn.exp(r)]));return t}});var Jo=q((id,Ko)=>{var Vo=Yo();function _n(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}_n.prototype.initialize=function(e){this.degree=e,this.genPoly=Vo.generateECPolynomial(this.degree)};_n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=Vo.mod(t,this.genPoly),s=this.degree-r.length;if(s>0){let o=new Uint8Array(this.degree);return o.set(r,s),o}return r};Ko.exports=_n});var En=q(Xo=>{Xo.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var An=q(Re=>{var Qo="[0-9]+",xc="[A-Z $%*+\\-./:]+",kt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kt=kt.replace(/u/g,"\\u");var _c="(?:(?![A-Z0-9 $%*+\\-./:]|"+kt+`)(?:.|[\r
]))+`;Re.KANJI=new RegExp(kt,"g");Re.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Re.BYTE=new RegExp(_c,"g");Re.NUMERIC=new RegExp(Qo,"g");Re.ALPHANUMERIC=new RegExp(xc,"g");var Ec=new RegExp("^"+kt+"$"),Ac=new RegExp("^"+Qo+"$"),Ic=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Re.testKanji=function(e){return Ec.test(e)};Re.testNumeric=function(e){return Ac.test(e)};Re.testAlphanumeric=function(e){return Ic.test(e)}});var Fe=q(ce=>{var Pc=En(),In=An();ce.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};ce.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};ce.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};ce.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};ce.MIXED={bit:-1};ce.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!Pc.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};ce.getBestModeForData=function(e){return In.testNumeric(e)?ce.NUMERIC:In.testAlphanumeric(e)?ce.ALPHANUMERIC:In.testKanji(e)?ce.KANJI:ce.BYTE};ce.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};ce.isValid=function(e){return e&&e.bit&&e.ccBits};function Sc(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return ce.NUMERIC;case"alphanumeric":return ce.ALPHANUMERIC;case"kanji":return ce.KANJI;case"byte":return ce.BYTE;default:throw new Error("Unknown mode: "+n)}}ce.from=function(e,t){if(ce.isValid(e))return e;try{return Sc(e)}catch{return t}}});var ni=q(tt=>{var wr=je(),Tc=bn(),Zo=pr(),ze=Fe(),Pn=En(),ti=7973,ei=wr.getBCHDigit(ti);function Cc(n,e,t){for(let r=1;r<=40;r++)if(e<=tt.getCapacity(r,t,n))return r}function ri(n,e){return ze.getCharCountIndicator(n,e)+4}function Oc(n,e){let t=0;return n.forEach(function(r){let s=ri(r.mode,e);t+=s+r.getBitsLength()}),t}function Mc(n,e){for(let t=1;t<=40;t++)if(Oc(n,t)<=tt.getCapacity(t,e,ze.MIXED))return t}tt.from=function(e,t){return Pn.isValid(e)?parseInt(e,10):t};tt.getCapacity=function(e,t,r){if(!Pn.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=ze.BYTE);let s=wr.getSymbolTotalCodewords(e),o=Tc.getTotalCodewordsCount(e,t),i=(s-o)*8;if(r===ze.MIXED)return i;let u=i-ri(r,e);switch(r){case ze.NUMERIC:return Math.floor(u/10*3);case ze.ALPHANUMERIC:return Math.floor(u/11*2);case ze.KANJI:return Math.floor(u/13);case ze.BYTE:default:return Math.floor(u/8)}};tt.getBestVersionForData=function(e,t){let r,s=Zo.from(t,Zo.M);if(Array.isArray(e)){if(e.length>1)return Mc(e,s);if(e.length===0)return 1;r=e[0]}else r=e;return Cc(r.mode,r.getLength(),s)};tt.getEncodedBits=function(e){if(!Pn.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;wr.getBCHDigit(t)-ei>=0;)t^=ti<<wr.getBCHDigit(t)-ei;return e<<12|t}});var ai=q(ii=>{var Sn=je(),oi=1335,Rc=21522,si=Sn.getBCHDigit(oi);ii.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;Sn.getBCHDigit(s)-si>=0;)s^=oi<<Sn.getBCHDigit(s)-si;return(r<<10|s)^Rc}});var ci=q((dd,ui)=>{var Nc=Fe();function lt(n){this.mode=Nc.NUMERIC,this.data=n.toString()}lt.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};lt.prototype.getLength=function(){return this.data.length};lt.prototype.getBitsLength=function(){return lt.getBitsLength(this.data.length)};lt.prototype.write=function(e){let t,r,s;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),s=parseInt(r,10),e.put(s,10);let o=this.data.length-t;o>0&&(r=this.data.substr(t),s=parseInt(r,10),e.put(s,o*3+1))};ui.exports=lt});var fi=q((pd,li)=>{var Lc=Fe(),Tn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ft(n){this.mode=Lc.ALPHANUMERIC,this.data=n}ft.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ft.prototype.getLength=function(){return this.data.length};ft.prototype.getBitsLength=function(){return ft.getBitsLength(this.data.length)};ft.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=Tn.indexOf(this.data[t])*45;r+=Tn.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(Tn.indexOf(this.data[t]),6)};li.exports=ft});var pi=q((hd,di)=>{"use strict";di.exports=function(e){for(var t=[],r=e.length,s=0;s<r;s++){var o=e.charCodeAt(s);if(o>=55296&&o<=56319&&r>s+1){var i=e.charCodeAt(s+1);i>=56320&&i<=57343&&(o=(o-55296)*1024+i-56320+65536,s+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var mi=q((md,hi)=>{var kc=pi(),Dc=Fe();function dt(n){this.mode=Dc.BYTE,typeof n=="string"&&(n=kc(n)),this.data=new Uint8Array(n)}dt.getBitsLength=function(e){return e*8};dt.prototype.getLength=function(){return this.data.length};dt.prototype.getBitsLength=function(){return dt.getBitsLength(this.data.length)};dt.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};hi.exports=dt});var yi=q((gd,gi)=>{var $c=Fe(),Bc=je();function pt(n){this.mode=$c.KANJI,this.data=n}pt.getBitsLength=function(e){return e*13};pt.prototype.getLength=function(){return this.data.length};pt.prototype.getBitsLength=function(){return pt.getBitsLength(this.data.length)};pt.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Bc.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};gi.exports=pt});var vi=q((yd,Cn)=>{"use strict";var Dt={single_source_shortest_paths:function(n,e,t){var r={},s={};s[e]=0;var o=Dt.PriorityQueue.make();o.push(e,0);for(var i,u,c,d,m,v,y,b,T;!o.empty();){i=o.pop(),u=i.value,d=i.cost,m=n[u]||{};for(c in m)m.hasOwnProperty(c)&&(v=m[c],y=d+v,b=s[c],T=typeof s[c]>"u",(T||b>y)&&(s[c]=y,o.push(c,y),r[c]=u))}if(typeof t<"u"&&typeof s[t]>"u"){var M=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(M)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,s;r;)t.push(r),s=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=Dt.single_source_shortest_paths(n,e,t);return Dt.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=Dt.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Cn<"u"&&(Cn.exports=Dt)});var Pi=q(ht=>{var Y=Fe(),xi=ci(),_i=fi(),Ei=mi(),Ai=yi(),$t=An(),br=je(),Uc=vi();function wi(n){return unescape(encodeURIComponent(n)).length}function Bt(n,e,t){let r=[],s;for(;(s=n.exec(t))!==null;)r.push({data:s[0],index:s.index,mode:e,length:s[0].length});return r}function Ii(n){let e=Bt($t.NUMERIC,Y.NUMERIC,n),t=Bt($t.ALPHANUMERIC,Y.ALPHANUMERIC,n),r,s;return br.isKanjiModeEnabled()?(r=Bt($t.BYTE,Y.BYTE,n),s=Bt($t.KANJI,Y.KANJI,n)):(r=Bt($t.BYTE_KANJI,Y.BYTE,n),s=[]),e.concat(t,r,s).sort(function(i,u){return i.index-u.index}).map(function(i){return{data:i.data,mode:i.mode,length:i.length}})}function On(n,e){switch(e){case Y.NUMERIC:return xi.getBitsLength(n);case Y.ALPHANUMERIC:return _i.getBitsLength(n);case Y.KANJI:return Ai.getBitsLength(n);case Y.BYTE:return Ei.getBitsLength(n)}}function jc(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Gc(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case Y.NUMERIC:e.push([r,{data:r.data,mode:Y.ALPHANUMERIC,length:r.length},{data:r.data,mode:Y.BYTE,length:r.length}]);break;case Y.ALPHANUMERIC:e.push([r,{data:r.data,mode:Y.BYTE,length:r.length}]);break;case Y.KANJI:e.push([r,{data:r.data,mode:Y.BYTE,length:wi(r.data)}]);break;case Y.BYTE:e.push([{data:r.data,mode:Y.BYTE,length:wi(r.data)}])}}return e}function Fc(n,e){let t={},r={start:{}},s=["start"];for(let o=0;o<n.length;o++){let i=n[o],u=[];for(let c=0;c<i.length;c++){let d=i[c],m=""+o+c;u.push(m),t[m]={node:d,lastCount:0},r[m]={};for(let v=0;v<s.length;v++){let y=s[v];t[y]&&t[y].node.mode===d.mode?(r[y][m]=On(t[y].lastCount+d.length,d.mode)-On(t[y].lastCount,d.mode),t[y].lastCount+=d.length):(t[y]&&(t[y].lastCount=d.length),r[y][m]=On(d.length,d.mode)+4+Y.getCharCountIndicator(d.mode,e))}}s=u}for(let o=0;o<s.length;o++)r[s[o]].end=0;return{map:r,table:t}}function bi(n,e){let t,r=Y.getBestModeForData(n);if(t=Y.from(e,r),t!==Y.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+Y.toString(t)+`.
 Suggested mode is: `+Y.toString(r));switch(t===Y.KANJI&&!br.isKanjiModeEnabled()&&(t=Y.BYTE),t){case Y.NUMERIC:return new xi(n);case Y.ALPHANUMERIC:return new _i(n);case Y.KANJI:return new Ai(n);case Y.BYTE:return new Ei(n)}}ht.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(bi(r,null)):r.data&&t.push(bi(r.data,r.mode)),t},[])};ht.fromString=function(e,t){let r=Ii(e,br.isKanjiModeEnabled()),s=Gc(r),o=Fc(s,t),i=Uc.find_path(o.map,"start","end"),u=[];for(let c=1;c<i.length-1;c++)u.push(o.table[i[c]].node);return ht.fromArray(jc(u))};ht.rawSplit=function(e){return ht.fromArray(Ii(e,br.isKanjiModeEnabled()))}});var Ti=q(Si=>{var _r=je(),Mn=pr(),zc=Bo(),qc=jo(),Wc=Go(),Hc=qo(),Ln=Wo(),kn=bn(),Yc=Jo(),xr=ni(),Vc=ai(),Kc=Fe(),Rn=Pi();function Jc(n,e){let t=n.size,r=Hc.getPositions(e);for(let s=0;s<r.length;s++){let o=r[s][0],i=r[s][1];for(let u=-1;u<=7;u++)if(!(o+u<=-1||t<=o+u))for(let c=-1;c<=7;c++)i+c<=-1||t<=i+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?n.set(o+u,i+c,!0,!0):n.set(o+u,i+c,!1,!0))}}function Xc(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function Qc(n,e){let t=Wc.getPositions(e);for(let r=0;r<t.length;r++){let s=t[r][0],o=t[r][1];for(let i=-2;i<=2;i++)for(let u=-2;u<=2;u++)i===-2||i===2||u===-2||u===2||i===0&&u===0?n.set(s+i,o+u,!0,!0):n.set(s+i,o+u,!1,!0)}}function Zc(n,e){let t=n.size,r=xr.getEncodedBits(e),s,o,i;for(let u=0;u<18;u++)s=Math.floor(u/3),o=u%3+t-8-3,i=(r>>u&1)===1,n.set(s,o,i,!0),n.set(o,s,i,!0)}function Nn(n,e,t){let r=n.size,s=Vc.getEncodedBits(e,t),o,i;for(o=0;o<15;o++)i=(s>>o&1)===1,o<6?n.set(o,8,i,!0):o<8?n.set(o+1,8,i,!0):n.set(r-15+o,8,i,!0),o<8?n.set(8,r-o-1,i,!0):o<9?n.set(8,15-o-1+1,i,!0):n.set(8,15-o-1,i,!0);n.set(r-8,8,1,!0)}function el(n,e){let t=n.size,r=-1,s=t-1,o=7,i=0;for(let u=t-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!n.isReserved(s,u-c)){let d=!1;i<e.length&&(d=(e[i]>>>o&1)===1),n.set(s,u-c,d),o--,o===-1&&(i++,o=7)}if(s+=r,s<0||t<=s){s-=r,r=-r;break}}}function tl(n,e,t){let r=new zc;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),Kc.getCharCountIndicator(c.mode,n)),c.write(r)});let s=_r.getSymbolTotalCodewords(n),o=kn.getTotalCodewordsCount(n,e),i=(s-o)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let u=(i-r.getLengthInBits())/8;for(let c=0;c<u;c++)r.put(c%2?17:236,8);return rl(r,n,e)}function rl(n,e,t){let r=_r.getSymbolTotalCodewords(e),s=kn.getTotalCodewordsCount(e,t),o=r-s,i=kn.getBlocksCount(e,t),u=r%i,c=i-u,d=Math.floor(r/i),m=Math.floor(o/i),v=m+1,y=d-m,b=new Yc(y),T=0,M=new Array(i),F=new Array(i),$=0,Z=new Uint8Array(n.buffer);for(let D=0;D<i;D++){let O=D<c?m:v;M[D]=Z.slice(T,T+O),F[D]=b.encode(M[D]),T+=O,$=Math.max($,O)}let W=new Uint8Array(r),le=0,ne,I;for(ne=0;ne<$;ne++)for(I=0;I<i;I++)ne<M[I].length&&(W[le++]=M[I][ne]);for(ne=0;ne<y;ne++)for(I=0;I<i;I++)W[le++]=F[I][ne];return W}function nl(n,e,t,r){let s;if(Array.isArray(n))s=Rn.fromArray(n);else if(typeof n=="string"){let d=e;if(!d){let m=Rn.rawSplit(n);d=xr.getBestVersionForData(m,t)}s=Rn.fromString(n,d||40)}else throw new Error("Invalid data");let o=xr.getBestVersionForData(s,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let i=tl(e,t,s),u=_r.getSymbolSize(e),c=new qc(u);return Jc(c,e),Xc(c),Qc(c,e),Nn(c,t,0),e>=7&&Zc(c,e),el(c,i),isNaN(r)&&(r=Ln.getBestMask(c,Nn.bind(null,c,t))),Ln.applyMask(r,c),Nn(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:s}}Si.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Mn.M,s,o;return typeof t<"u"&&(r=Mn.from(t.errorCorrectionLevel,Mn.M),s=xr.from(t.version),o=Ln.from(t.maskPattern),t.toSJISFunc&&_r.setToSJISFunction(t.toSJISFunc)),nl(e,s,r,o)}});var Dn=q(rt=>{function Ci(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}rt.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:r,scale:r?4:s,margin:t,color:{dark:Ci(e.color.dark||"#000000ff"),light:Ci(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};rt.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};rt.getImageWidth=function(e,t){let r=rt.getScale(e,t);return Math.floor((e+t.margin*2)*r)};rt.qrToImageData=function(e,t,r){let s=t.modules.size,o=t.modules.data,i=rt.getScale(s,r),u=Math.floor((s+r.margin*2)*i),c=r.margin*i,d=[r.color.light,r.color.dark];for(let m=0;m<u;m++)for(let v=0;v<u;v++){let y=(m*u+v)*4,b=r.color.light;if(m>=c&&v>=c&&m<u-c&&v<u-c){let T=Math.floor((m-c)/i),M=Math.floor((v-c)/i);b=d[o[T*s+M]?1:0]}e[y++]=b.r,e[y++]=b.g,e[y++]=b.b,e[y]=b.a}}});var Oi=q(Er=>{var $n=Dn();function sl(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function ol(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Er.render=function(e,t,r){let s=r,o=t;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),t||(o=ol()),s=$n.getOptions(s);let i=$n.getImageWidth(e.modules.size,s),u=o.getContext("2d"),c=u.createImageData(i,i);return $n.qrToImageData(c.data,e,s),sl(u,o,i),u.putImageData(c,0,0),o};Er.renderToDataURL=function(e,t,r){let s=r;typeof s>"u"&&(!t||!t.getContext)&&(s=t,t=void 0),s||(s={});let o=Er.render(e,t,s),i=s.type||"image/png",u=s.rendererOpts||{};return o.toDataURL(i,u.quality)}});var Ni=q(Ri=>{var il=Dn();function Mi(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function Bn(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function al(n,e,t){let r="",s=0,o=!1,i=0;for(let u=0;u<n.length;u++){let c=Math.floor(u%e),d=Math.floor(u/e);!c&&!o&&(o=!0),n[u]?(i++,u>0&&c>0&&n[u-1]||(r+=o?Bn("M",c+t,.5+d+t):Bn("m",s,0),s=0,o=!1),c+1<e&&n[u+1]||(r+=Bn("h",i),i=0)):s++}return r}Ri.render=function(e,t,r){let s=il.getOptions(t),o=e.modules.size,i=e.modules.data,u=o+s.margin*2,c=s.color.light.a?"<path "+Mi(s.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",d="<path "+Mi(s.color.dark,"stroke")+' d="'+al(i,o,s.margin)+'"/>',m='viewBox="0 0 '+u+" "+u+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,y),y}});var ki=q(Ut=>{var ul=ko(),Un=Ti(),Li=Oi(),cl=Ni();function jn(n,e,t,r,s){let o=[].slice.call(arguments,1),i=o.length,u=typeof o[i-1]=="function";if(!u&&!ul())throw new Error("Callback required as last argument");if(u){if(i<2)throw new Error("Too few arguments provided");i===2?(s=t,t=e,e=r=void 0):i===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=t,t=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(t=e,e=r=void 0):i===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,d){try{let m=Un.create(t,r);c(n(m,e,r))}catch(m){d(m)}})}try{let c=Un.create(t,r);s(null,n(c,e,r))}catch(c){s(c)}}Ut.create=Un.create;Ut.toCanvas=jn.bind(null,Li.render);Ut.toDataURL=jn.bind(null,Li.renderToDataURL);Ut.toString=jn.bind(null,function(n,e,t){return cl.render(n,t)})});var ll={};us(ll,{default:()=>Ir});module.exports=kr(ll);var Le=require("obsidian"),Wi=Ye(Vt());var{isArray:fs}=Array;function $r(n){let e=fs(n)?Array(n.length):{};if(n&&n.getTime)return new Date(n.getTime());for(let t in n){let r=n[t];e[t]=typeof r=="object"&&r!==null?r.getTime?new Date(r.getTime()):$r(r):r}return e}function Br(n){if(n===null)return"Null";if(n===void 0)return"Undefined";if(Number.isNaN(n))return"NaN";let e=Object.prototype.toString.call(n).slice(8,-1);return e==="AsyncFunction"?"Promise":e}function vt(n,e){if(arguments.length===1)return r=>vt(n,r);let t=$r(n);return Object.keys(e).forEach(r=>{Br(e[r])==="Object"&&Br(n[r])==="Object"?t[r]=vt(n[r],e[r]):t[r]=e[r]}),t}var Fn=Ye(ds());var Ga=class extends Error{issues;constructor(n){super(n[0].message),this.name="ValiError",this.issues=n}},bl=Symbol("brand");function Ve(n,e){return Array.isArray(n)?[void 0,n]:[n,e]}var Kt;function Gr(n){return{lang:n?.lang??Kt?.lang,message:n?.message,abortEarly:n?.abortEarly??Kt?.abortEarly,abortPipeEarly:n?.abortPipeEarly??Kt?.abortPipeEarly,skipPipe:n?.skipPipe??Kt?.skipPipe}}var Fa;function za(n){return Fa?.get(n)}var qa;function Wa(n){return qa?.get(n)}var Ha;function Ya(n,e){return Ha?.get(n)?.get(e)}function hs(n,e,t,r,s){let o=e.message??Ya(t,s.lang)??(n?Wa(s.lang):null)??r?.message??za(s.lang)??s.message;return typeof o=="function"?o(s):o}function wt(n,e,t){return{typed:n,output:e,issues:t}}function Fr(n){let e=typeof n;return e==="object"&&(e=n?Object.getPrototypeOf(n).constructor.name:"null"),e==="string"?`"${n}"`:e==="number"||e==="bigint"||e==="boolean"?`${n}`:e}function Va(n,e,t){let r=t.received??Fr(t.input),s={reason:n.type,context:t.context.type,expected:t.context.expects,received:r,message:`Invalid ${t.label}: ${t.context.expects?`Expected ${t.context.expects} but r`:"R"}eceived ${r}`,input:t.input,requirement:t.context.requirement,path:t.path,lang:e?.lang,abortEarly:e?.abortEarly,abortPipeEarly:e?.abortPipeEarly,skipPipe:e?.skipPipe};return s.message=hs(!1,t.context,t.reference,e,s),s}function Ke(n,e,t,r){if(n.pipe&&!t?.skipPipe)for(let s of n.pipe){let o=s._parse(e);if(o.issues){for(let i of o.issues){let u=Va(n,t,i);r?r.push(u):r=[u]}if(t?.abortEarly||t?.abortPipeEarly)break}else e=o.output}return wt(!0,e,r)}function Ka(n,e,t){if(!n||typeof n=="object"&&!Array.isArray(n)){let[o,i]=Ve(e,t);return[n,o,i]}let[r,s]=Ve(n,e);return[void 0,r,s]}function Be(n,e,t,r,s){let o=Fr(t),i=s?.expected??n.expects,u={reason:s?.reason??"type",context:n.type,expected:i,received:o,message:`Invalid type: Expected ${i} but received ${o}`,input:t,path:s?.path,issues:s?.issues,lang:r?.lang,abortEarly:r?.abortEarly,abortPipeEarly:r?.abortPipeEarly,skipPipe:r?.skipPipe};return u.message=hs(!0,n,e,r,u),{typed:!1,output:t,issues:[u]}}function Ja(n){return typeof n.default=="function"?n.default():n.default}function he(n,e,t){let[r,s]=Ve(e,t);return{type:"array",expects:"Array",async:!1,item:n,message:r,pipe:s,_parse(o,i){if(Array.isArray(o)){let u=!0,c,d=[];for(let m=0;m<o.length;m++){let v=o[m],y=this.item._parse(v,i);if(y.issues){let b={type:"array",origin:"value",input:o,key:m,value:v};for(let T of y.issues)T.path?T.path.unshift(b):T.path=[b],c?.push(T);if(c||(c=y.issues),i?.abortEarly){u=!1;break}}y.typed||(u=!1),d.push(y.output)}return u?Ke(this,d,i,c):wt(!1,d,c)}return Be(this,he,o,i)}}}function bt(n,e){let[t,r]=Ve(n,e);return{type:"boolean",expects:"boolean",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="boolean"?Ke(this,s,o):Be(this,bt,s,o)}}}function ot(n,e){let t=Object.values(n);return{type:"enum",expects:t.map(Fr).join(" | "),async:!1,enum:n,message:e,_parse(r,s){return t.includes(r)?wt(!0,r):Be(this,ot,r,s)}}}function it(n,e){let[t,r]=Ve(n,e);return{type:"number",expects:"number",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="number"&&!isNaN(s)?Ke(this,s,o):Be(this,it,s,o)}}}function te(n,e,t,r){let[s,o,i]=Ka(e,t,r),u;return{type:"object",expects:"Object",async:!1,entries:n,rest:s,message:o,pipe:i,_parse(c,d){if(c&&typeof c=="object"){u=u??Object.entries(this.entries);let m=!0,v,y={};for(let[b,T]of u){let M=c[b],F=T._parse(M,d);if(F.issues){let $={type:"object",origin:"value",input:c,key:b,value:M};for(let Z of F.issues)Z.path?Z.path.unshift($):Z.path=[$],v?.push(Z);if(v||(v=F.issues),d?.abortEarly){m=!1;break}}F.typed||(m=!1),(F.output!==void 0||b in c)&&(y[b]=F.output)}if(this.rest&&!(d?.abortEarly&&v)){for(let b in c)if(!(b in this.entries)){let T=c[b],M=this.rest._parse(T,d);if(M.issues){let F={type:"object",origin:"value",input:c,key:b,value:T};for(let $ of M.issues)$.path?$.path.unshift(F):$.path=[F],v?.push($);if(v||(v=M.issues),d?.abortEarly){m=!1;break}}M.typed||(m=!1),y[b]=M.output}}return m?Ke(this,y,d,v):wt(!1,y,v)}return Be(this,te,c,d)}}}function xt(n,e){return{type:"optional",expects:`${n.expects} | undefined`,async:!1,wrapped:n,default:e,_parse(t,r){if(t===void 0){let s=Ja(this);if(s===void 0)return wt(!0,t);t=s}return this.wrapped._parse(t,r)}}}function B(n,e){let[t,r]=Ve(n,e);return{type:"string",expects:"string",async:!1,message:t,pipe:r,_parse(s,o){return typeof s=="string"?Ke(this,s,o):Be(this,B,s,o)}}}function ps(n){let e;if(n)for(let t of n)if(e)for(let r of t.issues)e.push(r);else e=t.issues;return e}function Jt(n,e,t){let[r,s]=Ve(e,t);return{type:"union",expects:[...new Set(n.map(o=>o.expects))].join(" | "),async:!1,options:n,message:r,pipe:s,_parse(o,i){let u,c,d;for(let m of this.options){let v=m._parse(o,i);if(v.typed)if(v.issues)d?d.push(v):d=[v];else{u=v;break}else c?c.push(v):c=[v]}if(u)return Ke(this,u.output,i);if(d?.length){let m=d[0];return Ke(this,m.output,i,d.length===1?m.issues:Be(this,Jt,o,i,{reason:"union",issues:ps(d)}).issues)}return c?.length===1?c[0]:Be(this,Jt,o,i,{issues:ps(c)})}}}async function Xt(n,e,t){let r=await n._parse(e,Gr(t));if(r.issues)throw new Ga(r.issues);return r.output}function ms(n,e,t){let r=n._parse(e,Gr(t));return{typed:r.typed,success:!r.issues,output:r.output,issues:r.issues}}async function we(n,e,t){let r=await n._parse(e,Gr(t));return{typed:r.typed,success:!r.issues,output:r.output,issues:r.issues}}var Xa=["gpt-4","gpt-4-32k","gpt-4-vision","gpt-35-turbo","gpt-35-turbo-16k"],Qa=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4","gpt-4-0613","gpt-4-32k","gpt-4-32k-0613","gpt-4-vision-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4-turbo-preview","gpt-4-1106-vision-preview"],Za=["claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","claude-2.0","claude-2.1","claude-instant-1.1","claude-instant-1.2"],eu=["command-r-plus","command-r","command","command-nightly","command-light","command-light-nightly"],tu=["sonar-small-chat","sonar-small-online","sonar-medium-chat","sonar-medium-online","mistral-7b-instruct","mixtral-8x7b-instruct","codellama-70b-instruct"],Qt=[{id:"openai/gpt-3.5-turbo",name:"OpenAI: GPT-3.5 Turbo"},{id:"openai/gpt-4",name:"OpenAI: GPT-4"},{id:"google/gemini-pro",name:"Google: Gemini Pro (preview)"}],Ce=(c=>(c.OpenAI="OpenAI",c.AzureOpenAI="Azure OpenAI",c.GoogleGemini="Google Gemini",c.Anthropic="Anthropic",c.Cohere="Cohere",c.OpenRouter="OpenRouter",c.PerplexityAI="Perplexity",c.Custom="Custom (OpenAI Compatible)",c))(Ce||{}),_t=(c=>(c.ImproveWriting="Improve Writing",c.FixGrammar="Fix Grammar",c.SimplifyText="Simplify Text",c.MakeShorter="Make Shorter",c.MakeLonger="Make Longer",c.Paraphrase="Paraphrase",c.IntelligentBold="Intelligent Bold",c.CustomInstructions="Custom Instructions",c))(_t||{}),Et=(t=>(t[t.DirectReplacement=0]="DirectReplacement",t[t.CustomInstructions=1]="CustomInstructions",t))(Et||{}),se={OpenAI:"https://api.openai.com","Azure OpenAI":"","Google Gemini":"https://generativelanguage.googleapis.com",Anthropic:"https://api.anthropic.com",Cohere:"https://api.cohere.ai",OpenRouter:"https://openrouter.ai",Perplexity:"https://api.perplexity.ai","Custom (OpenAI Compatible)":""},At={dataSchemeDate:new Date("2024-02-22").toISOString(),aiProvider:"OpenAI",aiProviderConfig:{OpenAI:{apiKey:"",baseUrl:se.OpenAI,model:"gpt-3.5-turbo"},"Azure OpenAI":{apiKey:"",baseUrl:"",model:"gpt-35-turbo",apiVersion:"2023-05-15"},"Google Gemini":{apiKey:"",baseUrl:se["Google Gemini"],model:"gemini-pro"},Anthropic:{apiKey:"",baseUrl:se.Anthropic,model:"claude-2.1"},Cohere:{apiKey:"",baseUrl:se.Cohere,model:"command"},OpenRouter:{apiKey:"",baseUrl:se.OpenRouter,model:"openai/gpt-3.5-turbo"},Perplexity:{apiKey:"",baseUrl:se.Perplexity,model:""},"Custom (OpenAI Compatible)":{apiKey:"",baseUrl:"",model:""}},advancedSettings:!1,customAiModel:"",maxTokens:2e3,temperature:.5,presencePenalty:0,frequencyPenalty:0,enableGenerationLogging:!1,debugMode:!1,customPrompts:[]},gs={OpenAI:{defaultHost:se.OpenAI,docs:"https://platform.openai.com/docs/introduction",defaultModel:"gpt-3.5-turbo",models:Qa},"Azure OpenAI":{defaultHost:"",docs:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference",defaultModel:"gpt-35-turbo",models:Xa},Anthropic:{defaultHost:se.Anthropic,docs:"https://docs.anthropic.com/claude/reference/getting-started-with-the-api",defaultModel:"claude-2.1",models:Za},"Google Gemini":{defaultHost:se["Google Gemini"],docs:"https://ai.google.dev/models/gemini",defaultModel:"",models:[]},Cohere:{defaultHost:se.Cohere,docs:"https://docs.cohere.com/reference/versioning",defaultModel:"command",models:eu},OpenRouter:{defaultHost:se.OpenRouter,docs:"https://openrouter.ai/docs",defaultModel:Qt[0],models:Qt},Perplexity:{defaultHost:se.Perplexity,docs:"https://docs.perplexity.ai",defaultModel:"",models:tu},"Custom (OpenAI Compatible)":{defaultHost:"",docs:"",defaultModel:"",models:[]}};var Zt=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" />
</svg>
`;var zr=Ye(Vt());async function ys(n){let e=zr.default.createInstance({name:n.manifest.id});e.keys().then(async t=>{if(t.length>0){let r=zr.default.createInstance({name:`${n.manifest.id}-${n.app.vault.getName()}`});for(let s of t)await e.getItem(s).then(async o=>{await r.setItem(s,o)});await e.clear()}}),await e.dropInstance()}var Ue=require("obsidian");var vs=te({name:Jt([B(),ot(_t)]),icon:xt(B()),action:ot(Et),data:B()}),nu=te({name:B(),icon:xt(B()),data:B()}),ws=te({models:he(te({name:B(),displayName:B(),supportedGenerationMethods:he(B())}))}),It=te({data:he(te({id:B(),name:xt(B())}))}),Tl=te({dataSchemeDate:B(),aiProvider:ot(Ce),aiProviderConfig:te({OpenAI:te({apiKey:B(),baseUrl:B(),model:B()}),"Azure OpenAI":te({apiKey:B(),baseUrl:B(),model:B(),apiVersion:B()}),"Google Gemini":te({apiKey:B(),baseUrl:B(),model:B()}),Anthropic:te({apiKey:B(),baseUrl:B(),model:B()}),Cohere:te({apiKey:B(),baseUrl:B(),model:B()}),OpenRouter:te({apiKey:B(),baseUrl:B(),model:B()}),Perplexity:te({apiKey:B(),baseUrl:B(),model:B()}),"Custom (OpenAI Compatible)":te({apiKey:B(),baseUrl:B(),model:B()})}),advancedSettings:bt(),customAiModel:B(),maxTokens:it(),temperature:it(),presencePenalty:it(),frequencyPenalty:it(),enableGenerationLogging:bt(),debugMode:bt(),customPrompts:he(nu)}),bs=te({_NOTICE:B(),z:B()}),Je=te({id:B(),by:B(),model:B(),provider:ot(Ce),generatedAt:B(),customInstruction:xt(B()),orginalText:B(),generatedText:B()});var xe=Ye(Vt());var ye=class{keys={TEXT_GENERATIONS:"text-generations"};async getTextGenerationLogs(){let e=await xe.default.getItem(this.keys.TEXT_GENERATIONS),{success:t,output:r}=await we(te({data:he(Je)}),e);return t?r.data:[]}async setTextGenerationLogs(e){let t=await we(he(Je),e);t.success&&await xe.default.setItem(this.keys.TEXT_GENERATIONS,{data:t.output})}async deleteSingleTextGenerationLog(e){let t=await xe.default.getItem(this.keys.TEXT_GENERATIONS),{success:r,output:s}=await we(te({data:he(Je)}),t);if(!r)return;let o=await we(he(Je),s.data.filter(i=>i.id!==e));o.success&&await xe.default.setItem(this.keys.TEXT_GENERATIONS,{data:o.output})}async addTextGenerationLog(e){let t=await xe.default.getItem(this.keys.TEXT_GENERATIONS),{success:r,output:s}=await we(te({data:he(Je)}),t);if(!r){await xe.default.setItem(this.keys.TEXT_GENERATIONS,{data:[e]});return}let o=await we(he(Je),[...s.data,e]);o.success&&await xe.default.setItem(this.keys.TEXT_GENERATIONS,{data:o.output})}async getModels(e){let t=await xe.default.getItem(`${e}-models`),{success:r,output:s}=await we(It,t);return r?s.data:[]}async setModels(e,t){let r={data:t},{success:s,output:o}=await we(It,r);s&&await xe.default.setItem(`${e}-models`,o)}};var un=Ye(xs());function Oe(n){return Array.isArray?Array.isArray(n):Cs(n)==="[object Array]"}var su=1/0;function ou(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-su?"-0":e}function iu(n){return n==null?"":ou(n)}function _e(n){return typeof n=="string"}function Ss(n){return typeof n=="number"}function au(n){return n===!0||n===!1||uu(n)&&Cs(n)=="[object Boolean]"}function Ts(n){return typeof n=="object"}function uu(n){return Ts(n)&&n!==null}function me(n){return n!=null}function Hr(n){return!n.trim().length}function Cs(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}var cu="Incorrect 'index' type",lu=n=>`Invalid value for key ${n}`,fu=n=>`Pattern length exceeds max of ${n}.`,du=n=>`Missing ${n} property in key`,pu=n=>`Property 'weight' in key '${n}' must be a positive integer`,_s=Object.prototype.hasOwnProperty,Yr=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let s=Os(r);this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Os(n){let e=null,t=null,r=null,s=1,o=null;if(_e(n)||Oe(n))r=n,e=Es(n),t=Vr(n);else{if(!_s.call(n,"name"))throw new Error(du("name"));let i=n.name;if(r=i,_s.call(n,"weight")&&(s=n.weight,s<=0))throw new Error(pu(i));e=Es(i),t=Vr(i),o=n.getFn}return{path:e,id:t,weight:s,src:r,getFn:o}}function Es(n){return Oe(n)?n:n.split(".")}function Vr(n){return Oe(n)?n.join("."):n}function hu(n,e){let t=[],r=!1,s=(o,i,u)=>{if(me(o))if(!i[u])t.push(o);else{let c=i[u],d=o[c];if(!me(d))return;if(u===i.length-1&&(_e(d)||Ss(d)||au(d)))t.push(iu(d));else if(Oe(d)){r=!0;for(let m=0,v=d.length;m<v;m+=1)s(d[m],i,u+1)}else i.length&&s(d,i,u+1)}};return s(n,_e(e)?e.split("."):e,0),r?t:t[0]}var mu={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},gu={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},yu={location:0,threshold:.6,distance:100},vu={useExtendedSearch:!1,getFn:hu,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},G={...gu,...mu,...yu,...vu},wu=/[^ ]+/g;function bu(n=1,e=3){let t=new Map,r=Math.pow(10,e);return{get(s){let o=s.match(wu).length;if(t.has(o))return t.get(o);let i=1/Math.pow(o,.5*n),u=parseFloat(Math.round(i*r)/r);return t.set(o,u),u},clear(){t.clear()}}}var Pt=class{constructor({getFn:e=G.getFn,fieldNormWeight:t=G.fieldNormWeight}={}){this.norm=bu(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_e(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();_e(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!me(e)||Hr(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((s,o)=>{let i=s.getFn?s.getFn(e):this.getFn(e,s.path);if(me(i)){if(Oe(i)){let u=[],c=[{nestedArrIndex:-1,value:i}];for(;c.length;){let{nestedArrIndex:d,value:m}=c.pop();if(me(m))if(_e(m)&&!Hr(m)){let v={v:m,i:d,n:this.norm.get(m)};u.push(v)}else Oe(m)&&m.forEach((v,y)=>{c.push({nestedArrIndex:y,value:v})})}r.$[o]=u}else if(_e(i)&&!Hr(i)){let u={v:i,n:this.norm.get(i)};r.$[o]=u}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Ms(n,e,{getFn:t=G.getFn,fieldNormWeight:r=G.fieldNormWeight}={}){let s=new Pt({getFn:t,fieldNormWeight:r});return s.setKeys(n.map(Os)),s.setSources(e),s.create(),s}function xu(n,{getFn:e=G.getFn,fieldNormWeight:t=G.fieldNormWeight}={}){let{keys:r,records:s}=n,o=new Pt({getFn:e,fieldNormWeight:t});return o.setKeys(r),o.setIndexRecords(s),o}function er(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:s=G.distance,ignoreLocation:o=G.ignoreLocation}={}){let i=e/n.length;if(o)return i;let u=Math.abs(r-t);return s?i+u/s:u?1:i}function _u(n=[],e=G.minMatchCharLength){let t=[],r=-1,s=-1,o=0;for(let i=n.length;o<i;o+=1){let u=n[o];u&&r===-1?r=o:!u&&r!==-1&&(s=o-1,s-r+1>=e&&t.push([r,s]),r=-1)}return n[o-1]&&o-r>=e&&t.push([r,o-1]),t}var Xe=32;function Eu(n,e,t,{location:r=G.location,distance:s=G.distance,threshold:o=G.threshold,findAllMatches:i=G.findAllMatches,minMatchCharLength:u=G.minMatchCharLength,includeMatches:c=G.includeMatches,ignoreLocation:d=G.ignoreLocation}={}){if(e.length>Xe)throw new Error(fu(Xe));let m=e.length,v=n.length,y=Math.max(0,Math.min(r,v)),b=o,T=y,M=u>1||c,F=M?Array(v):[],$;for(;($=n.indexOf(e,T))>-1;){let D=er(e,{currentLocation:$,expectedLocation:y,distance:s,ignoreLocation:d});if(b=Math.min(D,b),T=$+m,M){let O=0;for(;O<m;)F[$+O]=1,O+=1}}T=-1;let Z=[],W=1,le=m+v,ne=1<<m-1;for(let D=0;D<m;D+=1){let O=0,R=le;for(;O<R;)er(e,{errors:D,currentLocation:y+R,expectedLocation:y,distance:s,ignoreLocation:d})<=b?O=R:le=R,R=Math.floor((le-O)/2+O);le=R;let ee=Math.max(1,y-R+1),ie=i?v:Math.min(y+R,v)+m,N=Array(ie+2);N[ie+1]=(1<<D)-1;for(let _=ie;_>=ee;_-=1){let L=_-1,C=t[n.charAt(L)];if(M&&(F[L]=+!!C),N[_]=(N[_+1]<<1|1)&C,D&&(N[_]|=(Z[_+1]|Z[_])<<1|1|Z[_+1]),N[_]&ne&&(W=er(e,{errors:D,currentLocation:L,expectedLocation:y,distance:s,ignoreLocation:d}),W<=b)){if(b=W,T=L,T<=y)break;ee=Math.max(1,2*y-T)}}if(er(e,{errors:D+1,currentLocation:y,expectedLocation:y,distance:s,ignoreLocation:d})>b)break;Z=N}let I={isMatch:T>=0,score:Math.max(.001,W)};if(M){let D=_u(F,u);D.length?c&&(I.indices=D):I.isMatch=!1}return I}function Au(n){let e={};for(let t=0,r=n.length;t<r;t+=1){let s=n.charAt(t);e[s]=(e[s]||0)|1<<r-t-1}return e}var tr=class{constructor(e,{location:t=G.location,threshold:r=G.threshold,distance:s=G.distance,includeMatches:o=G.includeMatches,findAllMatches:i=G.findAllMatches,minMatchCharLength:u=G.minMatchCharLength,isCaseSensitive:c=G.isCaseSensitive,ignoreLocation:d=G.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:d},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let m=(y,b)=>{this.chunks.push({pattern:y,alphabet:Au(y),startIndex:b})},v=this.pattern.length;if(v>Xe){let y=0,b=v%Xe,T=v-b;for(;y<T;)m(this.pattern.substr(y,Xe),y),y+=Xe;if(b){let M=v-Xe;m(this.pattern.substr(M),M)}}else m(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let T={isMatch:!0,score:0};return r&&(T.indices=[[0,e.length-1]]),T}let{location:s,distance:o,threshold:i,findAllMatches:u,minMatchCharLength:c,ignoreLocation:d}=this.options,m=[],v=0,y=!1;this.chunks.forEach(({pattern:T,alphabet:M,startIndex:F})=>{let{isMatch:$,score:Z,indices:W}=Eu(e,T,M,{location:s+F,distance:o,threshold:i,findAllMatches:u,minMatchCharLength:c,includeMatches:r,ignoreLocation:d});$&&(y=!0),v+=Z,$&&W&&(m=[...m,...W])});let b={isMatch:y,score:y?v/this.chunks.length:1};return y&&r&&(b.indices=m),b}},Ee=class{constructor(e){this.pattern=e}static isMultiMatch(e){return As(e,this.multiRegex)}static isSingleMatch(e){return As(e,this.singleRegex)}search(){}};function As(n,e){let t=n.match(e);return t?t[1]:null}var Kr=class extends Ee{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Jr=class extends Ee{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},Xr=class extends Ee{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Qr=class extends Ee{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Zr=class extends Ee{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},en=class extends Ee{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},rr=class extends Ee{constructor(e,{location:t=G.location,threshold:r=G.threshold,distance:s=G.distance,includeMatches:o=G.includeMatches,findAllMatches:i=G.findAllMatches,minMatchCharLength:u=G.minMatchCharLength,isCaseSensitive:c=G.isCaseSensitive,ignoreLocation:d=G.ignoreLocation}={}){super(e),this._bitapSearch=new tr(e,{location:t,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:u,isCaseSensitive:c,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},nr=class extends Ee{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r,s=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+o,s.push([r,t-1]);let i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}},tn=[Kr,nr,Xr,Qr,en,Zr,Jr,rr],Is=tn.length,Iu=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Pu="|";function Su(n,e={}){return n.split(Pu).map(t=>{let r=t.trim().split(Iu).filter(o=>o&&!!o.trim()),s=[];for(let o=0,i=r.length;o<i;o+=1){let u=r[o],c=!1,d=-1;for(;!c&&++d<Is;){let m=tn[d],v=m.isMultiMatch(u);v&&(s.push(new m(v,e)),c=!0)}if(!c)for(d=-1;++d<Is;){let m=tn[d],v=m.isSingleMatch(u);if(v){s.push(new m(v,e));break}}}return s})}var Tu=new Set([rr.type,nr.type]),rn=class{constructor(e,{isCaseSensitive:t=G.isCaseSensitive,includeMatches:r=G.includeMatches,minMatchCharLength:s=G.minMatchCharLength,ignoreLocation:o=G.ignoreLocation,findAllMatches:i=G.findAllMatches,location:u=G.location,threshold:c=G.threshold,distance:d=G.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:s,findAllMatches:i,ignoreLocation:o,location:u,threshold:c,distance:d},this.pattern=t?e:e.toLowerCase(),this.query=Su(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let o=0,i=[],u=0;for(let c=0,d=t.length;c<d;c+=1){let m=t[c];i.length=0,o=0;for(let v=0,y=m.length;v<y;v+=1){let b=m[v],{isMatch:T,indices:M,score:F}=b.search(e);if(T){if(o+=1,u+=F,r){let $=b.constructor.type;Tu.has($)?i=[...i,...M]:i.push(M)}}else{u=0,o=0,i.length=0;break}}if(o){let v={isMatch:!0,score:u/o};return r&&(v.indices=i),v}}return{isMatch:!1,score:1}}},nn=[];function Cu(...n){nn.push(...n)}function sn(n,e){for(let t=0,r=nn.length;t<r;t+=1){let s=nn[t];if(s.condition(n,e))return new s(n,e)}return new tr(n,e)}var sr={AND:"$and",OR:"$or"},on={PATH:"$path",PATTERN:"$val"},an=n=>!!(n[sr.AND]||n[sr.OR]),Ou=n=>!!n[on.PATH],Mu=n=>!Oe(n)&&Ts(n)&&!an(n),Ps=n=>({[sr.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function Rs(n,e,{auto:t=!0}={}){let r=s=>{let o=Object.keys(s),i=Ou(s);if(!i&&o.length>1&&!an(s))return r(Ps(s));if(Mu(s)){let c=i?s[on.PATH]:o[0],d=i?s[on.PATTERN]:s[c];if(!_e(d))throw new Error(lu(c));let m={keyId:Vr(c),pattern:d};return t&&(m.searcher=sn(d,e)),m}let u={children:[],operator:o[0]};return o.forEach(c=>{let d=s[c];Oe(d)&&d.forEach(m=>{u.children.push(r(m))})}),u};return an(n)||(n=Ps(n)),r(n)}function Ru(n,{ignoreFieldNorm:e=G.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:s,norm:o,score:i})=>{let u=s?s.weight:null;r*=Math.pow(i===0&&u?Number.EPSILON:i,(u||1)*(e?1:o))}),t.score=r})}function Nu(n,e){let t=n.matches;e.matches=[],me(t)&&t.forEach(r=>{if(!me(r.indices)||!r.indices.length)return;let{indices:s,value:o}=r,i={indices:s,value:o};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),e.matches.push(i)})}function Lu(n,e){e.score=n.score}function ku(n,e,{includeMatches:t=G.includeMatches,includeScore:r=G.includeScore}={}){let s=[];return t&&s.push(Nu),r&&s.push(Lu),n.map(o=>{let{idx:i}=o,u={item:e[i],refIndex:i};return s.length&&s.forEach(c=>{c(o,u)}),u})}var Me=class{constructor(e,t={},r){this.options={...G,...t},this.options.useExtendedSearch,this._keyStore=new Yr(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Pt))throw new Error(cu);this._myIndex=t||Ms(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){me(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,s=this._docs.length;r<s;r+=1){let o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,s-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:s,shouldSort:o,sortFn:i,ignoreFieldNorm:u}=this.options,c=_e(e)?_e(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ru(c,{ignoreFieldNorm:u}),o&&c.sort(i),Ss(t)&&t>-1&&(c=c.slice(0,t)),ku(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){let t=sn(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:o,i,n:u})=>{if(!me(o))return;let{isMatch:c,score:d,indices:m}=t.searchIn(o);c&&s.push({item:o,idx:i,matches:[{score:d,value:o,norm:u,indices:m}]})}),s}_searchLogical(e){let t=Rs(e,this.options),r=(u,c,d)=>{if(!u.children){let{keyId:v,searcher:y}=u,b=this._findMatches({key:this._keyStore.get(v),value:this._myIndex.getValueForItemAtKeyId(c,v),searcher:y});return b&&b.length?[{idx:d,item:c,matches:b}]:[]}let m=[];for(let v=0,y=u.children.length;v<y;v+=1){let b=u.children[v],T=r(b,c,d);if(T.length)m.push(...T);else if(u.operator===sr.AND)return[]}return m},s=this._myIndex.records,o={},i=[];return s.forEach(({$:u,i:c})=>{if(me(u)){let d=r(t,u,c);d.length&&(o[c]||(o[c]={idx:c,item:u,matches:[]},i.push(o[c])),d.forEach(({matches:m})=>{o[c].matches.push(...m)}))}}),i}_searchObjectList(e){let t=sn(e,this.options),{keys:r,records:s}=this._myIndex,o=[];return s.forEach(({$:i,i:u})=>{if(!me(i))return;let c=[];r.forEach((d,m)=>{c.push(...this._findMatches({key:d,value:i[m],searcher:t}))}),c.length&&o.push({idx:u,item:i,matches:c})}),o}_findMatches({key:e,value:t,searcher:r}){if(!me(t))return[];let s=[];if(Oe(t))t.forEach(({v:o,i,n:u})=>{if(!me(o))return;let{isMatch:c,score:d,indices:m}=r.searchIn(o);c&&s.push({score:d,key:e,value:o,idx:i,norm:u,indices:m})});else{let{v:o,n:i}=t,{isMatch:u,score:c,indices:d}=r.searchIn(o);u&&s.push({score:c,key:e,value:o,norm:i,indices:d})}return s}};Me.version="7.0.0";Me.createIndex=Ms;Me.parseIndex=xu;Me.config=G;Me.parseQuery=Rs;Cu(rn);var St=class extends Ue.Modal{plugin;forageStore;enabled;logs;textLogDiv;constructor(e){super(e.app),this.plugin=e,this.forageStore=new ye,this.textLogDiv=createDiv("scroll-container")}async initStates(){let e=this.plugin.settings.enableGenerationLogging;if(this.enabled=e,!e){this.logs=[],new Ue.Notice("Text generation logging is disabled");return}let t=await this.forageStore.getTextGenerationLogs();this.logs=t.sort((r,s)=>new Date(s.generatedAt).getTime()-new Date(r.generatedAt).getTime()),this.logs=t}renderLoggDetailView(e){let{titleEl:t,contentEl:r}=this,s=this.logs.find(u=>u.id===e);if(!s){new Ue.Notice("Log not found");return}r.empty(),t.setText((0,un.default)(s.generatedAt).format("YYYY-MM-DD HH:mm:ss"));let o=r.createEl("button",{text:"Back to List"});o.onclick=()=>this.renderIndexView();let i=r.createEl("button",{text:"Delete Log",cls:"log-delet-button"});i.onclick=async()=>{let u="Are you sure?";if(i.textContent!==u){i.textContent=u;return}await this.forageStore.deleteSingleTextGenerationLog(e),this.logs=this.logs.filter(c=>c.id!==e),new Ue.Notice("Log deleted"),this.renderIndexView()},r.createEl("p",{text:`Model: ${s.model}`}),r.createEl("p",{text:`Provider: ${s.provider}`}),r.createEl("p",{text:`Command Name: ${s.by}`}),s.by==="Custom Instructions"&&s.customInstruction&&r.createEl("textarea",{text:s.customInstruction,cls:"modal-text-area",attr:{readonly:!0}}),r.createEl("h4",{text:"Original Text"}),r.createEl("textarea",{text:s.orginalText,cls:"modal-text-area",attr:{readonly:!0}}),r.createEl("h4",{text:"Generated Text"}),r.createEl("textarea",{text:s.generatedText,cls:"modal-text-area",attr:{readonly:!0}})}renderLogList(e){this.textLogDiv.empty();for(let t of e)this.textLogDiv.createEl("p",{text:(0,un.default)(t.generatedAt).format("YYYY-MM-DD HH:mm:ss"),cls:"log-item"}).onclick=()=>this.renderLoggDetailView(t.id)}renderIndexView(){let{titleEl:e,contentEl:t}=this;t.empty(),e.setText("Text Generation Logs");let r=t.createEl("input",{type:"text",placeholder:"Search logs...",cls:"log-search-box"}),s=this.logs,o=new Me(s,{keys:["id","generatedAt","orginalText","generatedText","customInstruction"]});r.onchange=i=>{let u=i.target.value;if(u===""){this.renderLogList(s);return}let c=o.search(u);this.renderLogList(c.map(d=>d.item))},this.contentEl.appendChild(this.textLogDiv),this.renderLogList(s)}onOpen(){let{contentEl:e}=this;if(!this.enabled){new Ue.Notice("Text generation logging is disabled"),e.empty();return}if(this.logs.length===0){e.empty(),new Ue.Notice("No logs found");return}this.renderIndexView()}onClose(){this.contentEl.empty()}};var Ns=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M21 10v5a1 1 0 0 1-1 1H7l-4 4V2a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v13z"></path>
</svg>
`;var Ls=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
</svg>`;var ks=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.15l-5-4.88 6.91-1.01L12 2z" />
</svg>`;var Ds=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m20 7 .94-2.06L23 4l-2.06-.94L20 1l-.94 2.06L17 4l2.06.94zM8.5 7l.94-2.06L11.5 4l-2.06-.94L8.5 1l-.94 2.06L5.5 4l2.06.94zM20 12.5l-.94 2.06-2.06.94 2.06.94.94 2.06.94-2.06L23 15.5l-2.06-.94zm-2.29-3.38-2.83-2.83c-.2-.19-.45-.29-.71-.29-.26 0-.51.1-.71.29L2.29 17.46c-.39.39-.39 1.02 0 1.41l2.83 2.83c.2.2.45.3.71.3s.51-.1.71-.29l11.17-11.17c.39-.39.39-1.03 0-1.42zm-3.54-.7 1.41 1.41L14.41 11 13 9.59l1.17-1.17zM5.83 19.59l-1.41-1.41L11.59 11 13 12.41l-7.17 7.18z" />
</svg>`;var $s=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z" />
</svg>`;var Bs=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path d="M4 9h16v2H4V9zm0 4h10v2H4v-2z" />
</svg>`;var Us=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" />
</svg>`;var js=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
	<path
		d="m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z" />
</svg>`;function Tt(n){let e=n.customPrompts;return[...Wu,...Hu,...e].map(t=>{let r=0;return"action"in t&&ms(vs,t)&&(r=t.action),{name:t.name,icon:t.icon,action:r,taskPrompt:t.data,systemPrompt:qu}})}var qu=`
## Base Instructions

- Remain headings if given.
- Leverage LATEX for mathematical expressions, mhchem \`ce\` for chemistry, use single $ for inline sentence ($1+1=2$), but double \`$$\` for line separation.
- Change text in the ##Input area, text WRAPPED by ===.
- This is plain markdown, never encode URLs/characters/symbols or change the structure of the markdown.
- Keep the meaning the same. If possible, retain the structure of the paragraphs. Ensure the re-written text's word count is near to the original text.
- Response with the rewritten text only, do not include additional context, explanation, or extra wording, just the re-written text itself.
- Respond in the same language variety or dialect of the text.
- Keep the suitable markdown compounds if present, such as images, URLs, checkbox, and Obsidian backlinks \`[[xxx]]\` and specified triple backtick boxes (also maintain its language identifier, unless its content is code).

## Special Reminder

- Do not change location names that does have related languages, such as strange name that you don't know, then don't change them.
- Preserve code block content if necessary.
- Do not change URLs or make it encoded because this is markdown.
`,Gs=`
## Input

===CONTENT-START===
{{input}}
===CONTENT-END===
`,Wu=[{name:"Custom Instructions",icon:Ns,action:1,data:`
## Tasks

- Follow the instructions below to make changes to the text.
- You must obey the custom instructions, and you should ignore conflicting instructions from the base instructions.
- You should not make any changes to the text that are not specified in the instructions.

## Custom Instructions

{{instructions}}
`}],Hu=[{name:"Improve Writing",icon:Ds,action:0,data:`
## Tasks

- Improve writing of the text.
- Remain the tone.
- Fix the factual inaccuracy.
- Reduce duplicated ideas and wordings, keep writing simple and concise.
- Make the text clearer, easier to understand, and well put together by correcting grammar, spelling, choosing the most suitable punctuation marks, and selecting the best tone and style based on the topic and purpose of the text.
- Choose simple words and phrases to improve the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
- Do not use advanced or strange words that are not suitable for simple writings. You may use terminology or specialized words if it is necessary.
- Keep everything fluent and highly readable. If a word, phrase, or part of the text is already clear and effective, leave it as it is, unchanged.
`},{name:"Fix Grammar",icon:Ls,action:0,data:`
## Tasks

- Proofread and correct the spelling and grammar mistakes.
- Make as few changes as possible. Only correct any spelling or grammar mistakes if the original text has spelling or grammar mistakes. Do not make any writing improvements.
- If the original text has no spelling or grammar mistakes, simply repeat the original text.
`},{name:"Make Shorter",icon:Bs,action:0,data:`
## Tasks

- Write a shorter version, keep the text clear, easy to understand, and well put together.
- Choose simple words and phrases to write the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
`},{name:"Make Longer",icon:$s,action:0,data:`
## Tasks

- Write a longer version, keep the text clear, easy to understand, and well put together.
- Choose simple words and phrases to write the text. Avoid ones that are too hard or confusing. Write the text like a real person would. Keep your tone balanced, not too casual or too formal, to match what the text is meant to do.
- Keep the meaning the same if possible. Ensure the rewritten text's word count is more than twice the original text but no more than 4 times the original text.
`},{name:"Intelligent Bold",icon:ks,action:0,data:`
## Tasks

- Bold the most **important ideas, words, stats, numbers, or sentences**.
- Keep the bolding clear and simple. Do not make it messy or confusing.
- **Avoid bolding too much text**. If everything is worth bolded, then nothing stands out.
- NEVER bolding headings or whole paragraphs, never change or bold the backstick wrapped content.
`},{name:"Paraphrase",icon:Us,action:0,data:`
## Tasks

- Reformulate the sentences, changing the structure and using synonyms where appropriate, without distorting the meaning of the text.
- Avoid using the same phrases or terminology as the original text unless necessary. The paraphrased text should be distinct yet convey the same information.
- Ensure that the paraphrased version is clear, concise, and maintains the tone appropriate to the context of the original text.
- Do not add new information or your own opinion, but focus on reflecting the ideas presented in the source material.
- If the text is technical or contains specialized language, strive to simplify the content without losing the intended message.
- If a word, phrase, or part of the text is already clear and effective, you may leave it as it is, unchanged.
`},{name:"Simplify Text",icon:js,action:0,data:`
## Tasks

- Simplify the following.
- Make the text clearer and easier to understand by using simple words and phrases. Avoid ones that are too hard or confusing.
- Keep sentences short and divide long statements into smaller ones. Aim for sentences that are 15 to 20 words long.
- Write in an active voice and use strong verbs to make your writing more direct and engaging.
- Remove unnecessary words, phrases, or clauses that do not contribute to the meaning of the text.
- Ensure that the simplified text retains the original meaning and context.
- Do not add new information or your own opinion, but focus on reflecting the ideas presented in the source material.
- If a word, phrase, or part of the text is already clear and effective, leave it as it is, unchanged.
`}];var J=require("obsidian");var or=require("obsidian"),Ct=class extends or.Modal{resolve;promise;constructor(e){super(e.app),this.promise=new Promise(t=>{this.resolve=t})}onOpen(){let{contentEl:e}=this;e.createEl("h4",{text:"Are you sure you want to proceed?"}),e.createEl("p",{text:"This action cannot be undone, please confirm to proceed."}),new or.Setting(e).addButton(t=>t.setButtonText("Confirm").setCta().onClick(async()=>{this.resolve(!0),this.close()})).addButton(t=>t.setButtonText("Cancel").setCta().onClick(async()=>{this.resolve(!1),this.close()}))}onClose(){let{contentEl:e}=this;e.empty(),this.resolve(!1)}};function Ae(n,e){return n.length>0?n:e}var cn=require("obsidian");async function Fs({plugin:n}){let{settings:e}=n,t=e.aiProviderConfig[e.aiProvider],s=`${Ae(t.baseUrl,se[e.aiProvider])}/v1/models?key=${t.apiKey}`,i=await(0,cn.request)({url:s,method:"GET",headers:{"Content-Type":"application/json"}}),u=(await Xt(ws,JSON.parse(i))).models,c=[];for(let d of u)d.supportedGenerationMethods.includes("generateContent")&&c.push({id:d.name.replace("models/",""),name:d.displayName});return c}async function zs({plugin:n,messages:e,model:t}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o={contents:[{role:"user",parts:[{text:`${e.system}

${e.user}`}]}],generationConfig:{temperature:r.advancedSettings?r.temperature:.5,maxOutputTokens:r.advancedSettings?r.maxTokens:2e3}},i=`${Ae(s.baseUrl,se[r.aiProvider])}/v1/models/${t}:generateContent?key=${s.apiKey}`,u=await(0,cn.request)({url:i,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),{candidates:c}=JSON.parse(u);if(!c||c.length===0)throw new Error("No response from Google AI");return c[0].content.parts[0].text}var Ot=require("obsidian");var qs={"HTTP-Referer":"https://github.com/ckt1031/obsidian-wordwise-plugin","X-Title":"Obsidian Wordwise Plugin"};async function ln({plugin:n}){let{settings:e}=n,t=e.aiProviderConfig[e.aiProvider],r="/v1/models";switch(e.aiProvider){case"OpenRouter":r=`/api${r}`;break;default:break}let o=`${Ae(t.baseUrl,se[e.aiProvider])}${r}`,i={"Content-Type":"application/json"};switch(e.aiProvider){case"OpenRouter":r=`/api${r}`,i={...i,...qs,Authorization:`Bearer ${t.apiKey}`};break;default:i={...i,Authorization:`Bearer ${t.apiKey}`};break}let u=await(0,Ot.request)({url:o,method:"GET",headers:i}),c=JSON.parse(u);return(await Xt(It,c)).data}async function Ws({plugin:n,messages:e,model:t}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider];if(r.aiProvider==="Azure OpenAI"){let b=r.aiProviderConfig[r.aiProvider];if(!b.baseUrl||b.baseUrl.length===0)throw new Error("Base URL is not set");if(!/\d{4}-\d{2}-\d{2}/.test(b.apiVersion)){new Ot.Notice("Invalid API Version, please enter in YYYY-MM-DD format");return}}let o=r.advancedSettings?r.frequencyPenalty:0;r.aiProvider==="Perplexity"&&(o=o===0?1:o);let i={stream:!1,model:t,temperature:r.advancedSettings?r.temperature:.5,max_tokens:r.advancedSettings?r.maxTokens:2e3,frequency_penalty:o,messages:[...e.system.length>0?[{role:"system",content:e.system}]:[],{role:"user",content:e.user}]},u={"Content-Type":"application/json"},c="/v1/chat/completions";switch(r.aiProvider){case"OpenRouter":c=`/api${c}`,u={...u,...qs,Authorization:`Bearer ${s.apiKey}`};break;case"Azure OpenAI":{let b=r.aiProviderConfig[r.aiProvider];c=`/openai/deployments/${t}/chat/completions?api-version=${b.apiVersion}`;let{model:T,...M}=i;i=M;break}default:r.aiProvider==="Perplexity"&&(c=c.replace("/v1","")),u={...u,Authorization:`Bearer ${s.apiKey}`};break}let m=`${Ae(s.baseUrl,se[r.aiProvider])}${c}`,v=await(0,Ot.request)({url:m,headers:u,method:"POST",body:JSON.stringify(i)}),{choices:y}=JSON.parse(v);return y[0].message.content}function de({settings:n,manifest:e},t){n.debugMode&&console.log(`${e.name}:`,t)}var Ie=require("obsidian"),Hs=({dropDown:n,plugin:e})=>{let t=n.selectEl.insertAdjacentElement("beforebegin",document.createElement("button")),r=n.selectEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(!t||!r)return;(0,Ie.setIcon)(t,"list-restart"),(0,Ie.setIcon)(r,"list-x"),(0,Ie.setTooltip)(t,"Fetch models"),(0,Ie.setTooltip)(r,"Reset models (use with caution)");let{setModels:s}=new ye;return r.addEventListener("click",async()=>{let o=new Ct(e);if(o.open(),!!await o.promise){switch(e.settings.aiProvider){case"OpenRouter":{await s("OpenRouter",Qt);break}case"Google Gemini":{await s("Google Gemini",[]);break}case"Custom (OpenAI Compatible)":{await s("Custom (OpenAI Compatible)",[]);break}default:throw new Error(`Unknown API Provider: ${e.settings.aiProvider}`)}new Ie.Notice("Models reset successfully, please refresh the plugin.")}}),t.addEventListener("click",async()=>{try{let o=[],{settings:i}=e;switch(i.aiProvider){case"OpenRouter":{o=await ln({plugin:e});break}case"Google Gemini":{o=await Fs({plugin:e});break}case"Custom (OpenAI Compatible)":o=await ln({plugin:e});break;default:throw new Error(`Unknown API Provider: ${i.aiProvider}`)}await s(i.aiProvider,o),de(e,o),new Ie.Notice("Models fetched and stored successfully, please refresh the plugin.")}catch(o){de(e,o);let i="Failed to fetch models";o instanceof Error&&(i+=`: ${o.message}`),new Ie.Notice(i)}}),n};var Mt=require("obsidian"),Ys=n=>{let e=n.inputEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(e)return(0,Mt.setTooltip)(e,"Toggle password visibility"),(0,Mt.setIcon)(e,"eye-off"),e.addEventListener("click",()=>{let t=n.inputEl.getAttribute("type")==="text",r=t?"eye-off":"eye",s=t?"password":"text";(0,Mt.setIcon)(e,r),n.inputEl.setAttribute("type",s),n.inputEl.focus()}),n.inputEl.setAttribute("type","password"),n};var Vs=require("obsidian");async function Ks({plugin:n,messages:e,model:t}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o={messages:[{role:"user",content:`${e.system}

${e.user}`}],model:t,stream:!1,max_tokens:r.advancedSettings&&r.maxTokens!==0?r.maxTokens:2048,temperature:r.advancedSettings?r.temperature:.5},i=`${Ae(s.baseUrl,se[r.aiProvider])}/v1/messages`,u=await(0,Vs.request)({url:i,method:"POST",headers:{"Content-Type":"application/json","anthropic-version":"2023-06-01","x-api-key":s.apiKey},body:JSON.stringify(o)});return JSON.parse(u).content[0].text}var Oo=require("obsidian"),Mo=Ye(Co());async function Ro({plugin:n,messages:e,model:t}){let{settings:r}=n,s=r.aiProviderConfig[r.aiProvider],o={model:t,message:`${e.system}

${e.user}`,temperature:r.advancedSettings?r.temperature:.5,maxTokens:r.advancedSettings?r.maxTokens:2e3,frequencyPenalty:r.advancedSettings?r.frequencyPenalty:0},i=`${Ae(s.baseUrl,se[r.aiProvider])}/v1/chat`,u=await(0,Oo.request)({url:i,method:"POST",headers:{accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${s.apiKey}`},body:JSON.stringify((0,Mo.default)(o))}),{generations:c}=JSON.parse(u);return c[0].text}async function dr({plugin:n,messages:e}){let{settings:t}=n,r=t.aiProvider,s=t.aiProviderConfig[t.aiProvider].model;if(t.customAiModel.length>0&&t.advancedSettings&&(s=t.customAiModel),de(n,`Sending request to ${r} with prompt:

${e.system}

${e.user}`),r==="OpenAI"||r==="OpenRouter"||r==="Azure OpenAI"||r==="Perplexity"||r==="Custom (OpenAI Compatible)")return Ws({plugin:n,messages:e,model:s});if(r==="Anthropic")return Ks({plugin:n,messages:e,model:s});if(r==="Google Gemini")return zs({plugin:n,messages:e,model:s});if(r==="Cohere")return Ro({plugin:n,messages:e,model:s});throw new Error(`Unknown API Provider: ${r}`)}var Qe=require("obsidian"),No=({text:n,plugin:e})=>{let t=n.inputEl.insertAdjacentElement("beforebegin",document.createElement("button"));if(t)return(0,Qe.setTooltip)(t,"Test API"),(0,Qe.setIcon)(t,"check-circle-2"),t.addEventListener("click",async()=>{let{settings:r}=e;try{let s=await dr({plugin:e,messages:{system:"",user:"Say word hello only."}});if(de(e,s),s&&s.length>0){let o=r.aiProvider,i=r.aiProviderConfig[o],u=r.customAiModel.length>0?r.customAiModel:i.model;new Qe.Notice(`${o} API is working properly with model ${u}`)}}catch(s){de(e,s);let o="API is not working properly";s instanceof Error&&(o+=`: ${s.message}`),new Qe.Notice(o)}}),n};var Pe=require("obsidian"),ct=class extends Pe.Modal{name;data;isEdit;plugin;constructor(e,t,r,s){super(e.app),this.name="",this.data="",this.plugin=e,this.isEdit=t,t&&(this.name=r??"",this.data=s??"")}async submitForm(){if(this.name===""||this.data===""){new Pe.Notice("Please fill out all fields");return}let e=this.plugin.settings.customPrompts.find(t=>t.name===this.name);if(!this.isEdit&&e){new Pe.Notice("Name already in use");return}if(this.isEdit){let t=this.plugin.settings.customPrompts.findIndex(r=>r.name===this.name);this.plugin.settings.customPrompts[t]={name:this.name,data:this.data}}else this.plugin.settings.customPrompts.push({name:this.name,data:this.data});await this.plugin.saveSettings(),new Pe.Notice(`Please reload the plugin after ${this.isEdit?"editing":"adding"} a prompt`),this.close()}onOpen(){let{contentEl:e,data:t,name:r}=this;e.createEl("h4",{text:"Add custom prompt here:"}),new Pe.Setting(e).setName("Name:").addText(s=>{s.setPlaceholder("Name (example: text-tone-helper)"),s.onChange(o=>{this.name=o}),s.setValue(r)}),new Pe.Setting(e).setName("Prompt:").addTextArea(s=>{s.inputEl.className="modal-text-area",s.setPlaceholder("Change the tone of the text"),s.onChange(o=>{this.data=o}),s.setValue(t)}),new Pe.Setting(e).addButton(s=>s.setButtonText("Confirm").setCta().onClick(async()=>{await this.submitForm()}))}async onClose(){let{contentEl:e,plugin:t}=this;e.empty(),await t.app.setting.open(),await t.app.setting.openTabById(t.manifest.id)}};var Di=Ye(ki()),Ne=class{plugin;constructor(e){this.plugin=e}b64_to_utf8(e){return decodeURIComponent(atob(e))}utf8_to_b64(e){return btoa(encodeURIComponent(e))}getVaultName(){return this.plugin.app.vault.getName()}async exportQrCodeUri(){let e=encodeURIComponent(this.getVaultName()),t=encodeURIComponent(this.utf8_to_b64(JSON.stringify(this.plugin.settings))),r=`obsidian://${this.plugin.manifest.id}?func=import&version=${this.plugin.manifest.version}&vault=${e}&data=${t}`,s=await Di.default.toDataURL(r).catch(()=>null);return{rawUri:r,imgUri:s,encodedDataString:t}}async importQrCodeUri(e){let t=this.getVaultName(),r=e;if(r.func===void 0||r.func!=="import"||r.vault===void 0||r.data===void 0)return{status:"error",message:`The uri is not for exporting/importing settings: ${JSON.stringify(e)}`};if(r.vault!==t)return{status:"error",message:`The target vault is ${r.vault} but you are currently in ${t}: ${JSON.stringify(e)}`};let s={};try{s=JSON.parse(this.b64_to_utf8(decodeURIComponent(r.data)))}catch{return{status:"error",message:`Errors while parsing settings: ${JSON.stringify(e)}`}}return{status:"ok",message:"OK",result:s}}};var qe=require("obsidian"),jt=class extends qe.Modal{data;plugin;constructor(e){super(e.app),this.plugin=e,this.data=""}async onOpen(){let{contentEl:e,data:t}=this;e.createDiv().createEl("p",{text:"Paste the string data here:"}),new qe.Setting(e).setName("String:").addText(s=>{s.setPlaceholder("String, not the URI."),s.onChange(o=>{this.data=o}),s.setValue(t)}),new qe.Setting(e).addButton(s=>s.setButtonText("Confirm").setCta().onClick(async()=>{await this.submitForm()}))}async submitForm(){let{data:e}=this,t=await new Ne(this.plugin).importQrCodeUri({func:"import",vault:this.plugin.app.vault.getName(),data:e});t.status==="ok"?(new qe.Notice("Settings imported successfully"),this.close()):new qe.Notice(t.message),this.close()}onClose(){let{contentEl:e}=this;e.empty()}};var Gt=require("obsidian"),Ft=class extends Gt.Modal{plugin;constructor(e){super(e.app),this.plugin=e}async onOpen(){let{contentEl:e}=this,{rawUri:t,imgUri:r,encodedDataString:s}=await new Ne(this.plugin).exportQrCodeUri();e.createDiv().createEl("p",{text:"Scan the QR code with your mobile device to import the settings"});let i=e.createDiv();i.createEl("button",{text:"Copy URI"},u=>{u.onclick=async()=>{await navigator.clipboard.writeText(t),new Gt.Notice("URI copied to clipboard")}}),i.createEl("button",{text:"Copy Data String",cls:"log-delet-button"},u=>{u.onclick=async()=>{await navigator.clipboard.writeText(s),new Gt.Notice("Data copied to clipboard")}}),r&&r.length>0&&e.createDiv().createEl("img",{cls:"qrcode-img"},async c=>{c.src=r})}onClose(){this.contentEl.empty()}};var Ar=class extends J.PluginSettingTab{plugin;constructor(e,t){super(e,t),this.plugin=t}async restartSettingsTab(e){await e.app.setting.close(),await e.app.setting.open(),await e.app.setting.openTabById(e.manifest.id)}display(){let{containerEl:e,plugin:t}=this,{settings:r}=t;e.empty(),new J.Setting(e).setName("API provider").setDesc("API Provider to be used, available options are OpenAI, Anthropic and Google AI").addDropdown(s=>{for(let o of Object.values(Ce))s.addOption(o,o);s.setValue(r.aiProvider),s.onChange(async o=>{r.aiProvider=o,await t.saveSettings(),this.restartSettingsTab(t)})});for(let[s,o]of Object.entries(gs))if(r.aiProvider===s){new J.Setting(e).setName(`${s} api key`).setDesc(`API Key for the ${s} API`).addText(u=>{Ys(u),No({text:u,plugin:t}),u.setPlaceholder(`Enter your ${s} API Key`).setValue(r.aiProviderConfig[s].apiKey).onChange(async c=>{r.aiProviderConfig[s].apiKey=c,await t.saveSettings()})}),(r.advancedSettings||s==="Azure OpenAI")&&new J.Setting(e).setName(`${s} endpoint base url`).setDesc(`Base URL for the ${s} API. DO NOT include / trailing slash and paths.`).addText(u=>u.setPlaceholder(o.defaultHost).setValue(r.aiProviderConfig[s].baseUrl).onChange(async c=>{r.aiProviderConfig[s].baseUrl=c,await t.saveSettings()})),s==="Azure OpenAI"&&new J.Setting(e).setName(`${s} api version`).setDesc(`API Version for the ${s} API`).addText(u=>u.setPlaceholder("2023-05-15").setValue(r.aiProviderConfig[s].apiVersion).onChange(async c=>{r.aiProviderConfig[s].apiVersion=c,await t.saveSettings()}));let i=typeof o.defaultModel=="string"?o.defaultModel:o.defaultModel.id;new J.Setting(e).setName(`${s} language model`).setDesc(`Model to be used, defaults to ${i}, see ${s} Models for more info`).addDropdown(async u=>{let c=o.models;(s==="Google Gemini"||s==="OpenRouter"||s==="Custom (OpenAI Compatible)")&&(Hs({dropDown:u,plugin:t}),c=await new ye().getModels(s));for(let d of c)typeof d=="string"?u.addOption(d,d):u.addOption(d.id,d.name||d.id);u.setValue(r.aiProviderConfig[s].model),u.onChange(async d=>{r.aiProviderConfig[s].model=d,await t.saveSettings()})})}new J.Setting(e).setName("Advanced Model Parameters").setHeading(),new J.Setting(e).setName("Advanced mode").setDesc("Configure advanced model settings, enable this in order to send extra parameters to the API").addToggle(s=>s.setValue(r.advancedSettings).onChange(async o=>{r.advancedSettings=o,await t.saveSettings(),this.restartSettingsTab(t)})),r.advancedSettings&&(new J.Setting(e).setName("Temperature").setDesc("Temperature for the model, defaults to 0.5 for best suitable results, higher value means more creative but less accurate, lower value means less creative but more accurate.").addSlider(s=>{s.setDynamicTooltip(),s.setLimits(0,1,.1),s.setValue(r.temperature),s.onChange(async o=>{r.temperature=o,await t.saveSettings()})}),new J.Setting(e).setName("Custom model id").setDesc("Enter custom model ID for your own API, if this is empty, it will follow the selected menu above.").addText(s=>s.setPlaceholder("Enter the model name").setValue(r.customAiModel).onChange(async o=>{r.customAiModel=o,await t.saveSettings()})),new J.Setting(e).setName("Frequency penalty").setDesc("Decreasing the model's likelihood to repeat the same line verbatim, defaults to 0.0.").addSlider(s=>{s.setDynamicTooltip(),s.setLimits(-2,2,.1),s.setValue(r.frequencyPenalty),s.onChange(async o=>{r.frequencyPenalty=o,await t.saveSettings()})}),new J.Setting(e).setName("Max tokens").setDesc("Maximum number of tokens to generate (0 means not specifying in API)").addText(s=>s.setValue(r.maxTokens.toString()).onChange(async o=>{!Number.isNaN(Number.parseInt(o))&&Number.parseInt(o)>=0&&(r.maxTokens=Number.parseInt(o),await t.saveSettings())}))),new J.Setting(e).setName("Text Generation Logging").setHeading(),new J.Setting(e).setName("Enable").setDesc("Enable to log all the generated text to the storage").addToggle(s=>s.setValue(r.enableGenerationLogging).onChange(async o=>{r.enableGenerationLogging=o,await t.saveSettings()})),new J.Setting(e).setName("Import/Export").setDesc("Import or export the text generation logs").addButton(s=>{s.setButtonText("Import").onClick(async()=>{let o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=async i=>{let c=i.target.files?.[0];if(c){let d=new FileReader;d.onload=async m=>{let v=m.target?.result;if(typeof v=="string"){let y=JSON.parse(v);await new ye().setTextGenerationLogs(y),new J.Notice("Text generation logs imported successfully")}},d.readAsText(c)}},o.click()})}).addButton(s=>{s.setButtonText("Export").onClick(async()=>{let o=await new ye().getTextGenerationLogs(),i=new Blob([JSON.stringify(o)],{type:"application/json"}),u=URL.createObjectURL(i),c=document.createElement("a");c.href=u;let d=this.plugin.app.vault.getName(),m=new Date().getTime();c.download=`${t.manifest.id}-text-generation-logs-${d}-${m}.json`,c.click(),URL.revokeObjectURL(u)})}),new J.Setting(e).setName("Custom Prompts").setHeading(),new J.Setting(e).setDesc("Here is a list of all the custom prompts you've created. You can edit or delete them here, or add a new one below.").addButton(s=>{s.setTooltip("Add a new custom prompt"),s.setButtonText("Add"),s.onClick(async()=>{await t.app.setting.close(),new ct(t,!1).open()})});for(let s of r.customPrompts)new J.Setting(e).setName(s.name).addButton(o=>{o.setIcon("pencil"),o.setTooltip("Edit this prompt"),o.onClick(async()=>{let i=r.customPrompts.find(u=>u.name===s.name);i&&(await t.app.setting.close(),new ct(t,!0,s.name,i.data).open())})}).addButton(o=>{o.setIcon("cross"),o.setTooltip("Delete this prompt"),o.onClick(async()=>{if(o.buttonEl.textContent===""){for(let i=0;i<5;i++)o.setButtonText(`Are you sure to delete? (${5-i})`),o.setDisabled(!0),sleep(1e3);o.setDisabled(!1),o.setButtonText("Are you sure to delete?"),setTimeout(()=>{o.setIcon("cross")},5e3)}else o.buttonEl.parentElement?.parentElement&&o.buttonEl.parentElement.parentElement.remove(),r.customPrompts=r.customPrompts.filter(i=>i.name!==s.name),await t.saveSettings()})});new J.Setting(e).setName("Danger Zone").setHeading(),new J.Setting(e).setName("Debug mode").setDesc("Enable debug mode, which will log more information to the console").addToggle(s=>s.setValue(r.debugMode).onChange(async o=>{r.debugMode=o,await t.saveSettings()})),new J.Setting(e).setName("Import/Export settings").setDesc("Import/Export settings as a QR code or RAW URL.").addButton(s=>{s.setButtonText("Import").onClick(async()=>{new jt(this.plugin).open()})}).addButton(s=>{s.setButtonText("Export").onClick(async()=>{new Ft(this.plugin).open()})}),new J.Setting(e).setName("Reset settings").setDesc("This will reset all settings to their default values").addButton(s=>{s.setTooltip("Irrevisible action, please be careful!"),s.setButtonText("Reset").onClick(async()=>{if(s.buttonEl.textContent==="Reset"){for(let o=0;o<5;o++)s.setButtonText(`Are you sure to reset? (${5-o})`),s.setDisabled(!0),sleep(1e3);s.setDisabled(!1),s.setButtonText("Are you sure to reset?"),setTimeout(()=>{s.setButtonText("Reset")},5e3)}else await t.resetSettings(),new J.Notice("Resetting settings to default values"),this.restartSettingsTab(t)})})}};var mt=require("obsidian");var zt=require("obsidian"),qt=class extends zt.Modal{instruction;resolve;reject;promise;constructor(e){super(e.app),this.instruction="",this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}async submitForm(){if(this.instruction===""){this.reject("Instruction field is empty");return}this.resolve(this.instruction),this.close()}onOpen(){let{contentEl:e,instruction:t}=this;e.createEl("h4",{text:"Enter custom instruction here:"}),new zt.Setting(e).setName("Instruction:").addTextArea(r=>{r.inputEl.className="modal-text-area",r.setPlaceholder("Help me to transform bullets into numbered lists."),r.onChange(s=>{this.instruction=s}),r.setValue(t)}),new zt.Setting(e).addButton(r=>r.setButtonText("Confirm").setCta().onClick(async()=>{await this.submitForm()}))}onClose(){this.contentEl.empty(),this.resolve("")}};var $i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Bi=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=$i[t[n]&63];return e};function Ui(n,e){return n.replace(/\{\{(.*?)\}\}/g,(t,r)=>{let s=e[r.trim()];return s===void 0?"":String(s)})}async function Gn(n,e,t){try{let r=n.getSelection();if(r.length===0){new mt.Notice("No input selected");return}de(e,`Running command: ${t}`);let s=Tt(e.settings).find(M=>M.name===t);if(!s)throw new Error(`Could not find command data with name ${t}`);let o="";if(s.action===1){let M=new qt(e);M.open(),o=await M.promise}let i=e.settings.customAiModel,u=i.length>0?i:e.settings.aiProviderConfig[e.settings.aiProvider].model;new mt.Notice(`Generating text with ${t} (${e.settings.aiProvider})...`),console.log(r);let c=Ui(`${s.taskPrompt}

${Gs}`,{input:r,instructions:o}),d=Date.now(),m=await dr({plugin:e,messages:{system:s.systemPrompt,user:c}});if(!m){new mt.Notice(`No result from ${e.settings.aiProvider}`);return}let v={id:Bi(),by:t,model:u,generatedAt:new Date().toISOString(),provider:e.settings.aiProvider,orginalText:r,generatedText:m,customInstruction:o};e.settings.enableGenerationLogging&&await new ye().addTextGenerationLog(v),n.replaceSelection(m);let T=`Text generated in ${((Date.now()-d)/1e3).toFixed(2)}s`;de(e,`${T}:

${m}`),new mt.Notice(T)}catch(r){r instanceof Error&&(de(e,r),new mt.Notice(r.message.length>100?"Error generating text, see console for details":`Error generating text: ${r.message}`))}}var ji="RSUH6NwtuGcUS252ssX2U4dCeCi48Yg2ekqnrKatZkmQRetZpxMUxqE",Gi=n=>[...n].reverse().join(""),Fi=(n,e)=>[...n].map((t,r)=>String.fromCharCode(t.charCodeAt(0)^e.charCodeAt(r%e.length))).join(""),zi=n=>{try{if(!n?.z)return null;let e=Gi(n.z);return e=Fi(e,ji),JSON.parse(e)}catch(e){return console.error("Error while deobfuscating the plugin settings:",e),null}},qi=n=>{if(!n)return;let e=JSON.stringify(n);return e=Fi(e,ji),e=Gi(e),{_NOTICE:"This configuration is sensitive and should not be modified or shared. Non-compliance may disrupt system functionality.",z:e}};var Ir=class extends Le.Plugin{settings;async onload(){await ys(this),Wi.default.config({name:`${this.manifest.id}-${this.app.vault.getName()}`}),await this.loadSettings(),(0,Le.addIcon)("openai",Zt);for(let t of Tt(this.settings)){let r=t.name.toLowerCase().replaceAll(/\s/g,"-");t.icon&&(0,Le.addIcon)(r,t.icon),this.addCommand({id:(0,Fn.default)(t.name),name:t.name,icon:t.icon?r:Zt,editorCallback:s=>Gn(s,this,t.name)})}let e=[{name:"Check Text Generation Logs",onClick:async t=>{let r=new St(this);await r.initStates(),r.open()}}];for(let t of e)this.addCommand({id:(0,Fn.default)(t.name),name:t.name,editorCallback:r=>t.onClick(r)});this.registerEvent(this.app.workspace.on("editor-menu",(t,r)=>{t.addItem(s=>{s.setTitle(`${this.manifest.name} Commands`).setIcon("brain-cog");let o=s.setSubmenu();for(let i of Tt(this.settings)){let u=i.name.toLowerCase().replaceAll(/\s/g,"-");i.icon&&(0,Le.addIcon)(u,i.icon),o.addItem(c=>{c.setTitle(i.name).setIcon(i.icon?u:Zt).onClick(()=>Gn(r,this,i.name))})}})})),this.addSettingTab(new Ar(this.app,this)),this.registerObsidianProtocolHandler(this.manifest.id,async t=>{let s=await new Ne(this).importQrCodeUri(t);s.status==="error"?new Le.Notice(s.message):s.result&&(this.settings=vt(this.settings,s.result),this.saveSettings(),new Le.Notice("Settings imported. Please check the settings tab to verify."))}),de(this,"Loaded plugin.")}onunload(){}async resetSettings(){this.settings=At,await this.saveSettings()}async loadSettings(){let e=await this.loadData(),{success:t}=await we(bs,e);if(!t){this.settings=At,de(this,"Failed to parse settings, using default settings.");return}let r=zi(e);if(r===null){this.settings=At,de(this,"Failed to deobfuscate settings, using default settings.");return}this.settings=vt(At,r)}async saveSettings(){await this.saveData(qi(this.settings))}};
